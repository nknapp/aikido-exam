const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["_astro/main.aFIO1j07.js","_astro/_commonjsHelpers.C4iS2aBk.js"])))=>i.map(i=>d[i]);
import{$ as Z,q as kt,v as Ze,w as Wr,m as Ft,x as Nr,o as Tr,y as Cr}from"./web.DcA5ypnZ.js";let P=[],U=0;const _e=4;let Te=0,Vt=e=>{let t=[],r={get(){return r.lc||r.listen(()=>{})(),r.value},lc:0,listen(n){return r.lc=t.push(n),()=>{for(let i=U+_e;i<P.length;)P[i]===n?P.splice(i,_e):i+=_e;let s=t.indexOf(n);~s&&(t.splice(s,1),--r.lc||r.off())}},notify(n,s){Te++;let i=!P.length;for(let a of t)P.push(a,r.value,n,s);if(i){for(U=0;U<P.length;U+=_e)P[U](P[U+1],P[U+2],P[U+3]);P.length=0}},off(){},set(n){let s=r.value;s!==n&&(r.value=n,r.notify(s))},subscribe(n){let s=r.listen(n);return n(r.value),s},value:e};return r};const Ir=5,Ae=6,We=10;let Dr=(e,t,r,n)=>(e.events=e.events||{},e.events[r+We]||(e.events[r+We]=n(s=>{e.events[r].reduceRight((i,a)=>(a(i),i),{shared:{},...s})})),e.events[r]=e.events[r]||[],e.events[r].push(t),()=>{let s=e.events[r],i=s.indexOf(t);s.splice(i,1),s.length||(delete e.events[r],e.events[r+We](),delete e.events[r+We])}),Mr=1e3,qt=(e,t)=>Dr(e,n=>{let s=t(n);s&&e.events[Ae].push(s)},Ir,n=>{let s=e.listen;e.listen=(...a)=>(!e.lc&&!e.active&&(e.active=!0,n()),s(...a));let i=e.off;return e.events[Ae]=[],e.off=()=>{i(),setTimeout(()=>{if(e.active&&!e.lc){e.active=!1;for(let a of e.events[Ae])a();e.events[Ae]=[]}},Mr)},()=>{e.listen=s,e.off=i}}),Ur=(e,t,r)=>{Array.isArray(e)||(e=[e]);let n,s,i=()=>{if(s===Te)return;s=Te;let f=e.map(c=>c.get());if(!n||f.some((c,p)=>c!==n[p])){n=f;let c=t(...f);c&&c.then&&c.t?c.then(p=>{n===f&&a.set(p)}):(a.set(c),s=Te)}},a=Vt(void 0),o=a.get;a.get=()=>(i(),o());let l,u=r?()=>{clearTimeout(l),l=setTimeout(i)}:i;return qt(a,()=>{let f=e.map(c=>c.listen(u));return i(),()=>{for(let c of f)c()}}),a},Fr=(e,t)=>Ur(e,t),Et=e=>e,ne={},Ke={addEventListener(){},removeEventListener(){}};function Vr(){try{return typeof localStorage<"u"}catch{return!1}}Vr()&&(ne=localStorage);let qr={addEventListener(e,t,r){window.addEventListener("storage",t),window.addEventListener("pageshow",r)},removeEventListener(e,t,r){window.removeEventListener("storage",t),window.removeEventListener("pageshow",r)}};typeof window<"u"&&(Ke=qr);function zr(e,t=void 0,r={}){let n=r.encode||Et,s=r.decode||Et,i=Vt(t),a=i.set;i.set=u=>{typeof u>"u"?delete ne[e]:ne[e]=n(u),a(u)};function o(u){u.key===e?u.newValue===null?a(void 0):a(s(u.newValue)):ne[e]||a(void 0)}function l(){i.set(ne[e]?s(ne[e]):t)}return qt(i,()=>{if(l(),r.listen!==!1)return Ke.addEventListener(e,o,l),()=>{Ke.removeEventListener(e,o,l)}}),i}const zt=zr("youtubeEnabled","false"),bi=Fr(zt,e=>e==="true");function vi(e){zt.set(e?"true":"false")}const Gr="modulepreload",Jr=function(e){return"/"+e},Rt={},Gt=function(t,r,n){let s=Promise.resolve();if(r&&r.length>0){const i=document.getElementsByTagName("link"),a=document.querySelector("meta[property=csp-nonce]"),o=a?.nonce||a?.getAttribute("nonce");s=Promise.all(r.map(l=>{if(l=Jr(l),l in Rt)return;Rt[l]=!0;const u=l.endsWith(".css"),f=u?'[rel="stylesheet"]':"";if(!!n)for(let d=i.length-1;d>=0;d--){const g=i[d];if(g.href===l&&(!u||g.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${l}"]${f}`))return;const p=document.createElement("link");if(p.rel=u?"stylesheet":Gr,u||(p.as="script",p.crossOrigin=""),p.href=l,o&&p.setAttribute("nonce",o),document.head.appendChild(p),u)return new Promise((d,g)=>{p.addEventListener("load",d),p.addEventListener("error",()=>g(new Error(`Unable to preload CSS for ${l}`)))})}))}return s.then(()=>t()).catch(i=>{const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=i,window.dispatchEvent(a),!a.defaultPrevented)throw i})};var Br={},Yr=Object.defineProperty,Qr=(e,t,r)=>t in e?Yr(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,Jt=(e,t,r)=>(Qr(e,typeof t!="symbol"?t+"":t,r),r),$t=(e,t,r)=>{if(!t.has(e))throw TypeError("Cannot "+r)},h=(e,t,r)=>($t(e,t,"read from private field"),r?r.call(e):t.get(e)),b=(e,t,r)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,r)},v=(e,t,r,n)=>($t(e,t,"write to private field"),n?n.call(e,r):t.set(e,r),r),O=(e,t,r)=>($t(e,t,"access private method"),r),G="astro-i18n",Hr=`${G}.config`,Pt="github.com/alexandre-fernandez/astro-i18n/issues",Zr=class extends Error{constructor(e){super(e?`${G}: Unreachable code executed (at "${e}"), please open an issue at "${Pt}".`:`${G}: Unreachable code executed, please open an issue at "${Pt}".`)}},Kr=Zr;function $(){throw new Kr}function Xr(e=new Error("Something went wrong.")){throw e}var Xe,Bt,ge=class{constructor(e){b(this,Xe),Jt(this,"regexp"),this.regexp=new RegExp(e.source,e.flags)}static fromString(e,t){return new ge(new RegExp(e,t))}get source(){return this.regexp.source}get flags(){return this.regexp.flags}add(e){return this.regexp=new RegExp(`${this.regexp.source}${e.source}`,this.regexp.flags),this}test(e){return this.regexp.test(e)}exec(e,t){let r=O(this,Xe,Bt).call(this,e),n=r.next();for(;!n.done&&t(n.value)!==ge.BREAK;)n=r.next();return this}match(e){let t=null;return this.exec(e,r=>(t=r,ge.BREAK)),t}clone(){return new ge(new RegExp(this.regexp.source,this.regexp.flags))}toMatcher(){return this.match.bind(this)}},Yt=ge;Xe=new WeakSet,Bt=function*(e){let t=this.regexp;t.flags.includes("g")||(t=new RegExp(this.regexp.source,`${this.regexp.flags}g`));let r=t.exec(e);for(;r!==null;)r&&(yield{range:[r.index,r.index+r[0].length],match:[...r]}),r=t.exec(e)},Jt(Yt,"BREAK","break");var w=Yt,Qt=class{#t;#e;constructor({source:e,flags:t}){this.#t=e,this.#e=t}static fromRegex(e){return new Qt(e.regexp)}appendPattern(e){return this.#t=`${this.#t}${e}`,this}matchTrimifiable(){return this.#t=`\\s*${this.#t}\\s*`,this}assertStarting(){return this.#t=`^${this.#t}`,this}assertEnding(){return this.#t=`${this.#t}$`,this}addGroup(){return this.#t=`(${this.#t})`,this}addGlobalFlag(){return this.#e.includes("g")||(this.#e=`${this.#e}g`),this}build(){return new w(new RegExp(this.#t,this.#e))}},B=Qt;function ke(e,t,r){if(!t(e)){let n="";throw e?typeof e=="object"?n=`
${e.constructor.name}
${JSON.stringify(e,null,4)}`:typeof e=="symbol"?n=`Symbol("${e.description}")`:n=typeof e=="string"?`"${e}"`:`${e}`:n=`${e}`,!r&&t.name.startsWith("is")&&(r=t.name.slice(2)),new TypeError(r?`Unexpected type (expecting \`${r}\`), found: ${n}`:`Unexpected type, found: ${n}`)}}function en(e){return typeof e=="number"&&!Number.isNaN(e)}function tn(e){return e instanceof Date&&!Number.isNaN(e.getTime())}function Ee(e){return Array.isArray(e)}function je(e){return Ee(e)&&e.every(t=>typeof t=="string")}function S(e){return!!e&&typeof e=="object"}function _t(e){return S(e)?Object.getPrototypeOf(e)===Object.prototype:!1}var pe,ae,me,et=class{static get path(){return O(this,ae,me).call(this,"path")}static get posix(){return this.path.then(({posix:e})=>e)}static get fs(){return O(this,ae,me).call(this,"fs")}static get url(){return O(this,ae,me).call(this,"url")}static get module(){return O(this,ae,me).call(this,"module")}};pe=new WeakMap,ae=new WeakSet,me=async function(e){if(h(this,pe)[e])return h(this,pe)[e];let t=await Gt(()=>import(`node:${e}`),[]);return h(this,pe)[e]=t,t},b(et,ae),b(et,pe,{});var x=et;async function Ce(e){let{sep:t,posix:r}=await x.path;return e.split(t).join(r.sep)}async function $e(e){let t=await nn(e),r=e.split(t);return r.pop(),r.join(t)}function rn(e){switch(e){case"":return!0;case"/":return!0;case"\\":return!0;default:return!/[/\\]/.test(e)}}async function nn(e){let{sep:t}=await x.path,r=e.split("/").length-1,n=e.split("\\").length-1;return r>n?"/":n>r?"\\":t}function D(e,t,r){let{mode:n,mutable:s}={mode:"replace",mutable:!0,...r},i=s?e:structuredClone(e);for(let[a,o]of Object.entries(t)){let l=i[a];if(Object.hasOwn(i,a)){tt(l)&&tt(o)?D(l,o):n==="replace"&&(i[a]=t[a]);continue}i[a]=t[a]}return s?void 0:i}function Se(e,t,r){let n=typeof t=="string"?[t]:t,s=e;for(let[i,a]of n.entries()){if(i===n.length-1){s[a]=r;break}tt(s[a])||(s[a]={}),s=s[a]}}function tt(e){return typeof e!="object"?!1:Object.getPrototypeOf(e)===Object.prototype}var sn=class extends Error{constructor(e){super(e?`Peer dependency \`${e}\` was not found, if it's not already done try installing it.`:"A dependency was not found.")}},an=sn,on=class extends Error{constructor(e){super(e?`No file was found for the given path (${e}).`:"No file was found for the given path.")}},Ht=on,ln=class extends Error{constructor(e=[]){super(e.length>0?`Invalid file type, supported formats are: "${e.join('", "')}"`:"Invalid file type, format not supported.")}},Zt=ln,un=class extends Error{constructor(e){super(e?`Invalid format, could not parse JSON (${e}).`:"Invalid format, could not parse JSON.")}},fn=un;async function F(e){if(!e)return!1;let{existsSync:t,lstatSync:r}=await x.fs;return t(e)&&r(e).isDirectory()}async function Ve(e){if(!e)return!1;let{existsSync:t,lstatSync:r}=await x.fs;return t(e)&&!r(e).isDirectory()}async function cn(e){let{accessSync:t,constants:r}=await x.fs;try{return t(e,r.R_OK),!0}catch{return!1}}async function Kt(e,t){let{readdirSync:r}=await x.fs,n=r(e);await t(await Ce(e),n);for(let s of n){let i=`${e}/${s}`;await F(i)&&await Kt(i,t)}}async function hn(e){let t=null;t=await Gt(()=>import("./main.aFIO1j07.js").then(n=>n.m),__vite__mapDeps([0,1]));let r=/\.(js|cjs|mjs|ts)$/;if(!Ve(e))throw new Ht(e);if(!r.test(e))throw new Zt(["js","cjs","mjs","ts"]);try{let{outputFiles:n}=await t.build({entryPoints:[e],bundle:!0,external:["esbuild"],format:"cjs",platform:"node",write:!1}),s=new TextDecoder().decode(n[0]?.contents);return s?dn(s,e.replace(r,".cjs")):{}}catch{throw new an("esbuild")}}async function Re(e){if(!Ve(e))throw new Ht(e);if(!/\.json$/.test(e))throw new Zt(["json"]);let{readFileSync:t}=await x.fs,r=t(e,{encoding:"utf8"});try{return JSON.parse(r)}catch{throw new fn(e)}}async function dn(e,t){let{Module:r}=await x.module,n=t.split("/").slice(0,-1).join("/"),s={module:new r(t),require(i){return this.module.require(i)}};return s.module.paths=r._nodeModulePaths(n),s.module.filename=t,s.module.exports={},s.require=i=>s.module.require(i),Object.assign(s.require,{resolve:i=>r._resolveFilename(i,s.module)}),new Function("exports","require","module","__filename","__dirname",e)(s.module.exports,s.require,s.module,t,n),s.module.exports}var K="break",pn=["json","js","cjs","mjs","ts"],rt="i18n",Oe="pages",gn=class extends Error{constructor(){super(`Could not find astro "${Oe}" directory.`)}},mn=gn,wn=new w(/(\/[^\s/]+)?(\/[^\s/]+)\.astro$/),Ye=new w(/^---\n([\S\s]+)\n---\n/),yn=new w(/export\s*(?:const\s+prerender|var\s+prerender|let\s+prerender|prerender)(?:\s*=\s*)?(true|false)?|export\s*?{\s*?prerender\s*?}/),bn=new w(/export\s+(?:async\s+)?(?:function\s+|const\s+|var\s+|let\s+)getStaticPaths|export\s*{\s*getStaticPaths\s*}/),vn=class{#t;#e;#r;#o;#l;#i=void 0;#n=void 0;#s=null;#a=null;constructor({name:e,route:t,path:r,translations:n,routes:s}){this.#t=e,this.#e=t,this.#r=r,this.#o=n,this.#l=s}get name(){return this.#t}get route(){return this.#e}get path(){return this.#r}get translations(){return this.#o}get routes(){return this.#l}async getContent(){if(this.#s)return this.#s;let{readFileSync:e}=await x.fs;return this.#s=e(this.#r,{encoding:"utf8"}),this.#a=Ye.match(this.#s)?.match[0]||null,this.#s}async getFrontmatter(){return this.#a?this.#a:(this.getContent(),this.#a)}async hasGetStaticPaths(){if(typeof this.#i<"u")return this.#i;let{readFileSync:e}=await x.fs,t=e(this.#r,{encoding:"utf8"}),r=Ye.match(t)?.match[0];return this.#i=r?bn.test(r):!1,this.#i}async prerender(){if(typeof this.#n<"u")return this.#n;let{readFileSync:e}=await x.fs,t=e(this.#r,{encoding:"utf8"}),r=Ye.match(t)?.match[0];if(!r)return this.#n=!1,this.#n;let{match:n}=yn.match(r)||{};return n?n[1]?this.#n=n[1]==="true":this.#n=!0:this.#n=null,this.#n}async getProxy(e,t){let r=this.path.lastIndexOf("src/pages");if(r=r<0?null:r+9,!r)return null;let n="";e=e.replace(/\/$/,"")||"/";let s=this.#r.slice(r),i=e.split("/").length-1,a=`${"../".repeat(i)}${s.slice(1)}`;if(n+=`---
import Page from "${a}"
`,await this.hasGetStaticPaths()){let{locale:l,route:u}=t.internals.splitLocaleAndRoute(e);n+=`import { getStaticPaths as proxyGetStaticPaths } from "${a}"
/* @ts-ignore */
export const getStaticPaths = (props) => proxyGetStaticPaths({ ...props, astroI18n: `,n+=`{ locale: "${l}", route: "${u}", primaryLocale: "${t.primaryLocale}", secondaryLocales: ["${t.secondaryLocales.join('", "')}"] } })
`}let o=await this.prerender();return typeof o=="boolean"&&(n+=o?`export const prerender = true
`:`export const prerender = false
`),n+=`const { props } = Astro
---
<Page {...props} />`,n}},At=vn,$n=class extends Error{constructor(e){super(e?`Invalid pattern (${e.source}) given, the pattern should match the route name at index 1 (optional), the route locale at index 2 and the translated name at index 3 (optional).`:"Invalid pattern given, the pattern should match the route name at index 1 (optional), the route locale at index 2 and the translated name at index 3 (optional).")}},Sn=$n;function fe(e,t=!0){if(t){if(!S(e))return!1;for(let r of Object.values(e))if(!fe(r,!1))return!1;return!0}if(typeof e=="string")return!0;if(!S(e))return!1;for(let r of Object.values(e))if(!fe(r,!1))return!1;return!0}async function On(e,t={}){let{join:r}=await x.path,n=`${e}/${t.srcDir}/${Oe}`;if(!await F(n))throw new mn;let s={},i=(t.secondaryLocales||[]).map(d=>`/${t.srcDir}/${Oe}/${d}`),a={i18n:rt,pages:rt,...t.translationDirectory},o=[t.primaryLocale||"en",...t.secondaryLocales||[]],l=w.fromString(`(\\/[^\\/\\s]+)?(?:\\/_?${a.pages})?\\/_?(${o.join("|")})(\\.[^\\.\\s]+)?\\.json$`),u=w.fromString(`_?${a.pages}`),f=t.showPrimaryLocale?r(n,t.primaryLocale||"en"):n;await Kt(f,async(d,g)=>{if(!i.some(m=>d.includes(m)))for(let m of g){let y=`${d}/${m}`;if(await F(y))continue;let j=y.replace(n,"");if(j.endsWith(".astro")){let{match:C,range:Be}=wn.match(j)||{};if(!C||!C[2]||!Be)continue;let M="index",te="/";if(C[1]?C[2]==="/index"?(M=C[1].replace("/",""),te=`${j.slice(0,Be[0])}/${M}`):(M=C[2].replace("/",""),te=`${j.slice(0,Be[0]+C[1].length)}/${M}`):C[2]!=="/index"&&(M=C[2].replace("/",""),te=`/${M}`),M.startsWith("_"))continue;s[te]={...s[te],name:M,route:te,path:y};continue}if(!j.endsWith(".json"))continue;let{match:E,range:jt}=l.match(j)||{};if(!E||!jt)continue;let A=`${j.slice(0,jt[0])}${E[1]||"/"}`;u.test(A)&&(A="/");let Pe=E[2]||$(),Lt=A.split("/").slice(-1).join("")||"index",xt=E[3]?E[3].replace(".",""):null,Je=await Re(y);ke(Je,fe,`${Pe}.PageTranslations`),D(Je,s[A]?.translations?.[Pe]||{});let _r={...s[A]?.translations,[Pe]:Je},Ar=xt?{...s[A]?.routes,[Pe]:{[Lt]:xt}}:{...s[A]?.routes};s[A]={...s[A],name:Lt,route:A,translations:_r,routes:Ar}}});let c=[];for(let d of Object.values(s))!d.path||!d.name||!d.route||c.push({translations:{},routes:{},...d});let p=`${e}/${t.srcDir}/${a.i18n}/${Oe}`;if(!await F(p))return c.map(d=>new At(d));for(let d of c){let g=`${p}${d.route}`.replace(/\/$/,"");if(!await F(g))continue;let m=await Wt(g,d.name,l);for(let{translations:y,routes:j}of m)D(d.translations,y),D(d.routes,j);if(g=`${g}/${a.pages}`,!!await F(g)){m=await Wt(g,d.name,l);for(let{translations:y,routes:j}of m)D(d.translations,y),D(d.routes,j)}}return c.map(d=>new At(d))}async function Wt(e,t,r){let{readdirSync:n}=await x.fs,s=[];for(let i of n(e,{encoding:"utf8"})){let{match:a}=r.match(`/${i}`)||{};if(!a)continue;let o=a[2]||Xr(new Sn),l=a[3]?a[3].replace(".",""):null,u=await Re(`${e}/${i}`);ke(u,fe,`${o}.PageTranslations`),s.push({translations:{[o]:u},routes:l?{[o]:{[t]:l}}:{}})}return s}var jn=class extends Error{constructor(e){super(e?`Unable to find project root. ${e}`:"Unable to find project root.")}},Ln=jn,xn=w.fromString(`${G}\\.config\\.(${pn.join("|")})`),kn=w.fromString("astro\\.config\\.(js|cjs|mjs|ts)"),En=new w(/[/\\]?node_modules/),Rn=new w(/.+?node_modules/),Pn=new w(/(?:package|deno)\.json/),_n=new w(/package\.json/),An=new w(/deno\.jsonc?/),Wn=new w(/deps\.ts/),Qe=".",H="common",Nn=B.fromRegex(xn).assertEnding().build(),Xt=B.fromRegex(kn).assertEnding().build();function Tn(e){let t={routes:[],extra:[],common:void 0};for(let r of Object.keys(e)){if(r.startsWith("/")){t.routes.push(r);continue}if(r===H){t.common=H;continue}t.extra.push(r)}return t}async function Cn(e,t={}){let r=`${e}/${t.srcDir}/${t.translationDirectory?.i18n||rt}`,n={};if(!await F(r))return n;let{readdirSync:s}=await x.fs,i=[t.primaryLocale||"en",...t.secondaryLocales||[]],a=w.fromString(`(${i.join("|")})\\.json`);for(let o of s(r)){if(o===Oe)continue;let l=`${r}/${o}`;if(await F(l))for(let u of s(l)){let{match:f}=a.match(u)||{};if(!f?.[1])continue;let c=f[1],p=await Re(`${l}/${u}`);ke(p,fe,`${c}.GroupTranslations`),Se(n,[o,c],p)}}return n}async function He(e){return oe(er(e),Nn.regexp)}async function In(e){let t=await oe(er(e),Xt.regexp);if(!t)return null;let{readdirSync:r}=await x.fs,n=await $e(t),s=r(n),i=s.find(a=>_n.test(a));if(i){let a=await Re(`${n}/${i}`);if(_t(a)&&_t(a.dependencies)&&a.dependencies[G])return n}return s.find(a=>An.test(a))||s.find(a=>Wn.test(a))?n:null}async function Dn(e){let{readdirSync:t}=await x.fs;return typeof t(e).find(r=>Xt.test(r))=="string"}function er(e){let{match:t}=Rn.match(e)||{};return t?t[0]?.replace(En.regexp,"")||"/":e}async function oe(e,t,r=1,n=!0){let{readdirSync:s}=await x.fs;if(await Ve(e))return t.test(e)?e:n?oe(await $e(e),t,1,!1):null;if(!await cn(e)||rn(e))return null;let i=s(e),a=i.find(l=>t.test(l));if(a)return`${e}/${a}`;if(r>0&&typeof i.find(l=>Pn.test(l))!="string")return oe(await $e(e),t,1,!1);let o=i.filter(l=>{switch(l){case"node_modules":return!1;case"src":return!1;case"public":return!1;case"dist":return!1;case"build":return!1;default:return!l.startsWith(".")}});for(let l of o){let u=`${e}/${l}`;if(await Ve(e))continue;let f=await oe(u,t,-1,!1);if(typeof f=="string")return f}return r>0?oe(await $e(e),t,1,!1):null}var Mn=class extends Error{constructor(){super(`Unable to find ${Hr}.`)}},Un=Mn;function Fn(e){if(!S(e))return!1;for(let t of Object.values(e)){if(!S(t))return!1;for(let r of Object.values(t))if(typeof r!="string")return!1}return!0}function Vn(e){if(!S(e))return!1;for(let t of Object.values(e)){if(!S(t))return!1;for(let r of Object.values(t))if(!fe(r))return!1}return!0}function qn(e){if(!Ee(e))return!1;for(let t of e){if(!S(t))return!1;let r=Object.entries(t);if(r.length<2)return!1;for(let[n,s]of r)switch(n){case"groups":{if(!je(s))return!1;break}case"routes":{if(!je(s))return!1;break}default:return!1}}return!0}function zn(e){if(!S(e))return!1;for(let[t,r]of Object.entries(e))if(t!=="i18n"&&t!=="pages"||typeof r!="string")return!1;return!0}function Gn(e){if(!S(e))return!1;for(let[t,r]of Object.entries(e))switch(t){case"primaryLocale":{if(typeof r!="string")return!1;break}case"secondaryLocales":{if(!je(r))return!1;break}case"fallbackLocale":{if(typeof r!="string")return!1;break}case"showPrimaryLocale":{if(typeof r!="boolean")return!1;break}case"trailingSlash":{if(r!=="always"&&r!=="never")return!1;break}case"run":{if(r!=="server"&&r!=="client+server")return!1;break}case"translations":{if(!Vn(r))return!1;break}case"translationLoadingRules":{if(!qn(r))return!1;break}case"translationDirectory":{if(!zn(r))return!1;break}case"routes":{if(!Fn(r))return!1;break}case"srcDir":{if(typeof r!="string")return!1;break}default:return!1}return!0}function Jn(e){if(!S(e))return!1;for(let[t,r]of Object.entries(e))switch(t){case"primaryLocale":{if(typeof r!="string")return!1;break}case"secondaryLocales":{if(!je(r))return!1;break}case"showPrimaryLocale":{if(typeof r!="boolean")return!1;break}case"trailingSlash":{if(r!=="always"&&r!=="never")return!1;break}default:return!1}return!0}var Bn=class extends Error{constructor(e){super(e?`Your primaryLocale ("${e}") cannot be contained in your secondaryLocales array.`:"Your primaryLocale cannot be contained in your secondaryLocales array.")}},Yn=Bn,tr=class{primaryLocale;secondaryLocales;fallbackLocale;showPrimaryLocale;trailingSlash;run;translations;translationLoadingRules;translationDirectory;routes;path;srcDir;constructor({primaryLocale:e,secondaryLocales:t,fallbackLocale:r,showPrimaryLocale:n,trailingSlash:s,run:i,translations:a,translationLoadingRules:o,translationDirectory:l,routes:u,srcDir:f}={},c=""){if(this.primaryLocale=e||"en",this.secondaryLocales=t||[],this.fallbackLocale=r??(e||""),this.showPrimaryLocale=n||!1,this.trailingSlash=s||"never",this.run=i||"client+server",this.translations=a||{},this.translationLoadingRules=o||[],this.translationDirectory=l||{},this.routes=u||{},this.path=c||"",this.srcDir=f||"src",this.secondaryLocales.includes(this.primaryLocale))throw new Yn(this.primaryLocale)}get pages(){return Object.keys(this.translations).filter(e=>e.startsWith("/"))}static async fromFilesystem(e=null){let{fileURLToPath:t}=await x.url;if(!e){let n="";typeof process<"u"&&(n=Br.PWD||""),e=await He(await Ce(n))}if(!e){let n="";typeof process<"u"&&(n=process.cwd()),e=await He(await Ce(n))}if(!e){let n="";typeof import.meta=="object"&&typeof import.meta.url=="string"?n=t(import.meta.url):typeof __filename=="string"&&(n=__filename),n&&(e=await He(await Ce(n)))}if(!e)throw new Un;let r=e.endsWith(".json")?await Re(e):(await hn(e)).default;return ke(r,Gn,"AstroI18nConfig"),new tr(r,e).loadFilesystemTranslations()}async loadFilesystemTranslations(){if(!this.path)return this;let e=await $e(this.path);if(!await Dn(e)){let n=await In(this.path);if(!n)throw new Ln;e=n}let t=await On(e,this);for(let n of t)this.translations[n.route]||(this.translations[n.route]={}),D(this.translations[n.route]||$(),n.translations),this.routes||(this.routes={}),D(this.routes,n.routes);let r=await Cn(e,this);return D(this.translations,r),this}toClientSideObject(){return{primaryLocale:this.primaryLocale,secondaryLocales:this.secondaryLocales,showPrimaryLocale:this.showPrimaryLocale,trailingSlash:this.trailingSlash}}toObject(){return{primaryLocale:this.primaryLocale,secondaryLocales:this.secondaryLocales,fallbackLocale:this.fallbackLocale,showPrimaryLocale:this.showPrimaryLocale,trailingSlash:this.trailingSlash,run:this.run,translations:this.translations,translationLoadingRules:this.translationLoadingRules,translationDirectory:this.translationDirectory,routes:this.routes}}toString(){return JSON.stringify(this.toObject(),null,"	")}},we=tr,rr=(e=>(e.NONE="none",e.NODE="node",e.BROWSER="browser",e))(rr||{}),re=rr,Qn=new w(/[$A-Z_a-z]/),St=B.fromRegex(Qn).appendPattern("[\\w$]*").build(),Hn=new w(/-?\d+(?:\.\d+)?/),Zn=new w(/^\s*$/),Nt=new w(/{{(.+)}}/),nr=new w(/{#(.+?)#}/),Kn=w.fromString(`\\(\\s*(${St.source})\\s*\\)`),Xn=w.fromString(`>\\s*(${St.source})\\s*(\\()?`),es=new w(/(?:function)?\s*[\w$]*\s*\(([\S\s]*?)\)\s*(?:=>)?\s*{?([\S\s]*)/),ts=class extends Error{constructor(e=""){if(e){let t=e.slice(0,20);t.length===20&&(e=`${t.slice(0,17)}...`)}super(e?`Cannot parse unknown value (${e}).`:"Cannot parse unknown value")}},sr=ts,rs=class extends Error{constructor(e=""){super(e?`Cannot procces untrimmed value ("${e}").`:"Cannot procces untrimmed value")}},ir=rs,ar=B.fromRegex(Hn).assertStarting().build().toMatcher(),or=B.fromRegex(St).assertStarting().build().toMatcher();function ns(e){return Zn.test(e)?{range:[0,0],match:[""]}:null}function lr(e){return e.startsWith("undefined")?{range:[0,9],match:["undefined"]}:null}function ur(e){return e.startsWith("null")?{range:[0,4],match:["null"]}:null}function fr(e){return e.startsWith("true")?{range:[0,4],match:["true"]}:e.startsWith("false")?{range:[0,5],match:["false"]}:null}function cr(e){let t=e[0];if(t!=='"'&&t!=="'"&&t!=="`")return null;let r=e.slice(1).indexOf(t);return r===-1?null:(r+=2,{range:[0,r],match:[e.slice(0,r)]})}function ss(e){if(!e.startsWith("{"))return null;let t=0;for(let r=0;r<e.length;r+=1){let n=e[r];if(n==="{"?t+=1:n==="}"&&(t-=1),t===0){let s=r+1;return{range:[0,s],match:[e.slice(0,s)]}}}return null}function hr(e){if(!e.startsWith("["))return null;let t=0;for(let r=0;r<e.length;r+=1){let n=e[r];if(n==="["?t+=1:n==="]"&&(t-=1),t===0){let s=r+1;return{range:[0,s],match:[e.slice(0,s)]}}}return null}function X(e,t){let r=0,n=!1,s=null;for(let i=0;i<e.length;i+=1){let a=e[i]||$(),o=a==='"'||a==="'"||a==="`",l=!1,u=!1;if(a==="{"||a==="["?(r+=1,l=!0):a==="}"||a==="]"?(r-=1,u=!0):!n&&o?(r+=1,n=!0,s=a,l=!0):n&&a===s&&(r-=1,n=!1,s=null,u=!0),t(a,i,r,l,u)===K)break}}var is=B.fromRegex(Kn).assertStarting().build().toMatcher(),as=B.fromRegex(Xn).assertStarting().build().toMatcher();function dr(e){e=e.trim();let t=e,{value:r,type:n,end:s}=os(e);e=e.slice(s).trim();let i=null,a=is(e);if(a){let{match:l,range:u}=a;i=l[1]||$(),e=e.slice(u[1]).trim()}let o=[];for(;e.length>0;){e[0]===")"&&(e=e.slice(1));let{match:l,range:u}=as(e)||{};if(!l?.[1]||!u)break;if(e=e.slice(u[1]).trim(),!l[2]){o.push({name:l[1],args:[]});continue}let{args:f,end:c}=ls(e);e=e.slice(c).trim(),o.push({name:l[1],args:f})}return{raw:t,value:r,type:n,alias:i,formatters:o}}function se(e){let t=[];e=e.trim();let{type:r,value:n,alias:s,formatters:i}=dr(e);for(let a of i)for(let o of a.args)for(let l of se(o))t.push(l);switch(r){case 4:{t.push(s||n);break}case 6:{let a="",o=!0;X(e,(l,u,f,c)=>{if(f===0){for(let p of se(a))t.push(p);return K}if(o){if(c&&l==="{"||/\s/.test(l))return null;if(l===":")return o=!1,null}else if(l===","){for(let p of se(a))t.push(p);return a="",o=!0,null}return o||(a+=l),null});break}case 7:{let a="";X(e,(o,l,u,f)=>{if(u===0){for(let c of se(a))t.push(c);return K}if(f&&o==="[")return null;if(o===","){for(let c of se(a))t.push(c);return a="",null}return a+=o,null});break}}return t}function os(e){if(/^\s+\S/.test(e))throw new ir(e);let t=ns(e);if(t)return{value:"undefined",type:0,end:t.range[1]};if(t=lr(e),t)return{value:t.match[0]||$(),type:0,end:t.range[1]};if(t=ur(e),t)return{value:t.match[0]||$(),type:1,end:t.range[1]};if(t=fr(e),t)return{value:t.match[0]||$(),type:2,end:t.range[1]};if(t=ar(e),t)return{value:t.match[0]||$(),type:3,end:t.range[1]};if(t=or(e),t)return{value:t.match[0]||$(),type:4,end:t.range[1]};if(t=cr(e),t)return{value:t.match[0]||$(),type:5,end:t.range[1]};if(t=ss(e),t)return{value:t.match[0]||$(),type:6,end:t.range[1]};if(t=hr(e),t)return{value:t.match[0]||$(),type:7,end:t.range[1]};throw new sr(e)}function ls(e){let t={args:[],end:0},r="",n=!1;return X(e,(s,i,a)=>(s==="("&&(n=!0),a>0?(r+=s,null):s===","?(t.args.push(r.trim()),r="",null):s===")"?(n&&(r+=s),t.args.push(r.trim()),t.end=i+1,r="",K):(r+=s,null))),t}function us(e,t,r,n,s,i){let a;switch(r){case 0:{a=void 0;break}case 1:{a=null;break}case 2:{if(e==="true"){a=!0;break}if(e==="false"){a=!1;break}}case 3:{a=e.includes(".")?Number.parseFloat(e):Number.parseInt(e,10);break}case 4:{if(t){a=s[t];break}a=s[e];break}case 5:{a=e.slice(1,-1);break}case 6:{a=fs(e,s,i);break}case 7:{a=cs(e,s,i);break}default:throw new sr(e)}for(let{name:o,args:l}of n){let u=i[o];if(!u)return;let f=l.map(c=>new ce(c,s,i).value);a=u(a,...f)}return a}function fs(e,t,r){let n={},s="",i="",a=!0;return X(e,(o,l,u,f)=>{if(u===0)return n[s]=new ce(i,t,r).value,K;if(u===1){if(a){if(f||/\s/.test(o))return null;if(o===":")return a=!1,null;s+=o}else if(o===",")return n[s]=new ce(i,t,r).value,s="",i="",a=!0,null}return a||(i+=o),null}),n}function cs(e,t,r){let n=[],s="";return X(e,(i,a,o,l)=>{if(o===0)return n.push(new ce(s,t,r).value),K;if(o===1){if(l)return null;if(i===",")return n.push(new ce(s,t,r).value),s="",null}return s+=i,null}),n}var hs=class{raw;value;alias=null;constructor(e,t,r){let{raw:n,value:s,type:i,alias:a,formatters:o}=dr(e);this.raw=n,this.alias=a,this.value=us(s,a,i,o,t,r)}},ce=hs,ds=class extends Error{constructor(e){super(e?`Variant priority must be of type number (found: (${e})).`:"Variant priority must be of type number.")}},ps=ds,gs=class extends Error{constructor(e){super(e?`Invalid variant property key (${e}), it must be a valid variable name.`:"Invalid variant property value, it must be a valid variable name.")}},ms=gs,Tt="undefined, null, number, string, boolean and flat arrays of these types.",ws=class extends Error{constructor(e){super(e?`Invalid variant property value (${e}), accepted types are: ${Tt}.`:`Invalid variant property value, accepted types are: ${Tt}.`)}},Ge=ws;function nt(e){if(/^\s/.test(e))throw new ir(e);let t=lr(e);if(t)return{value:t.match[0]||$(),type:0,end:t.range[1]};if(t=ur(e),t)return{value:t.match[0]||$(),type:1,end:t.range[1]};if(t=fr(e),t)return{value:t.match[0]||$(),type:2,end:t.range[1]};if(t=ar(e),t)return{value:t.match[0]||$(),type:3,end:t.range[1]};if(t=cr(e),t)return{value:t.match[0]||$(),type:5,end:t.range[1]};if(t=hr(e),t)return{value:t.match[0]||$(),type:7,end:t.range[1]};throw new Ge(e)}function pr(e){return e===null||typeof e>"u"||typeof e=="boolean"||typeof e=="number"||typeof e=="string"}function ys(e){return Array.isArray(e)?e.every(t=>pr(t)):!1}function qe(e,t){let r;switch(t){case 0:{r=void 0;break}case 1:{r=null;break}case 2:{if(e==="true"){r=!0;break}if(e==="false"){r=!1;break}}case 3:{r=e.includes(".")?Number.parseFloat(e):Number.parseInt(e,10);break}case 5:{r=e.slice(1,-1);break}case 7:{r=bs(e);break}default:throw new Ge(e)}return r}function bs(e){let t=[],r="";return X(e,(n,s,i,a)=>{if(i===0){let{value:o,type:l}=nt(r.trim()),u=qe(o,l);if(!pr(u))throw new Ge(r);return t.push(u),K}if(i===1){if(a)return null;if(n===","){let{value:o,type:l}=nt(r.trim());return t.push(qe(o,l)),r="",null}}return r+=n,null}),t}var vs="$priority",gr=class{raw;priority;properties;value;constructor({raw:e,priority:t,properties:r,value:n}={}){this.raw=e||"",this.priority=t||0,this.properties=r||[],this.value=n||""}static fromString(e,t){let r=new gr;r.value=t;let n=e.trim();r.raw=n;let s="",i="",a=!0;return X(n,(o,l,u)=>{let f=l===n.length-1;if(a)return/\s/.test(o)?null:o===":"?(a=!1,null):(s+=o,null);if(u>0)return i+=o,null;if(f&&(i+=o),o===","||f){let c=or(s.trim())?.match[0];if(!c)throw new ms(s);let{value:p,type:d}=nt(i.trim());if(c===vs){let y=qe(p,d);if(typeof y!="number")throw new ps(p);return r.priority=y*.001,null}let g=qe(p,d),m=Array.isArray(g)?g:[g];if(!ys(m))throw new Ge(i);return r.properties.push({name:c,values:m}),s="",i="",a=!0,null}return i+=o,null}),r}calculateMatchingScore(e){let t=0;for(let{name:r,values:n}of this.properties){if(!Object.hasOwn(e,r))continue;let s=e[r],i=[];for(let a of n){if(typeof s=="number"&&typeof a=="number"){let o=s-a;if(o===0){i.push(1e3);continue}i.push(Math.abs(1e3/o)-1);continue}s===a&&i.push(1e3)}i.length!==0&&(t+=Math.max(...i))}return t>0?t+this.priority:t}},st=gr,$s=class extends Error{constructor(){super("Cannot use a variant on a key which value is not a string.")}},Ss=$s;function mr(e,t="",r={}){for(let[n,s]of Object.entries(e)){if(typeof s=="string"){let{match:i,range:a}=Nt.match(n)||{};if(!i?.[1]||!a){let l=`${t}${Qe}${n}`.replace(/^\./,"");if(r[l]){r[l].default=s;continue}r[l]={default:s,variants:[]};continue}let o=`${t}${Qe}${n.slice(0,a[0])+n.slice(a[1])}`.replace(/^\./,"");if(r[o]){r[o].variants.push(st.fromString(i[1],s));continue}r[o]={variants:[st.fromString(i[1],s)]};continue}if(Nt.test(n))throw new Ss;mr(s,`${t}${Qe}${n}`.replace(/^\./,""),r)}return r}function Os(e,t,r){let n=[];nr.exec(e,({match:i,range:a})=>{if(!i[1])return;let{value:o}=new ce(i[1],t,r);n.push({value:js(o),range:a})});let s=e;for(let i=n.length-1;i>=0;i-=1){let{value:a,range:o}=n[i]||$();s=s.slice(0,o[0])+a+s.slice(o[1])}return s}function js(e){switch(typeof e){case"undefined":return"";case"string":return e;case"bigint":return e.toString();case"number":return e.toString();case"boolean":return e.toString();case"symbol":return`Symbol(${e.description})`||"Symbol";case"function":return e.name;case"object":return e?Object.hasOwn(e,"toString")&&typeof e.toString=="function"?e.toString():JSON.stringify(e,null,"	"):"";default:return""}}function Ls(e){for(let t of Object.values(e))for(let r of Object.values(t))for(let n of Object.values(r))n.variants=n.variants.map(s=>new st(s));return e}var Ot=new w(/\[(\.{3})?([\w-]+)]/),xs=new w(/(?:https?:\/{2})?[\w#%+.:=@~-]{1,256}\.[\d()A-Za-z]{1,6}\b[\w#%&()+./:=?@~-]*/),wr=class{#t={};#e;constructor(e={},t={}){this.#e=e,this.#t=t}static fromConfig({translations:e,translationLoadingRules:t}){return new wr().addTranslations(e).addTranslationLoadingRules(t)}get(e,t,r,n="",s={},i={},a=!1){let o=this.#r(e,t,r,a);!o&&n&&n!==r&&(o=this.#r(e,t,n,a));let l={score:0,value:o?.default||e};for(let u of o?.variants||[]){let f=u.calculateMatchingScore(s);f>l.score&&(l.score=f,l.value=u.value)}return Os(l.value,s,i)}getRouteGroups(){return Object.keys(this.#e).filter(e=>e.startsWith("/"))}getParamRouteGroups(){return Object.keys(this.#e).filter(e=>e.startsWith("/")&&Ot.test(e))}getLocaleTranslationVariables(e){let t={};for(let r of Object.values(this.#e)){if(!r[e])continue;let n=Object.entries(r[e]||$());for(let[s,{default:i,variants:a}]of n){let o={interpolationVars:[],variantVars:[],isVariantRequired:!1},l=[];if(i===void 0?o.isVariantRequired=!0:l.push(i),a.length>0){let g={};for(let{value:m,properties:y}of a){l.push(m);for(let{name:j,values:E}of y)g[j]=[...g[j]||[],...E]}o.variantVars=Object.entries(g).map(([m,y])=>({name:m,values:y}))}for(let g of l)nr.exec(g,({match:m})=>{m[1]&&(o.interpolationVars=[...new Set([...o.interpolationVars,...se(m[1])])])});if(!t[s]){t[s]=o;continue}let{interpolationVars:u,variantVars:f,isVariantRequired:c}=t[s]||{},p=[...new Set([...u||[],...o.interpolationVars])],d=[];for(let g of o.variantVars){let m=f?.find(y=>y.name===g.name);d.push(m?{name:g.name,values:[...new Set([...m?.values||[],...g.values])]}:g)}t[s]={interpolationVars:p,variantVars:d,isVariantRequired:(c||!1)&&o.isVariantRequired}}}return t}addTranslations(e){for(let[t,r]of Object.entries(e)){let n=Object.entries(r);if(n.length===0&&!this.#e[t]){this.#e[t]={};continue}for(let[s,i]of n)Se(this.#e,[t,s],mr(i))}return this}addTranslationLoadingRules(e){if(e.length===0)return this;let{routes:t}=Tn(this.#e);for(let r of e){let n=[];for(let s of r.groups){let i=w.fromString(s);n.push(...Object.keys(this.#e).filter(a=>i.test(a)))}for(let s of r.routes){let i=w.fromString(s),a=t.filter(o=>i.test(o));for(let o of a){if(!this.#t[o]){this.#t[o]=[...new Set(n)];continue}this.#t[o]=[...new Set([...this.#t[o]||$(),...n])]}}}return this}clear(){this.#t={},this.#e={}}toClientSideObject(e){let t={};if(this.#t[e])for(let r of this.#t[e]||$())t[r]=this.#e[r]||{};return this.#e[e]&&(t[e]=this.#e[e]||{}),this.#e[H]&&(t[H]=this.#e[H]||{}),t}toObject(){return{loadDirectives:this.#t,translations:this.#e}}toString(){return JSON.stringify(this.toObject(),null,"	")}#r(e,t,r,n=!1){let s=null;if(n){let i=this.getRouteGroups();for(let a of i)for(let o of this.#t[a]||[]){let l=this.#e[o]?.[r]?.[e];if(l){s=l;break}}if(!s)for(let a of i)this.#e[a]?.[r]?.[e]&&(s=this.#e[a]?.[r]?.[e]||$())}else{for(let i of this.#t[t]||[]){let a=this.#e[i]?.[r]?.[e];if(a){s=a;break}}!s&&this.#e[t]?.[r]?.[e]&&(s=this.#e[t]?.[r]?.[e]||$())}return!s&&this.#e[H]?.[r]?.[e]&&(s=this.#e[H]?.[r]?.[e]||$()),s}},it=wr,ks=class extends Error{constructor(e){super(e?`Invalid date (${e}).`:"Invalid date.")}},Es=ks,Rs=class extends TypeError{constructor(e,t){e?super(t?`Invalid formatter (${t}) parameter: ${e}`:`Invalid formatter parameter: ${e}`):super(t?`Invalid formatter (${t}) parameter.`:"Invalid formatter parameter.")}},Le=Rs,Ps=class extends TypeError{constructor(e,t){e?super(t?`Invalid formatter (${t}) value: ${e}`:`Invalid formatter value: ${e}`):super(t?`Invalid formatter (${t}) value.`:"Invalid formatter value.")}},de=Ps;function Ct(e){if(typeof e!="string")throw new de(`Received value is not a string, found "${e}".`,"upper");return e.toUpperCase()}function It(e){if(typeof e!="string")throw new de(`Received value is not a string, found "${e}".`,"lower");return e.toLowerCase()}function _s(e){if(typeof e!="string")throw new de(`Received value is not a string, found "${e}".`,"capitalize");return`${e.slice(0,1).toUpperCase()}${e.slice(1).toLowerCase()}`}function As(e,t){return e??t}function Dt(e,t){return e||t}function Ws(e,t){return typeof e=="string"?e:t}function Ns(e,t=!0){if(typeof e=="symbol")throw new de(`Received value cannot be a symbol, found "${e.toString()}".`,"json");if(typeof t!="boolean")throw new Le(`format must be a boolean, found "${t}".`,"json");return t?JSON.stringify(e,null,"	"):JSON.stringify(e)}function Ts(e,t={},r=he.locale){if(typeof e=="string"&&(e=Number.parseFloat(e)),!en(e))throw new de(`Received value is not a number, found "${e}".`,"intl_format_number");if(!S(t))throw new Le(`options must be an object, found "${t}".`,"intl_format_number");if(typeof r!="string")throw new Le(`locale must be a string, found "${r}".`,"intl_format_number");return new Intl.NumberFormat(r,t).format(e)}function Cs(e,t={},r=he.locale){if(typeof e!="string"&&typeof e!="number"&&!(e instanceof Date))throw new de(`Received value is not a string, number or Date, found "${e}".`,"intl_format_date");if(e=e instanceof Date?e:new Date(e),!tn(e))throw new Es(e);if(!S(t))throw new Le(`options must be an object, found "${t}".`,"intl_format_date");if(typeof r!="string")throw new Le(`locale must be a string, found "${r}".`,"intl_format_date");return new Intl.DateTimeFormat(r,t)}var Is=B.fromRegex(es).assertStarting().assertEnding().build().toMatcher();function Ds(e){let t=Is(e.toString());if(!t)return{args:[],body:""};let[,r,n]=t.match;return{args:Us(r||""),body:Fs(n||"")}}function Ms(e){let t={};for(let[r,n]of Object.entries(e))t[r]=new Function(...n.args,n.body);return t}function Us(e){return e.trim().split(",").map(t=>t.trim())}function Fs(e){return e.trim().endsWith("}")?e.slice(0,-1):e}var Vs=class{#t={upper:Ct,uppercase:Ct,lower:It,lowercase:It,capitalize:_s,json:Ns,default_nullish:As,default:Dt,default_falsy:Dt,default_non_string:Ws,intl_format_number:Ts,intl_format_date:Cs};#e;#r;constructor(e={}){this.#e=e,this.#r={...this.#t,...this.#e}}get default(){return this.#t}get custom(){return this.#e}addFormaters(e){for(let[t,r]of Object.entries(e))this.#r[t]||(this.#r[t]=r,this.#e[t]=r);return this}clear(){this.#e={},this.#r={}}toClientSideObject(){let e={};for(let[t,r]of Object.entries(this.#e))e[t]=Ds(r);return e}toObject(){return this.#r}toString(){return JSON.stringify(this.toObject(),null,"	")}},at=Vs,qs=class extends Error{constructor(e){super(e?`Invalid environment: ${e}`:"Invalid environment.")}},zs=qs,yr=class{#t;#e;constructor(e={},t=""){this.#e=e,this.#t=t}static fromConfig({routes:e,primaryLocale:t}){return new yr({},t).addSegments(e)}get(e,t,r){return this.#e[t]?.[e]?.[r]||null}getSegmentLocales(e){let t=[];for(let[r,n]of Object.entries(this.#e))n[e]&&t.push(r);return t}addSegments(e){let t=Object.entries(e);for(let[r,n]of t){let s=t.filter(([i])=>i!==r&&i!==this.#t);for(let[i,a]of Object.entries(n)){Se(this.#e,[this.#t,i,r],a),Se(this.#e,[r,a,this.#t],i);for(let[o,l]of s)l[i]&&Se(this.#e,[r,a,o],l[i])}}return this}clear(){this.#t="",this.#e={}}toClientSideObject(){return{...this.#e}}toObject(){return{primaryLocale:this.#t,segments:this.#e}}toString(){return JSON.stringify(this.toObject(),null,"	")}},ot=yr,Gs=class extends Error{constructor(){super("Cannot initialize astro-i18n, it already has been initialized.")}},Js=Gs,Bs=class extends Error{constructor(e){super(e?`Cannot use filesystem: ${e}`:"Cannot use filesystem.")}},Ys=Bs,Qs=class extends Error{constructor(){super(`Could not find the serialized ${G} state in the DOM. Check your ${G} config.`)}},Hs=Qs;function Zs(e){if(!S(e))return!1;for(let t of Object.values(e)){if(!S(t))return!1;for(let r of Object.values(t)){if(!S(r))return!1;for(let n of Object.values(r))if(typeof n!="string")return!1}}return!0}function Ks(e){if(!S(e))return!1;for(let t of Object.values(e)){if(!S(t))return!1;let r=Object.entries(t);if(r.length<2)return!1;for(let[n,s]of r)switch(n){case"args":{if(!je(s))return!1;break}case"body":{if(typeof s!="string")return!1;break}}}return!0}function Xs(e){if(!S(e))return!1;for(let t of Object.values(e)){if(!S(t))return!1;for(let r of Object.values(t))if(!ei(r))return!1}return!0}function ei(e){if(!S(e))return!1;for(let t of Object.values(e)){if(!S(t))return!1;for(let[r,n]of Object.entries(t))switch(r){case"default":{if(typeof n!="string")return!1;break}case"variants":{if(!Ee(n)||!n.every(s=>ti(s)))return!1;break}default:return!1}}return!0}function ti(e){if(!S(e))return!1;let t=Object.entries(e);if(t.length<4)return!1;for(let[r,n]of t)switch(r){case"raw":{if(typeof n!="string")return!1;break}case"priority":{if(typeof n!="number")return!1;break}case"properties":{if(!Ee(n)||!n.every(s=>ri(s)))return!1;break}case"value":{if(typeof n!="string")return!1;break}default:return!1}return!0}function ri(e){if(!S(e))return!1;let t=Object.entries(e);if(t.length<2)return!1;for(let[r,n]of t)switch(r){case"name":{if(typeof n!="string")return!1;break}case"values":{if(!Ee(n)||!n.every(s=>typeof s=="boolean"||typeof s=="string"||typeof s=="number"||s==null))return!1;break}default:return!1}return!0}function ni(e){if(!S(e))return!1;let t=Object.entries(e);if(t.length<5)return!1;for(let[r,n]of t)switch(r){case"locale":{if(typeof n!="string")return!1;break}case"route":{if(typeof n!="string")return!1;break}case"config":{if(!Jn(n))return!1;break}case"translations":{if(!Xs(n))return!1;break}case"segments":{if(!Zs(n))return!1;break}case"formatters":{if(!Ks(n))return!1;break}default:return!1}return!0}function Mt(e){return xs.test(e)}function si(e){let t="",r=0;return Ot.exec(e,({match:n,range:[s,i]})=>{if(t+=e.slice(r,s),!n[2]){r=i;return}t+=n[1]?"[\\w/-]+":"[\\w-]+",r=i}),t+=e.slice(r),w.fromString(t.replaceAll("/","\\/"))}var ii=class extends Error{constructor(){super("Cannot perform operation, astro-i18n is not initialized.")}},Ut=ii,ai=class extends Error{constructor(){super("Could not redirect, is this code running in the server ?")}},oi=ai,Ne,Y,V,q,L,k,_,T,N,z,Q,W,le,lt,br,ut,vr,ft,$r,ct,Sr,ht,Or,ye,Ie,De,dt,Me,pt,be,Ue,Fe,gt,mt,jr,wt,Lr,yt=class{constructor(){b(this,lt),b(this,ut),b(this,ft),b(this,ct),b(this,ht),b(this,ye),b(this,De),b(this,Me),b(this,be),b(this,Fe),b(this,mt),b(this,wt),b(this,Y,void 0),b(this,V,""),b(this,q,""),b(this,L,new we),b(this,k,new it),b(this,_,new ot),b(this,T,new at),b(this,N,!1),b(this,z,!1),b(this,Q,{}),b(this,W,null),b(this,le,""),typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node<"u"?v(this,Y,re.NODE):typeof window>"u"?v(this,Y,re.NONE):(v(this,Y,re.BROWSER),h(this,L).run==="client+server"&&O(this,lt,br).call(this))}get environment(){return h(this,Y).toString()}get route(){return h(this,z)?"":h(this,q)}set route(e){Mt(e)&&(e=new URL(e).pathname),e=decodeURI(e);let{locale:t,route:r}=O(this,be,Ue).call(this,e);v(this,q,r),v(this,V,t||O(this,Me,pt).call(this,O(this,Fe,gt).call(this,r))||this.primaryLocale)}get pages(){return h(this,k).getRouteGroups()}get page(){return O(this,ye,Ie).call(this,this.route)}get locale(){return h(this,V)}get locales(){return[h(this,L).primaryLocale,...h(this,L).secondaryLocales]}get primaryLocale(){return h(this,L).primaryLocale}get secondaryLocales(){return h(this,L).secondaryLocales}get fallbackLocale(){return h(this,L).fallbackLocale}get isInitialized(){return h(this,N)}get internals(){return{toHtml:O(this,mt,jr).bind(this),config:h(this,L),segments:h(this,_),translations:h(this,k),splitLocaleAndRoute:O(this,be,Ue).bind(this),toString:O(this,wt,Lr).bind(this),waitInitialization:O(this,ut,vr).bind(this),setPrivateProperties:O(this,ht,Or).bind(this),reinitalize:O(this,ft,$r).bind(this),getAndClearRedirection:O(this,ct,Sr).bind(this)}}t(e,t={},r={}){if(!h(this,N))throw new Ut;let{route:n,locale:s,fallbackLocale:i}=r;if(h(this,z))return h(this,k).get(e,"",s||this.locale,i||this.fallbackLocale,t,h(this,T).toObject(),!0);let a=n?O(this,ye,Ie).call(this,n):O(this,ye,Ie).call(this,this.route);return h(this,k).get(e,a||"",s||this.locale,i||this.fallbackLocale,t,h(this,T).toObject())}l(e,t={},r={}){if(!h(this,N))throw new Ut;let{targetLocale:n,routeLocale:s,showPrimaryLocale:i,query:a}=r,o=O(this,Fe,gt).call(this,decodeURI(e)),l=this.locales.includes(o[0]||"")&&o.shift()||"",u=s||l||O(this,Me,pt).call(this,o)||this.primaryLocale,f=n||this.locale,c=o.map(m=>h(this,_).get(m,u,f)||m).join("/"),p=Object.entries(t);if(p.length>0)for(let[m,y]of p)c=c.replace(`[${m}]`,String(y).replace("/",""));if((i===void 0?h(this,L).showPrimaryLocale||f!==this.primaryLocale:i)&&(c=c?`${f}/${c}`:f),h(this,L).trailingSlash==="always"&&(c+="/"),c=c.startsWith("/")?c:`/${c}`,!a)return c;let d={};for(let[m,y]of Object.entries(a))d[m]=String(y);let g=new URLSearchParams(d).toString();return g?`${c}?${g}`:c}addTranslations(e){return h(this,k).addTranslations(e),O(this,De,dt).call(this),this}addFormatters(e){return h(this,T).addFormaters(e),this}addTranslationLoadingRules(e){return h(this,k).addTranslationLoadingRules(e),this}addRoutes(e){return h(this,_).addSegments(e),O(this,De,dt).call(this),this}extractRouteLocale(e){return O(this,be,Ue).call(this,e).locale}redirect(e,t=301){if(this.environment===re.BROWSER)throw new oi;if(typeof e=="string"){let r=Mt(e)?new URL(e):new URL(`${h(this,le)}/${e.replace(/^\//,"")}`);v(this,W,Response.redirect(r,t));return}v(this,W,Response.redirect(e,t))}async initialize(e=void 0,t={}){if(h(this,N))throw new Js;switch(h(this,Y)){case re.NODE:{v(this,L,typeof e=="object"?await new we(e).loadFilesystemTranslations():await we.fromFilesystem(e));break}case re.NONE:{if(typeof e=="string")throw new Ys("Cannot load config from filesystem in a non-node environment.");v(this,L,new we(e||{}));break}default:throw new zs("Cannot initialize in a browser environment.")}v(this,k,it.fromConfig(h(this,L))),v(this,_,ot.fromConfig(h(this,L))),v(this,T,new at(t)),v(this,N,!0)}},xr=yt;Ne=new WeakMap,Y=new WeakMap,V=new WeakMap,q=new WeakMap,L=new WeakMap,k=new WeakMap,_=new WeakMap,T=new WeakMap,N=new WeakMap,z=new WeakMap,Q=new WeakMap,W=new WeakMap,le=new WeakMap,lt=new WeakSet,br=function(){let e=document.querySelector(`#${h(yt,Ne)}`);if(!e||!e.textContent)throw new Hs;let t=JSON.parse(e.textContent);ke(t,ni),v(this,V,t.locale),v(this,q,t.route),v(this,L,new we(t.config)),v(this,k,new it(Ls(t.translations))),v(this,_,new ot(t.segments,t.config.primaryLocale)),v(this,T,new at(Ms(t.formatters))),v(this,N,!0),e.remove()},ut=new WeakSet,vr=async function(){let e=t=>{h(this,N)?t():setTimeout(()=>e(t),25)};return new Promise(e)},ft=new WeakSet,$r=async function(e=void 0,t={}){v(this,N,!1),h(this,k).clear(),h(this,_).clear(),h(this,T).clear(),await this.initialize(e,t)},ct=new WeakSet,Sr=function(){let e=h(this,W);return v(this,W,null),e},ht=new WeakSet,Or=function(e={}){let{route:t,locale:r,isGetStaticPaths:n,origin:s}={route:h(this,q),locale:h(this,V),isGetStaticPaths:h(this,z),origin:h(this,le),...e};v(this,q,t),v(this,V,r),v(this,z,n),v(this,le,s)},ye=new WeakSet,Ie=function(e){if(h(this,z))return null;if(h(this,Q)[e])return h(this,Q)[e]||$();let t=this.l(e,void 0,{targetLocale:this.primaryLocale});if(this.pages.includes(t))return t;let r=null;for(let n of this.pages)if(Ot.test(n)&&si(n).test(e)){r=n;break}return!r||!this.pages.includes(r)?null:(h(this,Q)[e]=r,r)},De=new WeakSet,dt=function(){v(this,Q,{})},Me=new WeakSet,pt=function(e){let t={};for(let n of e)for(let s of h(this,_).getSegmentLocales(n))t[s]||(t[s]=0),t[s]+=1;let r={locale:"",score:0,isExAequo:!0};for(let[n,s]of Object.entries(t)){if(s>r.score){r.locale=n,r.score=s,r.isExAequo=!1;continue}s===r.score&&(r.isExAequo=!0)}return r.isExAequo?null:r.locale||null},be=new WeakSet,Ue=function(e){e.startsWith("/")||(e=`/${e}`);let t=w.fromString(`\\/(${this.locales.join("|")})(?:\\/.*)?$`),{match:r}=t.match(e)||{},n=r?.[1]||null;return{locale:n,route:n?e.replace(`/${n}`,"").replace(/\/$/,"")||"/":e.replace(/\/$/,"")||"/"}},Fe=new WeakSet,gt=function(e){return e.replace(/^\//,"").replace(/\/$/,"").split("/")},mt=new WeakSet,jr=function(){let e={locale:h(this,V),route:h(this,q),config:h(this,L).toClientSideObject(),translations:h(this,k).toClientSideObject(this.route),segments:h(this,_).toClientSideObject(),formatters:h(this,T).toClientSideObject()};return`<script id="${h(yt,Ne)}" type="application/json">${JSON.stringify(e)}<\/script>`},wt=new WeakSet,Lr=function(){let e={};for(let[t,r]of Object.entries(h(this,T).toObject()))e[t]=r.name;return JSON.stringify({environment:this.environment,route:this.route,locale:this.locale,locales:this.locales,primaryLocale:this.primaryLocale,secondaryLocales:this.secondaryLocales,fallbackLocale:this.fallbackLocale,isInitialized:this.isInitialized,"#redirection":h(this,W)instanceof Response?{url:h(this,W).url,status:h(this,W).status}:h(this,W),"#origin":h(this,le),"#isGetStaticPaths":h(this,z),"#routePageCache":h(this,Q),"#config":h(this,L).toObject(),"#translations":h(this,k).toObject(),"#segments":h(this,_).toObject(),"#formatters":e},null,"	")},b(xr,Ne,`__${G}__`);var li=xr,he=new li,ui=he.t.bind(he),$i=he.l.bind(he);function Si(e,t){return ui(e,t)}const bt=Symbol("store-raw"),ue=Symbol("store-node"),I=Symbol("store-has"),kr=Symbol("store-self");function Er(e){let t=e[Z];if(!t&&(Object.defineProperty(e,Z,{value:t=new Proxy(e,hi)}),!Array.isArray(e))){const r=Object.keys(e),n=Object.getOwnPropertyDescriptors(e);for(let s=0,i=r.length;s<i;s++){const a=r[s];n[a].get&&Object.defineProperty(e,a,{enumerable:n[a].enumerable,get:n[a].get.bind(t)})}}return t}function J(e){let t;return e!=null&&typeof e=="object"&&(e[Z]||!(t=Object.getPrototypeOf(e))||t===Object.prototype||Array.isArray(e))}function ee(e,t=new Set){let r,n,s,i;if(r=e!=null&&e[bt])return r;if(!J(e)||t.has(e))return e;if(Array.isArray(e)){Object.isFrozen(e)?e=e.slice(0):t.add(e);for(let a=0,o=e.length;a<o;a++)s=e[a],(n=ee(s,t))!==s&&(e[a]=n)}else{Object.isFrozen(e)?e=Object.assign({},e):t.add(e);const a=Object.keys(e),o=Object.getOwnPropertyDescriptors(e);for(let l=0,u=a.length;l<u;l++)i=a[l],!o[i].get&&(s=e[i],(n=ee(s,t))!==s&&(e[i]=n))}return e}function ze(e,t){let r=e[t];return r||Object.defineProperty(e,t,{value:r=Object.create(null)}),r}function xe(e,t,r){if(e[t])return e[t];const[n,s]=Ft(r,{equals:!1,internal:!0});return n.$=s,e[t]=n}function fi(e,t){const r=Reflect.getOwnPropertyDescriptor(e,t);return!r||r.get||!r.configurable||t===Z||t===ue||(delete r.value,delete r.writable,r.get=()=>e[Z][t]),r}function Rr(e){Ze()&&xe(ze(e,ue),kr)()}function ci(e){return Rr(e),Reflect.ownKeys(e)}const hi={get(e,t,r){if(t===bt)return e;if(t===Z)return r;if(t===kt)return Rr(e),r;const n=ze(e,ue),s=n[t];let i=s?s():e[t];if(t===ue||t===I||t==="__proto__")return i;if(!s){const a=Object.getOwnPropertyDescriptor(e,t);Ze()&&(typeof i!="function"||e.hasOwnProperty(t))&&!(a&&a.get)&&(i=xe(n,t,i)())}return J(i)?Er(i):i},has(e,t){return t===bt||t===Z||t===kt||t===ue||t===I||t==="__proto__"?!0:(Ze()&&xe(ze(e,I),t)(),t in e)},set(){return!0},deleteProperty(){return!0},ownKeys:ci,getOwnPropertyDescriptor:fi};function R(e,t,r,n=!1){if(!n&&e[t]===r)return;const s=e[t],i=e.length;r===void 0?(delete e[t],e[I]&&e[I][t]&&s!==void 0&&e[I][t].$()):(e[t]=r,e[I]&&e[I][t]&&s===void 0&&e[I][t].$());let a=ze(e,ue),o;if((o=xe(a,t,s))&&o.$(()=>r),Array.isArray(e)&&e.length!==i){for(let l=e.length;l<i;l++)(o=a[l])&&o.$();(o=xe(a,"length",i))&&o.$(e.length)}(o=a[kr])&&o.$()}function Pr(e,t){const r=Object.keys(t);for(let n=0;n<r.length;n+=1){const s=r[n];R(e,s,t[s])}}function di(e,t){if(typeof t=="function"&&(t=t(e)),t=ee(t),Array.isArray(t)){if(e===t)return;let r=0,n=t.length;for(;r<n;r++){const s=t[r];e[r]!==s&&R(e,r,s)}R(e,"length",n)}else Pr(e,t)}function ve(e,t,r=[]){let n,s=e;if(t.length>1){n=t.shift();const a=typeof n,o=Array.isArray(e);if(Array.isArray(n)){for(let l=0;l<n.length;l++)ve(e,[n[l]].concat(t),r);return}else if(o&&a==="function"){for(let l=0;l<e.length;l++)n(e[l],l)&&ve(e,[l].concat(t),r);return}else if(o&&a==="object"){const{from:l=0,to:u=e.length-1,by:f=1}=n;for(let c=l;c<=u;c+=f)ve(e,[c].concat(t),r);return}else if(t.length>1){ve(e[n],t,[n].concat(r));return}s=e[n],r=[n].concat(r)}let i=t[0];typeof i=="function"&&(i=i(s,r),i===s)||n===void 0&&i==null||(i=ee(i),n===void 0||J(s)&&J(i)&&!Array.isArray(i)?Pr(s,i):R(e,n,i))}function pi(...[e,t]){const r=ee(e||{}),n=Array.isArray(r),s=Er(r);function i(...a){Wr(()=>{n&&a.length===1?di(r,a[0]):ve(r,a)})}return[s,i]}const vt=Symbol("store-root");function ie(e,t,r,n,s){const i=t[r];if(e===i)return;const a=Array.isArray(e);if(r!==vt&&(!J(e)||!J(i)||a!==Array.isArray(i)||s&&e[s]!==i[s])){R(t,r,e);return}if(a){if(e.length&&i.length&&(!n||s&&e[0]&&e[0][s]!=null)){let u,f,c,p,d,g,m,y;for(c=0,p=Math.min(i.length,e.length);c<p&&(i[c]===e[c]||s&&i[c]&&e[c]&&i[c][s]===e[c][s]);c++)ie(e[c],i,c,n,s);const j=new Array(e.length),E=new Map;for(p=i.length-1,d=e.length-1;p>=c&&d>=c&&(i[p]===e[d]||s&&i[c]&&e[c]&&i[p][s]===e[d][s]);p--,d--)j[d]=i[p];if(c>d||c>p){for(f=c;f<=d;f++)R(i,f,e[f]);for(;f<e.length;f++)R(i,f,j[f]),ie(e[f],i,f,n,s);i.length>e.length&&R(i,"length",e.length);return}for(m=new Array(d+1),f=d;f>=c;f--)g=e[f],y=s&&g?g[s]:g,u=E.get(y),m[f]=u===void 0?-1:u,E.set(y,f);for(u=c;u<=p;u++)g=i[u],y=s&&g?g[s]:g,f=E.get(y),f!==void 0&&f!==-1&&(j[f]=i[u],f=m[f],E.set(y,f));for(f=c;f<e.length;f++)f in j?(R(i,f,j[f]),ie(e[f],i,f,n,s)):R(i,f,e[f])}else for(let u=0,f=e.length;u<f;u++)ie(e[u],i,u,n,s);i.length>e.length&&R(i,"length",e.length);return}const o=Object.keys(e);for(let u=0,f=o.length;u<f;u++)ie(e[o[u]],i,o[u],n,s);const l=Object.keys(i);for(let u=0,f=l.length;u<f;u++)e[l[u]]===void 0&&R(i,l[u],void 0)}function gi(e,t={}){const{merge:r,key:n="id"}=t,s=ee(e);return i=>{if(!J(i)||!J(s))return s;const a=ie(s,{[vt]:i},vt,r,n);return a===void 0?i:a}}function mi(e){let t=e.get(),[r,n]=wi(t),s=e.subscribe(n);return Nr(()=>s()),r}function wi(e){let[t,r]=pi({value:e});return[()=>t.value,n=>{let s=ee(t.value);return typeof n=="function"&&(n=n(s)),r("value",gi(n)),t.value}]}function Oi(e,t){const r=mi(e),[n,s]=Ft(t);return Tr(()=>{s(r)}),Cr(()=>{s(r)}),n}export{Gt as _,$i as c,vi as s,Si as t,Oi as u,bi as y};
