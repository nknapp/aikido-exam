const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["_astro/YoutubePlayer.TsvKRx5r.js","_astro/web.DcA5ypnZ.js","_astro/index.browser.SB4vPn2U.js","_astro/CheckButton.By-aBsoP.js","_astro/stop.BBEMwMoj.js","_astro/delay.2S0BUUWF.js","_astro/_commonjsHelpers.C4iS2aBk.js","_astro/usePersistentStore.Bwib9tBI.js"])))=>i.map(i=>d[i]);
import{g as A,s as _r,a as me,t as C,z as Qr,e as T,i as h,c as v,b as ge,M as je,A as et,F as rt,B as tt,o as $r,y as pr,d as at,m as j,l as Le,f as Fe,C as nt,j as it,k as De,D as st}from"./web.DcA5ypnZ.js";import{t as y,u as ot,y as ct,_ as ut,c as Re}from"./usePersistentStore.Bwib9tBI.js";import{S as Ge,c as lt}from"./techniqueStore.DBI2WB0g.js";import{F as Y,I as ft,L as vt}from"./ForEntries.OwYpHtoU.js";import{C as Se}from"./CheckButton.By-aBsoP.js";import{n as dt,S as he}from"./index.browser.SB4vPn2U.js";import{c as K,a as br}from"./_commonjsHelpers.C4iS2aBk.js";var gt=C('<svg xmlns=http://www.w3.org/2000/svg width=24 height=24><path d="M10.59 9.17 5.41 4 4 5.41l5.17 5.17zM14.5 4l2.04 2.04L4 18.59 5.41 20 17.96 7.46 20 9.5V4zm.33 9.41-1.41 1.41 3.13 3.13L14.5 20H20v-5.5l-2.04 2.04z">');const ht=(e={})=>(()=>{var r=A(gt);return _r(r,e,!0,!0),me(),r})();var _t=C('<svg xmlns=http://www.w3.org/2000/svg width=24 height=24><path d="M9 13c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4m0-6c1.1 0 2 .9 2 2s-.9 2-2 2-2-.9-2-2 .9-2 2-2m0 8c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4m-6 4c.22-.72 3.31-2 6-2 2.7 0 5.8 1.29 6 2zM15.08 7.05c.84 1.18.84 2.71 0 3.89l1.68 1.69c2.02-2.02 2.02-5.07 0-7.27zM20.07 2l-1.63 1.63c2.77 3.02 2.77 7.56 0 10.74L20.07 16c3.9-3.89 3.91-9.95 0-14">');const $t=(e={})=>(()=>{var r=A(_t);return _r(r,e,!0,!0),me(),r})(),pt=["suwari waza","hanmi handachi waza","tachi waza","tanto dori","jo nage","jo dori","tachi dori"];function bt(e){const r={};for(const t of e)yt(r,t);return r}function yt(e,r){const t=oe(e,r.execution,ce),a=oe(t,r.attack,ce),n=oe(a,r.defence,ce);n[r.direction]=r.metadata}function oe(e,r,t){const a=e[r];if(a!=null)return a;const n=t();return e[r]=n,n}function ce(){return{}}var mt=C('<div><!$><!/><div class="mt-8 border-secondary border-t text-sm hidden print:block">'),St=C('<div><h2 class="border-b border-1 border-secondary break-after-avoid"></h2><div>'),At=C('<div class="grid grid-cols-3 mt-4 break-inside-avoid"><div></div><div class="col-span-2 md:flex flex-wrap">'),Ct=C("<div class=md:me-6><span></span>&nbsp;<!$><!/>"),Tt=C("<span><!$><!/><!$><!/>"),xt=C("<span class=print:hidden>");const wt=Qr(()=>ut(async()=>{const{YoutubePlayer:e}=await import("./YoutubePlayer.TsvKRx5r.js");return{YoutubePlayer:e}},__vite__mapDeps([0,1,2,3,4,5,6,7])).then(({YoutubePlayer:e})=>({default:e}))),Ot=e=>(()=>{var r=A(mt),t=r.firstChild,[a,n]=T(t.nextSibling),i=a.nextSibling;return h(r,v(Y,{get object(){return bt(e.techniques)},children:(s,o)=>(()=>{var c=A(St),u=c.firstChild,f=u.nextSibling;return h(u,s),h(f,v(Y,{object:o,children:(g,l)=>(()=>{var $=A(At),_=$.firstChild,p=_.nextSibling;return h(_,g),h(p,v(Y,{object:l,children:(m,S)=>(()=>{var b=A(Ct),E=b.firstChild,w=E.nextSibling,P=w.nextSibling,[ne,ie]=T(P.nextSibling);return h(E,m),h(b,v(Pt,{directions:S}),ne,ie),b})()})),$})()})),c})()}),a,n),h(i,()=>y("examChooser.created-by",{url:window.location.origin})),r})(),Pt=e=>{const r=ge(()=>Object.keys(e.directions)),t=ge(()=>r().length===1&&r()[0]===Ge);return v(et,{get children(){return[v(je,{get when(){return t()},get children(){return v(Ne,{get metadata(){return e.directions[Ge]}})}}),v(je,{get when(){return!t()},get children(){return v(Y,{get object(){return e.directions},separator:",",children:(a,n)=>(()=>{var i=A(Tt),s=i.firstChild,[o,c]=T(s.nextSibling),u=o.nextSibling,[f,g]=T(u.nextSibling);return h(i,a,o,c),h(i,v(Ne,{metadata:n}),f,g),i})()})}})]}})},Ne=e=>{const r=ot(ct,!1),t=e.metadata.youtube==null?[]:Array.isArray(e.metadata.youtube)?e.metadata.youtube:[e.metadata.youtube];return v(tt,{get when(){return r()},get children(){var a=A(xt);return h(a,v(rt,{each:t,children:n=>v(wt,{type:"icon",class:"inline mx-2",link:n})})),a}})},Et=e=>{function r(t,a){const n=new Set(e.value);a?n.add(t):n.delete(t),e.onChange(n)}return e.options.map(({id:t,label:a,wide:n})=>v(Se,{class:n?"col-span-2":"",get value(){return e.value.has(t)},label:a,onChange:i=>r(t,i)}))};function ue([e,r],{name:t,storage:a,serialize:n=JSON.stringify,deserialize:i=JSON.parse}){const s=a??localStorage,o=s.getItem(t);return setTimeout(()=>{o!=null&&r(i(o))}),$r(()=>{pr(()=>{s.setItem(t,n(e()))})}),[e,r]}var It=C('<div><header class="text-sm font-bold flex items-center pb-4 rounded gap-4"><div class="border-t border-secondary flex-1"></div><div class=""></div><div class="border-t flex-1 border-secondary"></div></header><div class="grid grid-cols-2 sm:grid-cols-4 md:grid-cols-4 gap-4 mb-4">');const le=e=>(()=>{var r=A(It),t=r.firstChild,a=t.firstChild,n=a.nextSibling,i=t.nextSibling;return h(n,()=>e.headerLabel),h(i,()=>e.children),r})(),Mt=e=>v(Se,{get label(){return y("examChooser.filters.kneeFriendly")},get value(){return e.value.kneeFriendly??!1},onChange:r=>e.onChange({kneeFriendly:r})});var jt=C("<div><input type=range min=1 max=100><label>");const Lt=e=>{function r(o,c){e.onChange({...e.value,[o]:c})}const t=dt(),[a,n]=j(!1),[i,s]=j(e.value.includePercent);return pr(()=>s(e.value.includePercent)),$r(()=>{n(!0)}),[v(Se,{get label(){return y("examChooser.order.randomize")},get value(){return e.value.randomize},onChange:o=>r("randomize",o)}),v(he,{color:"secondary",icon:ht,get label(){return y("examChooser.order.shuffle")},get disabled(){return!e.value.randomize},get onClick(){return e.onForceRefresh}}),(()=>{var o=A(jt),c=o.firstChild,u=c.nextSibling;return c.addEventListener("change",f=>r("includePercent",Number(f.target.value))),c.$$input=f=>s(Number(f.target.value)),Le(c,"id",t),Le(u,"for",t),h(u,()=>y("examChooser.order.includePercent",{percent:i()})),Fe(f=>{var g={"flex flex-col justify-center col-span-2 items-center transition-opacity duration-200":!0,"text-secondary-light":!e.value.randomize,"opacity-0":!a(),"opacity-100":a()},l=`w-2/3 ${a()?"opacity-100":"opacity-0"} accent-primary`,$=!a||!e.value.randomize;return f.e=nt(o,g,f.e),l!==f.t&&it(c,f.t=l),$!==f.a&&De(c,"disabled",f.a=$),f},{e:void 0,t:void 0,a:void 0}),Fe(()=>De(c,"value",i())),me(),o})()]};at(["input"]);function Ft(e){const r=[];for(const t of e)for(const[a,n]of q(t.techniques))for(const[i,s]of q(n))for(const[o,c]of q(s))for(const[u,f]of q(c))r.push({execution:a,attack:i,defence:o,direction:u,metadata:f});return r}const q=Object.entries,Dt={kneeFriendly:{filter:e=>e.execution!=="suwari waza"&&e.execution!=="hanmi handachi waza"}};function Rt(e){return r=>!e.kneeFriendly||Dt.kneeFriendly.filter(r)}function Gt(e,r){var t=-1,a=e.length;for(r||(r=Array(a));++t<a;)r[t]=e[t];return r}var Nt=Gt,zt=Math.floor,Bt=Math.random;function Ht(e,r){return e+zt(Bt()*(r-e+1))}var Kt=Ht,qt=Kt;function Ut(e,r){var t=-1,a=e.length,n=a-1;for(r=r===void 0?a:r;++t<r;){var i=qt(t,n),s=e[i];e[i]=e[t],e[t]=s}return e.length=r,e}var yr=Ut,kt=Nt,Yt=yr;function Jt(e){return Yt(kt(e))}var Wt=Jt;function Xt(e,r){for(var t=-1,a=e==null?0:e.length,n=Array(a);++t<a;)n[t]=r(e[t],t,e);return n}var mr=Xt,Vt=mr;function Zt(e,r){return Vt(r,function(t){return e[t]})}var Qt=Zt;function ea(e,r){for(var t=-1,a=Array(e);++t<e;)a[t]=r(t);return a}var ra=ea,ta=typeof K=="object"&&K&&K.Object===Object&&K,Sr=ta,aa=Sr,na=typeof self=="object"&&self&&self.Object===Object&&self,ia=aa||na||Function("return this")(),O=ia,sa=O,oa=sa.Symbol,V=oa,ze=V,Ar=Object.prototype,ca=Ar.hasOwnProperty,ua=Ar.toString,N=ze?ze.toStringTag:void 0;function la(e){var r=ca.call(e,N),t=e[N];try{e[N]=void 0;var a=!0}catch{}var n=ua.call(e);return a&&(r?e[N]=t:delete e[N]),n}var fa=la,va=Object.prototype,da=va.toString;function ga(e){return da.call(e)}var ha=ga,Be=V,_a=fa,$a=ha,pa="[object Null]",ba="[object Undefined]",He=Be?Be.toStringTag:void 0;function ya(e){return e==null?e===void 0?ba:pa:He&&He in Object(e)?_a(e):$a(e)}var z=ya;function ma(e){return e!=null&&typeof e=="object"}var B=ma,Sa=z,Aa=B,Ca="[object Arguments]";function Ta(e){return Aa(e)&&Sa(e)==Ca}var xa=Ta,Ke=xa,wa=B,Cr=Object.prototype,Oa=Cr.hasOwnProperty,Pa=Cr.propertyIsEnumerable,Ea=Ke(function(){return arguments}())?Ke:function(e){return wa(e)&&Oa.call(e,"callee")&&!Pa.call(e,"callee")},Tr=Ea,Ia=Array.isArray,x=Ia,J={exports:{}};function Ma(){return!1}var ja=Ma;J.exports;(function(e,r){var t=O,a=ja,n=r&&!r.nodeType&&r,i=n&&!0&&e&&!e.nodeType&&e,s=i&&i.exports===n,o=s?t.Buffer:void 0,c=o?o.isBuffer:void 0,u=c||a;e.exports=u})(J,J.exports);var xr=J.exports,La=9007199254740991,Fa=/^(?:0|[1-9]\d*)$/;function Da(e,r){var t=typeof e;return r=r??La,!!r&&(t=="number"||t!="symbol"&&Fa.test(e))&&e>-1&&e%1==0&&e<r}var wr=Da,Ra=9007199254740991;function Ga(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=Ra}var Ae=Ga,Na=z,za=Ae,Ba=B,Ha="[object Arguments]",Ka="[object Array]",qa="[object Boolean]",Ua="[object Date]",ka="[object Error]",Ya="[object Function]",Ja="[object Map]",Wa="[object Number]",Xa="[object Object]",Va="[object RegExp]",Za="[object Set]",Qa="[object String]",en="[object WeakMap]",rn="[object ArrayBuffer]",tn="[object DataView]",an="[object Float32Array]",nn="[object Float64Array]",sn="[object Int8Array]",on="[object Int16Array]",cn="[object Int32Array]",un="[object Uint8Array]",ln="[object Uint8ClampedArray]",fn="[object Uint16Array]",vn="[object Uint32Array]",d={};d[an]=d[nn]=d[sn]=d[on]=d[cn]=d[un]=d[ln]=d[fn]=d[vn]=!0;d[Ha]=d[Ka]=d[rn]=d[qa]=d[tn]=d[Ua]=d[ka]=d[Ya]=d[Ja]=d[Wa]=d[Xa]=d[Va]=d[Za]=d[Qa]=d[en]=!1;function dn(e){return Ba(e)&&za(e.length)&&!!d[Na(e)]}var gn=dn;function hn(e){return function(r){return e(r)}}var _n=hn,W={exports:{}};W.exports;(function(e,r){var t=Sr,a=r&&!r.nodeType&&r,n=a&&!0&&e&&!e.nodeType&&e,i=n&&n.exports===a,s=i&&t.process,o=function(){try{var c=n&&n.require&&n.require("util").types;return c||s&&s.binding&&s.binding("util")}catch{}}();e.exports=o})(W,W.exports);var $n=W.exports,pn=gn,bn=_n,qe=$n,Ue=qe&&qe.isTypedArray,yn=Ue?bn(Ue):pn,Or=yn,mn=ra,Sn=Tr,An=x,Cn=xr,Tn=wr,xn=Or,wn=Object.prototype,On=wn.hasOwnProperty;function Pn(e,r){var t=An(e),a=!t&&Sn(e),n=!t&&!a&&Cn(e),i=!t&&!a&&!n&&xn(e),s=t||a||n||i,o=s?mn(e.length,String):[],c=o.length;for(var u in e)(r||On.call(e,u))&&!(s&&(u=="length"||n&&(u=="offset"||u=="parent")||i&&(u=="buffer"||u=="byteLength"||u=="byteOffset")||Tn(u,c)))&&o.push(u);return o}var En=Pn,In=Object.prototype;function Mn(e){var r=e&&e.constructor,t=typeof r=="function"&&r.prototype||In;return e===t}var jn=Mn;function Ln(e,r){return function(t){return e(r(t))}}var Fn=Ln,Dn=Fn,Rn=Dn(Object.keys,Object),Gn=Rn,Nn=jn,zn=Gn,Bn=Object.prototype,Hn=Bn.hasOwnProperty;function Kn(e){if(!Nn(e))return zn(e);var r=[];for(var t in Object(e))Hn.call(e,t)&&t!="constructor"&&r.push(t);return r}var qn=Kn;function Un(e){var r=typeof e;return e!=null&&(r=="object"||r=="function")}var Ce=Un,kn=z,Yn=Ce,Jn="[object AsyncFunction]",Wn="[object Function]",Xn="[object GeneratorFunction]",Vn="[object Proxy]";function Zn(e){if(!Yn(e))return!1;var r=kn(e);return r==Wn||r==Xn||r==Jn||r==Vn}var Pr=Zn,Qn=Pr,ei=Ae;function ri(e){return e!=null&&ei(e.length)&&!Qn(e)}var Er=ri,ti=En,ai=qn,ni=Er;function ii(e){return ni(e)?ti(e):ai(e)}var Z=ii,si=Qt,oi=Z;function ci(e){return e==null?[]:si(e,oi(e))}var ui=ci,li=yr,fi=ui;function vi(e){return li(fi(e))}var di=vi,gi=Wt,hi=di,_i=x;function $i(e){var r=_i(e)?gi:hi;return r(e)}var pi=$i;const bi=br(pi);function yi(e){return bi(e)}function mi(e,{includePercent:r=100}={}){const t=yi(e),a=Math.ceil(r*e.length/100);return t.slice(0,a)}var Si=O,Ai=Si["__core-js_shared__"],Ci=Ai,fe=Ci,ke=function(){var e=/[^.]+$/.exec(fe&&fe.keys&&fe.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();function Ti(e){return!!ke&&ke in e}var xi=Ti,wi=Function.prototype,Oi=wi.toString;function Pi(e){if(e!=null){try{return Oi.call(e)}catch{}try{return e+""}catch{}}return""}var Ir=Pi,Ei=Pr,Ii=xi,Mi=Ce,ji=Ir,Li=/[\\^$.*+?()[\]{}|]/g,Fi=/^\[object .+?Constructor\]$/,Di=Function.prototype,Ri=Object.prototype,Gi=Di.toString,Ni=Ri.hasOwnProperty,zi=RegExp("^"+Gi.call(Ni).replace(Li,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function Bi(e){if(!Mi(e)||Ii(e))return!1;var r=Ei(e)?zi:Fi;return r.test(ji(e))}var Hi=Bi;function Ki(e,r){return e?.[r]}var qi=Ki,Ui=Hi,ki=qi;function Yi(e,r){var t=ki(e,r);return Ui(t)?t:void 0}var M=Yi,Ji=M,Wi=function(){try{var e=Ji(Object,"defineProperty");return e({},"",{}),e}catch{}}(),Xi=Wi,Ye=Xi;function Vi(e,r,t){r=="__proto__"&&Ye?Ye(e,r,{configurable:!0,enumerable:!0,value:t,writable:!0}):e[r]=t}var Zi=Vi;function Qi(e,r,t,a){for(var n=-1,i=e==null?0:e.length;++n<i;){var s=e[n];r(a,s,t(s),e)}return a}var es=Qi;function rs(e){return function(r,t,a){for(var n=-1,i=Object(r),s=a(r),o=s.length;o--;){var c=s[e?o:++n];if(t(i[c],c,i)===!1)break}return r}}var ts=rs,as=ts,ns=as(),is=ns,ss=is,os=Z;function cs(e,r){return e&&ss(e,r,os)}var us=cs,ls=Er;function fs(e,r){return function(t,a){if(t==null)return t;if(!ls(t))return e(t,a);for(var n=t.length,i=r?n:-1,s=Object(t);(r?i--:++i<n)&&a(s[i],i,s)!==!1;);return t}}var vs=fs,ds=us,gs=vs,hs=gs(ds),_s=hs,$s=_s;function ps(e,r,t,a){return $s(e,function(n,i,s){r(a,n,t(n),s)}),a}var bs=ps;function ys(){this.__data__=[],this.size=0}var ms=ys;function Ss(e,r){return e===r||e!==e&&r!==r}var Mr=Ss,As=Mr;function Cs(e,r){for(var t=e.length;t--;)if(As(e[t][0],r))return t;return-1}var Q=Cs,Ts=Q,xs=Array.prototype,ws=xs.splice;function Os(e){var r=this.__data__,t=Ts(r,e);if(t<0)return!1;var a=r.length-1;return t==a?r.pop():ws.call(r,t,1),--this.size,!0}var Ps=Os,Es=Q;function Is(e){var r=this.__data__,t=Es(r,e);return t<0?void 0:r[t][1]}var Ms=Is,js=Q;function Ls(e){return js(this.__data__,e)>-1}var Fs=Ls,Ds=Q;function Rs(e,r){var t=this.__data__,a=Ds(t,e);return a<0?(++this.size,t.push([e,r])):t[a][1]=r,this}var Gs=Rs,Ns=ms,zs=Ps,Bs=Ms,Hs=Fs,Ks=Gs;function L(e){var r=-1,t=e==null?0:e.length;for(this.clear();++r<t;){var a=e[r];this.set(a[0],a[1])}}L.prototype.clear=Ns;L.prototype.delete=zs;L.prototype.get=Bs;L.prototype.has=Hs;L.prototype.set=Ks;var ee=L,qs=ee;function Us(){this.__data__=new qs,this.size=0}var ks=Us;function Ys(e){var r=this.__data__,t=r.delete(e);return this.size=r.size,t}var Js=Ys;function Ws(e){return this.__data__.get(e)}var Xs=Ws;function Vs(e){return this.__data__.has(e)}var Zs=Vs,Qs=M,eo=O,ro=Qs(eo,"Map"),Te=ro,to=M,ao=to(Object,"create"),re=ao,Je=re;function no(){this.__data__=Je?Je(null):{},this.size=0}var io=no;function so(e){var r=this.has(e)&&delete this.__data__[e];return this.size-=r?1:0,r}var oo=so,co=re,uo="__lodash_hash_undefined__",lo=Object.prototype,fo=lo.hasOwnProperty;function vo(e){var r=this.__data__;if(co){var t=r[e];return t===uo?void 0:t}return fo.call(r,e)?r[e]:void 0}var go=vo,ho=re,_o=Object.prototype,$o=_o.hasOwnProperty;function po(e){var r=this.__data__;return ho?r[e]!==void 0:$o.call(r,e)}var bo=po,yo=re,mo="__lodash_hash_undefined__";function So(e,r){var t=this.__data__;return this.size+=this.has(e)?0:1,t[e]=yo&&r===void 0?mo:r,this}var Ao=So,Co=io,To=oo,xo=go,wo=bo,Oo=Ao;function F(e){var r=-1,t=e==null?0:e.length;for(this.clear();++r<t;){var a=e[r];this.set(a[0],a[1])}}F.prototype.clear=Co;F.prototype.delete=To;F.prototype.get=xo;F.prototype.has=wo;F.prototype.set=Oo;var Po=F,We=Po,Eo=ee,Io=Te;function Mo(){this.size=0,this.__data__={hash:new We,map:new(Io||Eo),string:new We}}var jo=Mo;function Lo(e){var r=typeof e;return r=="string"||r=="number"||r=="symbol"||r=="boolean"?e!=="__proto__":e===null}var Fo=Lo,Do=Fo;function Ro(e,r){var t=e.__data__;return Do(r)?t[typeof r=="string"?"string":"hash"]:t.map}var te=Ro,Go=te;function No(e){var r=Go(this,e).delete(e);return this.size-=r?1:0,r}var zo=No,Bo=te;function Ho(e){return Bo(this,e).get(e)}var Ko=Ho,qo=te;function Uo(e){return qo(this,e).has(e)}var ko=Uo,Yo=te;function Jo(e,r){var t=Yo(this,e),a=t.size;return t.set(e,r),this.size+=t.size==a?0:1,this}var Wo=Jo,Xo=jo,Vo=zo,Zo=Ko,Qo=ko,ec=Wo;function D(e){var r=-1,t=e==null?0:e.length;for(this.clear();++r<t;){var a=e[r];this.set(a[0],a[1])}}D.prototype.clear=Xo;D.prototype.delete=Vo;D.prototype.get=Zo;D.prototype.has=Qo;D.prototype.set=ec;var xe=D,rc=ee,tc=Te,ac=xe,nc=200;function ic(e,r){var t=this.__data__;if(t instanceof rc){var a=t.__data__;if(!tc||a.length<nc-1)return a.push([e,r]),this.size=++t.size,this;t=this.__data__=new ac(a)}return t.set(e,r),this.size=t.size,this}var sc=ic,oc=ee,cc=ks,uc=Js,lc=Xs,fc=Zs,vc=sc;function R(e){var r=this.__data__=new oc(e);this.size=r.size}R.prototype.clear=cc;R.prototype.delete=uc;R.prototype.get=lc;R.prototype.has=fc;R.prototype.set=vc;var jr=R,dc="__lodash_hash_undefined__";function gc(e){return this.__data__.set(e,dc),this}var hc=gc;function _c(e){return this.__data__.has(e)}var $c=_c,pc=xe,bc=hc,yc=$c;function X(e){var r=-1,t=e==null?0:e.length;for(this.__data__=new pc;++r<t;)this.add(e[r])}X.prototype.add=X.prototype.push=bc;X.prototype.has=yc;var mc=X;function Sc(e,r){for(var t=-1,a=e==null?0:e.length;++t<a;)if(r(e[t],t,e))return!0;return!1}var Ac=Sc;function Cc(e,r){return e.has(r)}var Tc=Cc,xc=mc,wc=Ac,Oc=Tc,Pc=1,Ec=2;function Ic(e,r,t,a,n,i){var s=t&Pc,o=e.length,c=r.length;if(o!=c&&!(s&&c>o))return!1;var u=i.get(e),f=i.get(r);if(u&&f)return u==r&&f==e;var g=-1,l=!0,$=t&Ec?new xc:void 0;for(i.set(e,r),i.set(r,e);++g<o;){var _=e[g],p=r[g];if(a)var m=s?a(p,_,g,r,e,i):a(_,p,g,e,r,i);if(m!==void 0){if(m)continue;l=!1;break}if($){if(!wc(r,function(S,b){if(!Oc($,b)&&(_===S||n(_,S,t,a,i)))return $.push(b)})){l=!1;break}}else if(!(_===p||n(_,p,t,a,i))){l=!1;break}}return i.delete(e),i.delete(r),l}var Lr=Ic,Mc=O,jc=Mc.Uint8Array,Lc=jc;function Fc(e){var r=-1,t=Array(e.size);return e.forEach(function(a,n){t[++r]=[n,a]}),t}var Dc=Fc;function Rc(e){var r=-1,t=Array(e.size);return e.forEach(function(a){t[++r]=a}),t}var Gc=Rc,Xe=V,Ve=Lc,Nc=Mr,zc=Lr,Bc=Dc,Hc=Gc,Kc=1,qc=2,Uc="[object Boolean]",kc="[object Date]",Yc="[object Error]",Jc="[object Map]",Wc="[object Number]",Xc="[object RegExp]",Vc="[object Set]",Zc="[object String]",Qc="[object Symbol]",eu="[object ArrayBuffer]",ru="[object DataView]",Ze=Xe?Xe.prototype:void 0,ve=Ze?Ze.valueOf:void 0;function tu(e,r,t,a,n,i,s){switch(t){case ru:if(e.byteLength!=r.byteLength||e.byteOffset!=r.byteOffset)return!1;e=e.buffer,r=r.buffer;case eu:return!(e.byteLength!=r.byteLength||!i(new Ve(e),new Ve(r)));case Uc:case kc:case Wc:return Nc(+e,+r);case Yc:return e.name==r.name&&e.message==r.message;case Xc:case Zc:return e==r+"";case Jc:var o=Bc;case Vc:var c=a&Kc;if(o||(o=Hc),e.size!=r.size&&!c)return!1;var u=s.get(e);if(u)return u==r;a|=qc,s.set(e,r);var f=zc(o(e),o(r),a,n,i,s);return s.delete(e),f;case Qc:if(ve)return ve.call(e)==ve.call(r)}return!1}var au=tu;function nu(e,r){for(var t=-1,a=r.length,n=e.length;++t<a;)e[n+t]=r[t];return e}var iu=nu,su=iu,ou=x;function cu(e,r,t){var a=r(e);return ou(e)?a:su(a,t(e))}var uu=cu;function lu(e,r){for(var t=-1,a=e==null?0:e.length,n=0,i=[];++t<a;){var s=e[t];r(s,t,e)&&(i[n++]=s)}return i}var fu=lu;function vu(){return[]}var du=vu,gu=fu,hu=du,_u=Object.prototype,$u=_u.propertyIsEnumerable,Qe=Object.getOwnPropertySymbols,pu=Qe?function(e){return e==null?[]:(e=Object(e),gu(Qe(e),function(r){return $u.call(e,r)}))}:hu,bu=pu,yu=uu,mu=bu,Su=Z;function Au(e){return yu(e,Su,mu)}var Cu=Au,er=Cu,Tu=1,xu=Object.prototype,wu=xu.hasOwnProperty;function Ou(e,r,t,a,n,i){var s=t&Tu,o=er(e),c=o.length,u=er(r),f=u.length;if(c!=f&&!s)return!1;for(var g=c;g--;){var l=o[g];if(!(s?l in r:wu.call(r,l)))return!1}var $=i.get(e),_=i.get(r);if($&&_)return $==r&&_==e;var p=!0;i.set(e,r),i.set(r,e);for(var m=s;++g<c;){l=o[g];var S=e[l],b=r[l];if(a)var E=s?a(b,S,l,r,e,i):a(S,b,l,e,r,i);if(!(E===void 0?S===b||n(S,b,t,a,i):E)){p=!1;break}m||(m=l=="constructor")}if(p&&!m){var w=e.constructor,P=r.constructor;w!=P&&"constructor"in e&&"constructor"in r&&!(typeof w=="function"&&w instanceof w&&typeof P=="function"&&P instanceof P)&&(p=!1)}return i.delete(e),i.delete(r),p}var Pu=Ou,Eu=M,Iu=O,Mu=Eu(Iu,"DataView"),ju=Mu,Lu=M,Fu=O,Du=Lu(Fu,"Promise"),Ru=Du,Gu=M,Nu=O,zu=Gu(Nu,"Set"),Bu=zu,Hu=M,Ku=O,qu=Hu(Ku,"WeakMap"),Uu=qu,_e=ju,$e=Te,pe=Ru,be=Bu,ye=Uu,Fr=z,G=Ir,rr="[object Map]",ku="[object Object]",tr="[object Promise]",ar="[object Set]",nr="[object WeakMap]",ir="[object DataView]",Yu=G(_e),Ju=G($e),Wu=G(pe),Xu=G(be),Vu=G(ye),I=Fr;(_e&&I(new _e(new ArrayBuffer(1)))!=ir||$e&&I(new $e)!=rr||pe&&I(pe.resolve())!=tr||be&&I(new be)!=ar||ye&&I(new ye)!=nr)&&(I=function(e){var r=Fr(e),t=r==ku?e.constructor:void 0,a=t?G(t):"";if(a)switch(a){case Yu:return ir;case Ju:return rr;case Wu:return tr;case Xu:return ar;case Vu:return nr}return r});var Zu=I,de=jr,Qu=Lr,el=au,rl=Pu,sr=Zu,or=x,cr=xr,tl=Or,al=1,ur="[object Arguments]",lr="[object Array]",U="[object Object]",nl=Object.prototype,fr=nl.hasOwnProperty;function il(e,r,t,a,n,i){var s=or(e),o=or(r),c=s?lr:sr(e),u=o?lr:sr(r);c=c==ur?U:c,u=u==ur?U:u;var f=c==U,g=u==U,l=c==u;if(l&&cr(e)){if(!cr(r))return!1;s=!0,f=!1}if(l&&!f)return i||(i=new de),s||tl(e)?Qu(e,r,t,a,n,i):el(e,r,c,t,a,n,i);if(!(t&al)){var $=f&&fr.call(e,"__wrapped__"),_=g&&fr.call(r,"__wrapped__");if($||_){var p=$?e.value():e,m=_?r.value():r;return i||(i=new de),n(p,m,t,a,i)}}return l?(i||(i=new de),rl(e,r,t,a,n,i)):!1}var sl=il,ol=sl,vr=B;function Dr(e,r,t,a,n){return e===r?!0:e==null||r==null||!vr(e)&&!vr(r)?e!==e&&r!==r:ol(e,r,t,a,Dr,n)}var Rr=Dr,cl=jr,ul=Rr,ll=1,fl=2;function vl(e,r,t,a){var n=t.length,i=n,s=!a;if(e==null)return!i;for(e=Object(e);n--;){var o=t[n];if(s&&o[2]?o[1]!==e[o[0]]:!(o[0]in e))return!1}for(;++n<i;){o=t[n];var c=o[0],u=e[c],f=o[1];if(s&&o[2]){if(u===void 0&&!(c in e))return!1}else{var g=new cl;if(a)var l=a(u,f,c,e,r,g);if(!(l===void 0?ul(f,u,ll|fl,a,g):l))return!1}}return!0}var dl=vl,gl=Ce;function hl(e){return e===e&&!gl(e)}var Gr=hl,_l=Gr,$l=Z;function pl(e){for(var r=$l(e),t=r.length;t--;){var a=r[t],n=e[a];r[t]=[a,n,_l(n)]}return r}var bl=pl;function yl(e,r){return function(t){return t==null?!1:t[e]===r&&(r!==void 0||e in Object(t))}}var Nr=yl,ml=dl,Sl=bl,Al=Nr;function Cl(e){var r=Sl(e);return r.length==1&&r[0][2]?Al(r[0][0],r[0][1]):function(t){return t===e||ml(t,e,r)}}var Tl=Cl,xl=z,wl=B,Ol="[object Symbol]";function Pl(e){return typeof e=="symbol"||wl(e)&&xl(e)==Ol}var we=Pl,El=x,Il=we,Ml=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,jl=/^\w*$/;function Ll(e,r){if(El(e))return!1;var t=typeof e;return t=="number"||t=="symbol"||t=="boolean"||e==null||Il(e)?!0:jl.test(e)||!Ml.test(e)||r!=null&&e in Object(r)}var Oe=Ll,zr=xe,Fl="Expected a function";function Pe(e,r){if(typeof e!="function"||r!=null&&typeof r!="function")throw new TypeError(Fl);var t=function(){var a=arguments,n=r?r.apply(this,a):a[0],i=t.cache;if(i.has(n))return i.get(n);var s=e.apply(this,a);return t.cache=i.set(n,s)||i,s};return t.cache=new(Pe.Cache||zr),t}Pe.Cache=zr;var Dl=Pe,Rl=Dl,Gl=500;function Nl(e){var r=Rl(e,function(a){return t.size===Gl&&t.clear(),a}),t=r.cache;return r}var zl=Nl,Bl=zl,Hl=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Kl=/\\(\\)?/g,ql=Bl(function(e){var r=[];return e.charCodeAt(0)===46&&r.push(""),e.replace(Hl,function(t,a,n,i){r.push(n?i.replace(Kl,"$1"):a||t)}),r}),Ul=ql,dr=V,kl=mr,Yl=x,Jl=we,Wl=1/0,gr=dr?dr.prototype:void 0,hr=gr?gr.toString:void 0;function Br(e){if(typeof e=="string")return e;if(Yl(e))return kl(e,Br)+"";if(Jl(e))return hr?hr.call(e):"";var r=e+"";return r=="0"&&1/e==-Wl?"-0":r}var Xl=Br,Vl=Xl;function Zl(e){return e==null?"":Vl(e)}var Ql=Zl,ef=x,rf=Oe,tf=Ul,af=Ql;function nf(e,r){return ef(e)?e:rf(e,r)?[e]:tf(af(e))}var Hr=nf,sf=we,of=1/0;function cf(e){if(typeof e=="string"||sf(e))return e;var r=e+"";return r=="0"&&1/e==-of?"-0":r}var ae=cf,uf=Hr,lf=ae;function ff(e,r){r=uf(r,e);for(var t=0,a=r.length;e!=null&&t<a;)e=e[lf(r[t++])];return t&&t==a?e:void 0}var Kr=ff,vf=Kr;function df(e,r,t){var a=e==null?void 0:vf(e,r);return a===void 0?t:a}var gf=df;function hf(e,r){return e!=null&&r in Object(e)}var _f=hf,$f=Hr,pf=Tr,bf=x,yf=wr,mf=Ae,Sf=ae;function Af(e,r,t){r=$f(r,e);for(var a=-1,n=r.length,i=!1;++a<n;){var s=Sf(r[a]);if(!(i=e!=null&&t(e,s)))break;e=e[s]}return i||++a!=n?i:(n=e==null?0:e.length,!!n&&mf(n)&&yf(s,n)&&(bf(e)||pf(e)))}var Cf=Af,Tf=_f,xf=Cf;function wf(e,r){return e!=null&&xf(e,r,Tf)}var Of=wf,Pf=Rr,Ef=gf,If=Of,Mf=Oe,jf=Gr,Lf=Nr,Ff=ae,Df=1,Rf=2;function Gf(e,r){return Mf(e)&&jf(r)?Lf(Ff(e),r):function(t){var a=Ef(t,e);return a===void 0&&a===r?If(t,e):Pf(r,a,Df|Rf)}}var Nf=Gf;function zf(e){return e}var Bf=zf;function Hf(e){return function(r){return r?.[e]}}var Kf=Hf,qf=Kr;function Uf(e){return function(r){return qf(r,e)}}var kf=Uf,Yf=Kf,Jf=kf,Wf=Oe,Xf=ae;function Vf(e){return Wf(e)?Yf(Xf(e)):Jf(e)}var Zf=Vf,Qf=Tl,ev=Nf,rv=Bf,tv=x,av=Zf;function nv(e){return typeof e=="function"?e:e==null?rv:typeof e=="object"?tv(e)?ev(e[0],e[1]):Qf(e):av(e)}var iv=nv,sv=es,ov=bs,cv=iv,uv=x;function lv(e,r){return function(t,a){var n=uv(t)?sv:ov,i=r?r():{};return n(t,e,cv(a),i)}}var fv=lv,vv=Zi,dv=fv,gv=Object.prototype,hv=gv.hasOwnProperty,_v=dv(function(e,r,t){hv.call(e,t)?e[t].push(r):vv(e,t,[r])}),$v=_v;const pv=br($v);function bv(e,{orderExecutions:r=!1}={}){return k(e,"execution",r?pt:null,a=>k(a,"attack",null,n=>k(n,"defence",null,i=>k(i,"direction",null,s=>s))))}function k(e,r,t,a){const n=yv(e,r);return t!=null?t.flatMap(i=>a(n[i]??[])):Object.values(n).flatMap(a)}function yv(e,r){return pv(e,r)}function mv(e,r){const t=r.selectedExams??new Set,a=r.filters??{},n=r.order?.randomize??!1,i=r.order?.includePercent??100,s=r.order?.orderExecutions??!1;let o=Ft(e.filter(c=>t.has(c.id)));return o=o.filter(Rt(a)),n&&(o=mi(o,{includePercent:i})),bv(o,{orderExecutions:s})}var Sv=C("<div><!$><!/><!$><!/><!$><!/><div>"),Av=C('<div class=my-10><div class="flex justify-end gap-4 sticky top-0 py-2 bg-white"><!$><!/><!$><!/></div><!$><!/><div class="flex items-center justify-end mt-16 gap-4"><span></span><span>');const Mv=e=>{const[r,t]=ue(j(new Set),{name:"examSelection:"+e.dojo.info.id,storage:sessionStorage,serialize:l=>JSON.stringify(Array.from(l)),deserialize:l=>new Set(JSON.parse(l))}),[a,n]=ue(j({kneeFriendly:!1}),{name:"techniqueFilters:"+e.dojo.info.id,storage:sessionStorage}),[i,s]=ue(j({randomize:!0,includePercent:80}),{name:"orderOptions:"+e.dojo.info.id,storage:sessionStorage}),[o,c]=j(!1);function u(){c(l=>!l)}const f=st(()=>(o(),mv(e.dojo.details.exams,{order:{...i(),orderExecutions:!0},selectedExams:r(),filters:a()}))),g=async()=>{const{save:l}=lt(e.dojo.info.id);await l(f()),document.location.href=Re(`/${e.dojo.info.id}/reader`)};return(()=>{var l=A(Sv),$=l.firstChild,[_,p]=T($.nextSibling),m=_.nextSibling,[S,b]=T(m.nextSibling),E=S.nextSibling,[w,P]=T(E.nextSibling),ne=w.nextSibling;return h(l,v(le,{get headerLabel(){return y("examChooser.exams.header")},get children(){return v(Et,{get options(){return Cv(e.dojo.details.exams)},get value(){return r()},onChange:t})}}),_,p),h(l,v(le,{get headerLabel(){return y("examChooser.filters.header")},get children(){return v(Mt,{get value(){return a()},onChange:n})}}),S,b),h(l,v(le,{get headerLabel(){return y("examChooser.order.header")},get children(){return v(Lt,{get value(){return i()},onChange:s,onForceRefresh:u})}}),w,P),h(ne,(()=>{var ie=ge(()=>r().size>0);return()=>ie()&&(()=>{var se=A(Av),H=se.firstChild,qr=H.firstChild,[Ee,Ur]=T(qr.nextSibling),kr=Ee.nextSibling,[Yr,Jr]=T(kr.nextSibling),Wr=H.nextSibling,[Ie,Xr]=T(Wr.nextSibling),Vr=Ie.nextSibling,Me=Vr.firstChild,Zr=Me.nextSibling;return h(H,v(he,{size:"small",color:"primary",icon:$t,get label(){return y("examChooser.read")},onClick:g}),Ee,Ur),h(H,v(he,{size:"small",color:"secondary",icon:ft,get label(){return y("examChooser.print")},onClick:()=>window.print()}),Yr,Jr),h(se,v(Ot,{get techniques(){return f()}}),Ie,Xr),h(Me,()=>y("donations.question")),h(Zr,v(vt,{size:"small",get label(){return y("donations.action")},get href(){return Re("/donations")}})),se})()})()),l})()};function Cv(e){return e.map(r=>({id:r.id,label:y(r.labelKey)}))}export{Mv as TechniqueChooser};
