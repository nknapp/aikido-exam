import{a as d,g as u,u as f,d as m,e as y,t as g}from"./web.NLfK1fEF.js";import{c as p,n as w}from"./index.browser.RXWNMTvc.js";var v=g('<div><div class="bg-primary h-full w-0">');const D=e=>{const[t,a]=d();async function o(r,n){const s=t();if(s==null)return;const l=s.animate([{width:"0%"},{width:"100%"}],{fill:"forwards",easing:"linear",duration:r*1e3}),c=()=>{l.cancel()};n.addEventListener("abort",c);try{await l.finished}catch{}n.removeEventListener("abort",c)}return e.setDelayControl({animateDelay:o}),(()=>{var r=u(v),n=r.firstChild;return f(a,n),m(()=>y(r,p("w-full h-1",e.disabled?"bg-secondary-lightest":"bg-primary-lightest"))),r})()};function h(){let e=null,t=null;const a=new Promise((o,r)=>{e=o,t=r});return a.id="pwr--"+w(4),{promise:a,resolve:e,reject:t}}function b(e){const t=new ArrayBuffer(e.byteLength);return new Uint8Array(t).set(new Uint8Array(e)),t}const L=async(e,t={})=>{const a=E(),{resolve:o,promise:r}=h(),n=a.createBufferSource(),s=b(e);if(n.buffer=await a.decodeAudioData(s),n.connect(a.destination),!t.abortSignal?.aborted)return t.abortSignal?.addEventListener("abort",()=>n.stop()),n.start(),n.addEventListener("ended",()=>o()),r};let i=null;function E(){return i==null&&(i=new AudioContext),i}export{D,L as p};
