import{g as S,p as dr,r as pe,t as A,b as x,i as h,e as v,f as fe,M as Ee,x as Xr,F as Zr,A as Vr,n as hr,a as gr,d as Qr,c as j,s as Ie,h as Me,B as et,j as rt,k as je,C as tt}from"./web.Br_rKyYi.js";import{t as m,u as at,c as Le,a as nt}from"./usePersistentStore.DdLkRqUq.js";import{S as Fe,Y as it,c as st}from"./techniqueStore.CSjhOBIq.js";import{F as U,I as ot,L as lt}from"./ForEntries.BMxJUXfd.js";import{a as ut,c as ct}from"./resolveExamTables.B3h32TL0.js";import{y as ft}from"./preload-helper.DyxLmbb3.js";import{C as be}from"./CheckButton.D0xn-TjG.js";import{n as vt}from"./index.browser.DP16PUbO.js";import{S as ve}from"./SimpleButton.BZcaYVZn.js";import{c as K,a as $r}from"./_commonjsHelpers.C4iS2aBk.js";import"./isReady.BL8lxnTB.js";import"./adapter.D3DoqAO4.js";var dt=A('<svg xmlns=http://www.w3.org/2000/svg width=24 height=24><path d="M10.59 9.17 5.41 4 4 5.41l5.17 5.17zM14.5 4l2.04 2.04L4 18.59 5.41 20 17.96 7.46 20 9.5V4zm.33 9.41-1.41 1.41 3.13 3.13L14.5 20H20v-5.5l-2.04 2.04z">');const ht=(e={})=>(()=>{var r=S(dt);return dr(r,e,!0,!0),pe(),r})();var gt=A('<svg xmlns=http://www.w3.org/2000/svg width=24 height=24><path d="M9 13c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4m0-6c1.1 0 2 .9 2 2s-.9 2-2 2-2-.9-2-2 .9-2 2-2m0 8c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4m-6 4c.22-.72 3.31-2 6-2 2.7 0 5.8 1.29 6 2zM15.08 7.05c.84 1.18.84 2.71 0 3.89l1.68 1.69c2.02-2.02 2.02-5.07 0-7.27zM20.07 2l-1.63 1.63c2.77 3.02 2.77 7.56 0 10.74L20.07 16c3.9-3.89 3.91-9.95 0-14">');const $t=(e={})=>(()=>{var r=S(gt);return dr(r,e,!0,!0),pe(),r})(),_t=["suwari waza","hanmi handachi waza","tachi waza","tanto dori","jo nage","jo dori","tachi dori"];var pt=A('<div><!$><!/><div class="mt-8 border-secondary border-t text-sm hidden print:block">'),bt=A('<div><h2 class="border-b border-1 border-secondary break-after-avoid"></h2><div>'),yt=A('<div class="grid grid-cols-3 mt-4 break-inside-avoid"><div></div><div class="col-span-2 md:flex flex-wrap">'),mt=A("<div class=md:me-6><span></span>&nbsp;<!$><!/>"),St=A("<span class=text-sm>(<!$><!/>)"),At=A("<span><!$><!/><!$><!/>"),Ct=A("<span class=print:hidden>");const xt=e=>(()=>{var r=S(pt),t=r.firstChild,[a,n]=x(t.nextSibling),i=a.nextSibling;return h(r,v(U,{get object(){return ut(e.techniques)},children:(s,o)=>(()=>{var l=S(bt),c=l.firstChild,f=c.nextSibling;return h(c,s),h(f,v(U,{object:o,children:(g,u)=>(()=>{var _=S(yt),$=_.firstChild,p=$.nextSibling;return h($,g),h(p,v(U,{object:u,children:(b,C)=>(()=>{var y=S(mt),E=y.firstChild,w=E.nextSibling,P=w.nextSibling,[ae,ne]=x(P.nextSibling);return h(E,b),h(y,v(Tt,{directions:C}),ae,ne),y})()})),_})()})),l})()}),a,n),h(i,()=>m("examChooser.created-by",{url:window.location.origin})),r})(),Tt=e=>{const r=fe(()=>Object.keys(e.directions)),t=fe(()=>r().length===1&&r()[0]===Fe);return v(Xr,{get children(){return[v(Ee,{get when(){return t()},get children(){return v(De,{get metadata(){return e.directions[Fe]}})}}),v(Ee,{get when(){return!t()},get children(){var a=S(St),n=a.firstChild,i=n.nextSibling,[s,o]=x(i.nextSibling);return s.nextSibling,h(a,v(U,{get object(){return e.directions},separator:", ",children:(l,c)=>(()=>{var f=S(At),g=f.firstChild,[u,_]=x(g.nextSibling),$=u.nextSibling,[p,b]=x($.nextSibling);return h(f,l,u,_),h(f,v(De,{metadata:c}),p,b),f})()}),s,o),a}})]}})},De=e=>{const r=at(ft,!1),t=e.metadata.youtube==null?[]:Array.isArray(e.metadata.youtube)?e.metadata.youtube:[e.metadata.youtube];return v(Vr,{get when(){return r()},get children(){var a=S(Ct);return h(a,v(Zr,{each:t,children:n=>v(it,{type:"icon",class:"inline mx-2",link:n})})),a}})},wt=e=>{function r(t,a){const n=new Set(e.value);a?n.add(t):n.delete(t),e.onChange(n)}return e.options.map(({id:t,label:a,wide:n})=>v(be,{class:n?"col-span-2":"",get value(){return e.value.has(t)},label:a,onChange:i=>r(t,i)}))};function se([e,r],{name:t,storage:a,serialize:n=JSON.stringify,deserialize:i=JSON.parse}){const s=a??localStorage,o=s.getItem(t);return setTimeout(()=>{o!=null&&r(i(o))}),hr(()=>{gr(()=>{s.setItem(t,n(e()))})}),[e,r]}var Ot=A('<div><header class="text-sm font-bold flex items-center pb-4 rounded gap-4"><div class="border-t border-secondary flex-1"></div><div class=""></div><div class="border-t flex-1 border-secondary"></div></header><div class="grid grid-cols-2 sm:grid-cols-4 md:grid-cols-4 gap-4 mb-4">');const oe=e=>(()=>{var r=S(Ot),t=r.firstChild,a=t.firstChild,n=a.nextSibling,i=t.nextSibling;return h(n,()=>e.headerLabel),h(i,()=>e.children),r})(),Pt=e=>v(be,{get label(){return m("examChooser.filters.kneeFriendly")},get value(){return e.value.kneeFriendly??!1},onChange:r=>e.onChange({kneeFriendly:r})});var Et=A("<div><input type=range min=1 max=100><label>");const It=e=>{function r(o,l){e.onChange({...e.value,[o]:l})}const t=vt(),[a,n]=j(!1),[i,s]=j(e.value.includePercent);return gr(()=>s(e.value.includePercent)),hr(()=>{n(!0)}),[v(be,{get label(){return m("examChooser.order.randomize")},get value(){return e.value.randomize},onChange:o=>r("randomize",o)}),v(ve,{color:"secondary",icon:ht,get label(){return m("examChooser.order.shuffle")},get disabled(){return!e.value.randomize},get onClick(){return e.onForceRefresh}}),(()=>{var o=S(Et),l=o.firstChild,c=l.nextSibling;return l.addEventListener("change",f=>r("includePercent",Number(f.target.value))),l.$$input=f=>s(Number(f.target.value)),Ie(l,"id",t),Ie(c,"for",t),h(c,()=>m("examChooser.order.includePercent",{percent:i()})),Me(f=>{var g={"flex flex-col justify-center col-span-2 items-center transition-opacity duration-200":!0,"text-secondary-light":!e.value.randomize,"opacity-0":!a(),"opacity-100":a()},u=`w-2/3 ${a()?"opacity-100":"opacity-0"} accent-primary`,_=!a||!e.value.randomize;return f.e=et(o,g,f.e),u!==f.t&&rt(l,f.t=u),_!==f.a&&je(l,"disabled",f.a=_),f},{e:void 0,t:void 0,a:void 0}),Me(()=>je(l,"value",i())),pe(),o})()]};Qr(["input"]);const Mt={kneeFriendly:{filter:e=>e.execution!=="suwari waza"&&e.execution!=="hanmi handachi waza"}};function jt(e){return r=>!e.kneeFriendly||Mt.kneeFriendly.filter(r)}function Lt(e,r){var t=-1,a=e.length;for(r||(r=Array(a));++t<a;)r[t]=e[t];return r}var Ft=Lt,Dt=Math.floor,Rt=Math.random;function Gt(e,r){return e+Dt(Rt()*(r-e+1))}var Nt=Gt,zt=Nt;function Bt(e,r){var t=-1,a=e.length,n=a-1;for(r=r===void 0?a:r;++t<r;){var i=zt(t,n),s=e[i];e[i]=e[t],e[t]=s}return e.length=r,e}var _r=Bt,Ht=Ft,Kt=_r;function qt(e){return Kt(Ht(e))}var kt=qt;function Ut(e,r){for(var t=-1,a=e==null?0:e.length,n=Array(a);++t<a;)n[t]=r(e[t],t,e);return n}var pr=Ut,Jt=pr;function Yt(e,r){return Jt(r,function(t){return e[t]})}var Wt=Yt;function Xt(e,r){for(var t=-1,a=Array(e);++t<e;)a[t]=r(t);return a}var Zt=Xt,Vt=typeof K=="object"&&K&&K.Object===Object&&K,br=Vt,Qt=br,ea=typeof self=="object"&&self&&self.Object===Object&&self,ra=Qt||ea||Function("return this")(),O=ra,ta=O,aa=ta.Symbol,X=aa,Re=X,yr=Object.prototype,na=yr.hasOwnProperty,ia=yr.toString,N=Re?Re.toStringTag:void 0;function sa(e){var r=na.call(e,N),t=e[N];try{e[N]=void 0;var a=!0}catch{}var n=ia.call(e);return a&&(r?e[N]=t:delete e[N]),n}var oa=sa,la=Object.prototype,ua=la.toString;function ca(e){return ua.call(e)}var fa=ca,Ge=X,va=oa,da=fa,ha="[object Null]",ga="[object Undefined]",Ne=Ge?Ge.toStringTag:void 0;function $a(e){return e==null?e===void 0?ga:ha:Ne&&Ne in Object(e)?va(e):da(e)}var z=$a;function _a(e){return e!=null&&typeof e=="object"}var B=_a,pa=z,ba=B,ya="[object Arguments]";function ma(e){return ba(e)&&pa(e)==ya}var Sa=ma,ze=Sa,Aa=B,mr=Object.prototype,Ca=mr.hasOwnProperty,xa=mr.propertyIsEnumerable,Ta=ze(function(){return arguments}())?ze:function(e){return Aa(e)&&Ca.call(e,"callee")&&!xa.call(e,"callee")},Sr=Ta,wa=Array.isArray,T=wa,J={exports:{}};function Oa(){return!1}var Pa=Oa;J.exports;(function(e,r){var t=O,a=Pa,n=r&&!r.nodeType&&r,i=n&&!0&&e&&!e.nodeType&&e,s=i&&i.exports===n,o=s?t.Buffer:void 0,l=o?o.isBuffer:void 0,c=l||a;e.exports=c})(J,J.exports);var Ar=J.exports,Ea=9007199254740991,Ia=/^(?:0|[1-9]\d*)$/;function Ma(e,r){var t=typeof e;return r=r??Ea,!!r&&(t=="number"||t!="symbol"&&Ia.test(e))&&e>-1&&e%1==0&&e<r}var Cr=Ma,ja=9007199254740991;function La(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=ja}var ye=La,Fa=z,Da=ye,Ra=B,Ga="[object Arguments]",Na="[object Array]",za="[object Boolean]",Ba="[object Date]",Ha="[object Error]",Ka="[object Function]",qa="[object Map]",ka="[object Number]",Ua="[object Object]",Ja="[object RegExp]",Ya="[object Set]",Wa="[object String]",Xa="[object WeakMap]",Za="[object ArrayBuffer]",Va="[object DataView]",Qa="[object Float32Array]",en="[object Float64Array]",rn="[object Int8Array]",tn="[object Int16Array]",an="[object Int32Array]",nn="[object Uint8Array]",sn="[object Uint8ClampedArray]",on="[object Uint16Array]",ln="[object Uint32Array]",d={};d[Qa]=d[en]=d[rn]=d[tn]=d[an]=d[nn]=d[sn]=d[on]=d[ln]=!0;d[Ga]=d[Na]=d[Za]=d[za]=d[Va]=d[Ba]=d[Ha]=d[Ka]=d[qa]=d[ka]=d[Ua]=d[Ja]=d[Ya]=d[Wa]=d[Xa]=!1;function un(e){return Ra(e)&&Da(e.length)&&!!d[Fa(e)]}var cn=un;function fn(e){return function(r){return e(r)}}var vn=fn,Y={exports:{}};Y.exports;(function(e,r){var t=br,a=r&&!r.nodeType&&r,n=a&&!0&&e&&!e.nodeType&&e,i=n&&n.exports===a,s=i&&t.process,o=function(){try{var l=n&&n.require&&n.require("util").types;return l||s&&s.binding&&s.binding("util")}catch{}}();e.exports=o})(Y,Y.exports);var dn=Y.exports,hn=cn,gn=vn,Be=dn,He=Be&&Be.isTypedArray,$n=He?gn(He):hn,xr=$n,_n=Zt,pn=Sr,bn=T,yn=Ar,mn=Cr,Sn=xr,An=Object.prototype,Cn=An.hasOwnProperty;function xn(e,r){var t=bn(e),a=!t&&pn(e),n=!t&&!a&&yn(e),i=!t&&!a&&!n&&Sn(e),s=t||a||n||i,o=s?_n(e.length,String):[],l=o.length;for(var c in e)(r||Cn.call(e,c))&&!(s&&(c=="length"||n&&(c=="offset"||c=="parent")||i&&(c=="buffer"||c=="byteLength"||c=="byteOffset")||mn(c,l)))&&o.push(c);return o}var Tn=xn,wn=Object.prototype;function On(e){var r=e&&e.constructor,t=typeof r=="function"&&r.prototype||wn;return e===t}var Pn=On;function En(e,r){return function(t){return e(r(t))}}var In=En,Mn=In,jn=Mn(Object.keys,Object),Ln=jn,Fn=Pn,Dn=Ln,Rn=Object.prototype,Gn=Rn.hasOwnProperty;function Nn(e){if(!Fn(e))return Dn(e);var r=[];for(var t in Object(e))Gn.call(e,t)&&t!="constructor"&&r.push(t);return r}var zn=Nn;function Bn(e){var r=typeof e;return e!=null&&(r=="object"||r=="function")}var me=Bn,Hn=z,Kn=me,qn="[object AsyncFunction]",kn="[object Function]",Un="[object GeneratorFunction]",Jn="[object Proxy]";function Yn(e){if(!Kn(e))return!1;var r=Hn(e);return r==kn||r==Un||r==qn||r==Jn}var Tr=Yn,Wn=Tr,Xn=ye;function Zn(e){return e!=null&&Xn(e.length)&&!Wn(e)}var wr=Zn,Vn=Tn,Qn=zn,ei=wr;function ri(e){return ei(e)?Vn(e):Qn(e)}var Z=ri,ti=Wt,ai=Z;function ni(e){return e==null?[]:ti(e,ai(e))}var ii=ni,si=_r,oi=ii;function li(e){return si(oi(e))}var ui=li,ci=kt,fi=ui,vi=T;function di(e){var r=vi(e)?ci:fi;return r(e)}var hi=di;const gi=$r(hi);function $i(e){return gi(e)}function _i(e,{includePercent:r=100}={}){const t=$i(e),a=Math.ceil(r*e.length/100);return t.slice(0,a)}var pi=O,bi=pi["__core-js_shared__"],yi=bi,le=yi,Ke=function(){var e=/[^.]+$/.exec(le&&le.keys&&le.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();function mi(e){return!!Ke&&Ke in e}var Si=mi,Ai=Function.prototype,Ci=Ai.toString;function xi(e){if(e!=null){try{return Ci.call(e)}catch{}try{return e+""}catch{}}return""}var Or=xi,Ti=Tr,wi=Si,Oi=me,Pi=Or,Ei=/[\\^$.*+?()[\]{}|]/g,Ii=/^\[object .+?Constructor\]$/,Mi=Function.prototype,ji=Object.prototype,Li=Mi.toString,Fi=ji.hasOwnProperty,Di=RegExp("^"+Li.call(Fi).replace(Ei,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function Ri(e){if(!Oi(e)||wi(e))return!1;var r=Ti(e)?Di:Ii;return r.test(Pi(e))}var Gi=Ri;function Ni(e,r){return e?.[r]}var zi=Ni,Bi=Gi,Hi=zi;function Ki(e,r){var t=Hi(e,r);return Bi(t)?t:void 0}var M=Ki,qi=M,ki=function(){try{var e=qi(Object,"defineProperty");return e({},"",{}),e}catch{}}(),Ui=ki,qe=Ui;function Ji(e,r,t){r=="__proto__"&&qe?qe(e,r,{configurable:!0,enumerable:!0,value:t,writable:!0}):e[r]=t}var Yi=Ji;function Wi(e,r,t,a){for(var n=-1,i=e==null?0:e.length;++n<i;){var s=e[n];r(a,s,t(s),e)}return a}var Xi=Wi;function Zi(e){return function(r,t,a){for(var n=-1,i=Object(r),s=a(r),o=s.length;o--;){var l=s[e?o:++n];if(t(i[l],l,i)===!1)break}return r}}var Vi=Zi,Qi=Vi,es=Qi(),rs=es,ts=rs,as=Z;function ns(e,r){return e&&ts(e,r,as)}var is=ns,ss=wr;function os(e,r){return function(t,a){if(t==null)return t;if(!ss(t))return e(t,a);for(var n=t.length,i=r?n:-1,s=Object(t);(r?i--:++i<n)&&a(s[i],i,s)!==!1;);return t}}var ls=os,us=is,cs=ls,fs=cs(us),vs=fs,ds=vs;function hs(e,r,t,a){return ds(e,function(n,i,s){r(a,n,t(n),s)}),a}var gs=hs;function $s(){this.__data__=[],this.size=0}var _s=$s;function ps(e,r){return e===r||e!==e&&r!==r}var Pr=ps,bs=Pr;function ys(e,r){for(var t=e.length;t--;)if(bs(e[t][0],r))return t;return-1}var V=ys,ms=V,Ss=Array.prototype,As=Ss.splice;function Cs(e){var r=this.__data__,t=ms(r,e);if(t<0)return!1;var a=r.length-1;return t==a?r.pop():As.call(r,t,1),--this.size,!0}var xs=Cs,Ts=V;function ws(e){var r=this.__data__,t=Ts(r,e);return t<0?void 0:r[t][1]}var Os=ws,Ps=V;function Es(e){return Ps(this.__data__,e)>-1}var Is=Es,Ms=V;function js(e,r){var t=this.__data__,a=Ms(t,e);return a<0?(++this.size,t.push([e,r])):t[a][1]=r,this}var Ls=js,Fs=_s,Ds=xs,Rs=Os,Gs=Is,Ns=Ls;function L(e){var r=-1,t=e==null?0:e.length;for(this.clear();++r<t;){var a=e[r];this.set(a[0],a[1])}}L.prototype.clear=Fs;L.prototype.delete=Ds;L.prototype.get=Rs;L.prototype.has=Gs;L.prototype.set=Ns;var Q=L,zs=Q;function Bs(){this.__data__=new zs,this.size=0}var Hs=Bs;function Ks(e){var r=this.__data__,t=r.delete(e);return this.size=r.size,t}var qs=Ks;function ks(e){return this.__data__.get(e)}var Us=ks;function Js(e){return this.__data__.has(e)}var Ys=Js,Ws=M,Xs=O,Zs=Ws(Xs,"Map"),Se=Zs,Vs=M,Qs=Vs(Object,"create"),ee=Qs,ke=ee;function eo(){this.__data__=ke?ke(null):{},this.size=0}var ro=eo;function to(e){var r=this.has(e)&&delete this.__data__[e];return this.size-=r?1:0,r}var ao=to,no=ee,io="__lodash_hash_undefined__",so=Object.prototype,oo=so.hasOwnProperty;function lo(e){var r=this.__data__;if(no){var t=r[e];return t===io?void 0:t}return oo.call(r,e)?r[e]:void 0}var uo=lo,co=ee,fo=Object.prototype,vo=fo.hasOwnProperty;function ho(e){var r=this.__data__;return co?r[e]!==void 0:vo.call(r,e)}var go=ho,$o=ee,_o="__lodash_hash_undefined__";function po(e,r){var t=this.__data__;return this.size+=this.has(e)?0:1,t[e]=$o&&r===void 0?_o:r,this}var bo=po,yo=ro,mo=ao,So=uo,Ao=go,Co=bo;function F(e){var r=-1,t=e==null?0:e.length;for(this.clear();++r<t;){var a=e[r];this.set(a[0],a[1])}}F.prototype.clear=yo;F.prototype.delete=mo;F.prototype.get=So;F.prototype.has=Ao;F.prototype.set=Co;var xo=F,Ue=xo,To=Q,wo=Se;function Oo(){this.size=0,this.__data__={hash:new Ue,map:new(wo||To),string:new Ue}}var Po=Oo;function Eo(e){var r=typeof e;return r=="string"||r=="number"||r=="symbol"||r=="boolean"?e!=="__proto__":e===null}var Io=Eo,Mo=Io;function jo(e,r){var t=e.__data__;return Mo(r)?t[typeof r=="string"?"string":"hash"]:t.map}var re=jo,Lo=re;function Fo(e){var r=Lo(this,e).delete(e);return this.size-=r?1:0,r}var Do=Fo,Ro=re;function Go(e){return Ro(this,e).get(e)}var No=Go,zo=re;function Bo(e){return zo(this,e).has(e)}var Ho=Bo,Ko=re;function qo(e,r){var t=Ko(this,e),a=t.size;return t.set(e,r),this.size+=t.size==a?0:1,this}var ko=qo,Uo=Po,Jo=Do,Yo=No,Wo=Ho,Xo=ko;function D(e){var r=-1,t=e==null?0:e.length;for(this.clear();++r<t;){var a=e[r];this.set(a[0],a[1])}}D.prototype.clear=Uo;D.prototype.delete=Jo;D.prototype.get=Yo;D.prototype.has=Wo;D.prototype.set=Xo;var Ae=D,Zo=Q,Vo=Se,Qo=Ae,el=200;function rl(e,r){var t=this.__data__;if(t instanceof Zo){var a=t.__data__;if(!Vo||a.length<el-1)return a.push([e,r]),this.size=++t.size,this;t=this.__data__=new Qo(a)}return t.set(e,r),this.size=t.size,this}var tl=rl,al=Q,nl=Hs,il=qs,sl=Us,ol=Ys,ll=tl;function R(e){var r=this.__data__=new al(e);this.size=r.size}R.prototype.clear=nl;R.prototype.delete=il;R.prototype.get=sl;R.prototype.has=ol;R.prototype.set=ll;var Er=R,ul="__lodash_hash_undefined__";function cl(e){return this.__data__.set(e,ul),this}var fl=cl;function vl(e){return this.__data__.has(e)}var dl=vl,hl=Ae,gl=fl,$l=dl;function W(e){var r=-1,t=e==null?0:e.length;for(this.__data__=new hl;++r<t;)this.add(e[r])}W.prototype.add=W.prototype.push=gl;W.prototype.has=$l;var _l=W;function pl(e,r){for(var t=-1,a=e==null?0:e.length;++t<a;)if(r(e[t],t,e))return!0;return!1}var bl=pl;function yl(e,r){return e.has(r)}var ml=yl,Sl=_l,Al=bl,Cl=ml,xl=1,Tl=2;function wl(e,r,t,a,n,i){var s=t&xl,o=e.length,l=r.length;if(o!=l&&!(s&&l>o))return!1;var c=i.get(e),f=i.get(r);if(c&&f)return c==r&&f==e;var g=-1,u=!0,_=t&Tl?new Sl:void 0;for(i.set(e,r),i.set(r,e);++g<o;){var $=e[g],p=r[g];if(a)var b=s?a(p,$,g,r,e,i):a($,p,g,e,r,i);if(b!==void 0){if(b)continue;u=!1;break}if(_){if(!Al(r,function(C,y){if(!Cl(_,y)&&($===C||n($,C,t,a,i)))return _.push(y)})){u=!1;break}}else if(!($===p||n($,p,t,a,i))){u=!1;break}}return i.delete(e),i.delete(r),u}var Ir=wl,Ol=O,Pl=Ol.Uint8Array,El=Pl;function Il(e){var r=-1,t=Array(e.size);return e.forEach(function(a,n){t[++r]=[n,a]}),t}var Ml=Il;function jl(e){var r=-1,t=Array(e.size);return e.forEach(function(a){t[++r]=a}),t}var Ll=jl,Je=X,Ye=El,Fl=Pr,Dl=Ir,Rl=Ml,Gl=Ll,Nl=1,zl=2,Bl="[object Boolean]",Hl="[object Date]",Kl="[object Error]",ql="[object Map]",kl="[object Number]",Ul="[object RegExp]",Jl="[object Set]",Yl="[object String]",Wl="[object Symbol]",Xl="[object ArrayBuffer]",Zl="[object DataView]",We=Je?Je.prototype:void 0,ue=We?We.valueOf:void 0;function Vl(e,r,t,a,n,i,s){switch(t){case Zl:if(e.byteLength!=r.byteLength||e.byteOffset!=r.byteOffset)return!1;e=e.buffer,r=r.buffer;case Xl:return!(e.byteLength!=r.byteLength||!i(new Ye(e),new Ye(r)));case Bl:case Hl:case kl:return Fl(+e,+r);case Kl:return e.name==r.name&&e.message==r.message;case Ul:case Yl:return e==r+"";case ql:var o=Rl;case Jl:var l=a&Nl;if(o||(o=Gl),e.size!=r.size&&!l)return!1;var c=s.get(e);if(c)return c==r;a|=zl,s.set(e,r);var f=Dl(o(e),o(r),a,n,i,s);return s.delete(e),f;case Wl:if(ue)return ue.call(e)==ue.call(r)}return!1}var Ql=Vl;function eu(e,r){for(var t=-1,a=r.length,n=e.length;++t<a;)e[n+t]=r[t];return e}var ru=eu,tu=ru,au=T;function nu(e,r,t){var a=r(e);return au(e)?a:tu(a,t(e))}var iu=nu;function su(e,r){for(var t=-1,a=e==null?0:e.length,n=0,i=[];++t<a;){var s=e[t];r(s,t,e)&&(i[n++]=s)}return i}var ou=su;function lu(){return[]}var uu=lu,cu=ou,fu=uu,vu=Object.prototype,du=vu.propertyIsEnumerable,Xe=Object.getOwnPropertySymbols,hu=Xe?function(e){return e==null?[]:(e=Object(e),cu(Xe(e),function(r){return du.call(e,r)}))}:fu,gu=hu,$u=iu,_u=gu,pu=Z;function bu(e){return $u(e,pu,_u)}var yu=bu,Ze=yu,mu=1,Su=Object.prototype,Au=Su.hasOwnProperty;function Cu(e,r,t,a,n,i){var s=t&mu,o=Ze(e),l=o.length,c=Ze(r),f=c.length;if(l!=f&&!s)return!1;for(var g=l;g--;){var u=o[g];if(!(s?u in r:Au.call(r,u)))return!1}var _=i.get(e),$=i.get(r);if(_&&$)return _==r&&$==e;var p=!0;i.set(e,r),i.set(r,e);for(var b=s;++g<l;){u=o[g];var C=e[u],y=r[u];if(a)var E=s?a(y,C,u,r,e,i):a(C,y,u,e,r,i);if(!(E===void 0?C===y||n(C,y,t,a,i):E)){p=!1;break}b||(b=u=="constructor")}if(p&&!b){var w=e.constructor,P=r.constructor;w!=P&&"constructor"in e&&"constructor"in r&&!(typeof w=="function"&&w instanceof w&&typeof P=="function"&&P instanceof P)&&(p=!1)}return i.delete(e),i.delete(r),p}var xu=Cu,Tu=M,wu=O,Ou=Tu(wu,"DataView"),Pu=Ou,Eu=M,Iu=O,Mu=Eu(Iu,"Promise"),ju=Mu,Lu=M,Fu=O,Du=Lu(Fu,"Set"),Ru=Du,Gu=M,Nu=O,zu=Gu(Nu,"WeakMap"),Bu=zu,de=Pu,he=Se,ge=ju,$e=Ru,_e=Bu,Mr=z,G=Or,Ve="[object Map]",Hu="[object Object]",Qe="[object Promise]",er="[object Set]",rr="[object WeakMap]",tr="[object DataView]",Ku=G(de),qu=G(he),ku=G(ge),Uu=G($e),Ju=G(_e),I=Mr;(de&&I(new de(new ArrayBuffer(1)))!=tr||he&&I(new he)!=Ve||ge&&I(ge.resolve())!=Qe||$e&&I(new $e)!=er||_e&&I(new _e)!=rr)&&(I=function(e){var r=Mr(e),t=r==Hu?e.constructor:void 0,a=t?G(t):"";if(a)switch(a){case Ku:return tr;case qu:return Ve;case ku:return Qe;case Uu:return er;case Ju:return rr}return r});var Yu=I,ce=Er,Wu=Ir,Xu=Ql,Zu=xu,ar=Yu,nr=T,ir=Ar,Vu=xr,Qu=1,sr="[object Arguments]",or="[object Array]",q="[object Object]",ec=Object.prototype,lr=ec.hasOwnProperty;function rc(e,r,t,a,n,i){var s=nr(e),o=nr(r),l=s?or:ar(e),c=o?or:ar(r);l=l==sr?q:l,c=c==sr?q:c;var f=l==q,g=c==q,u=l==c;if(u&&ir(e)){if(!ir(r))return!1;s=!0,f=!1}if(u&&!f)return i||(i=new ce),s||Vu(e)?Wu(e,r,t,a,n,i):Xu(e,r,l,t,a,n,i);if(!(t&Qu)){var _=f&&lr.call(e,"__wrapped__"),$=g&&lr.call(r,"__wrapped__");if(_||$){var p=_?e.value():e,b=$?r.value():r;return i||(i=new ce),n(p,b,t,a,i)}}return u?(i||(i=new ce),Zu(e,r,t,a,n,i)):!1}var tc=rc,ac=tc,ur=B;function jr(e,r,t,a,n){return e===r?!0:e==null||r==null||!ur(e)&&!ur(r)?e!==e&&r!==r:ac(e,r,t,a,jr,n)}var Lr=jr,nc=Er,ic=Lr,sc=1,oc=2;function lc(e,r,t,a){var n=t.length,i=n,s=!a;if(e==null)return!i;for(e=Object(e);n--;){var o=t[n];if(s&&o[2]?o[1]!==e[o[0]]:!(o[0]in e))return!1}for(;++n<i;){o=t[n];var l=o[0],c=e[l],f=o[1];if(s&&o[2]){if(c===void 0&&!(l in e))return!1}else{var g=new nc;if(a)var u=a(c,f,l,e,r,g);if(!(u===void 0?ic(f,c,sc|oc,a,g):u))return!1}}return!0}var uc=lc,cc=me;function fc(e){return e===e&&!cc(e)}var Fr=fc,vc=Fr,dc=Z;function hc(e){for(var r=dc(e),t=r.length;t--;){var a=r[t],n=e[a];r[t]=[a,n,vc(n)]}return r}var gc=hc;function $c(e,r){return function(t){return t==null?!1:t[e]===r&&(r!==void 0||e in Object(t))}}var Dr=$c,_c=uc,pc=gc,bc=Dr;function yc(e){var r=pc(e);return r.length==1&&r[0][2]?bc(r[0][0],r[0][1]):function(t){return t===e||_c(t,e,r)}}var mc=yc,Sc=z,Ac=B,Cc="[object Symbol]";function xc(e){return typeof e=="symbol"||Ac(e)&&Sc(e)==Cc}var Ce=xc,Tc=T,wc=Ce,Oc=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Pc=/^\w*$/;function Ec(e,r){if(Tc(e))return!1;var t=typeof e;return t=="number"||t=="symbol"||t=="boolean"||e==null||wc(e)?!0:Pc.test(e)||!Oc.test(e)||r!=null&&e in Object(r)}var xe=Ec,Rr=Ae,Ic="Expected a function";function Te(e,r){if(typeof e!="function"||r!=null&&typeof r!="function")throw new TypeError(Ic);var t=function(){var a=arguments,n=r?r.apply(this,a):a[0],i=t.cache;if(i.has(n))return i.get(n);var s=e.apply(this,a);return t.cache=i.set(n,s)||i,s};return t.cache=new(Te.Cache||Rr),t}Te.Cache=Rr;var Mc=Te,jc=Mc,Lc=500;function Fc(e){var r=jc(e,function(a){return t.size===Lc&&t.clear(),a}),t=r.cache;return r}var Dc=Fc,Rc=Dc,Gc=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Nc=/\\(\\)?/g,zc=Rc(function(e){var r=[];return e.charCodeAt(0)===46&&r.push(""),e.replace(Gc,function(t,a,n,i){r.push(n?i.replace(Nc,"$1"):a||t)}),r}),Bc=zc,cr=X,Hc=pr,Kc=T,qc=Ce,kc=1/0,fr=cr?cr.prototype:void 0,vr=fr?fr.toString:void 0;function Gr(e){if(typeof e=="string")return e;if(Kc(e))return Hc(e,Gr)+"";if(qc(e))return vr?vr.call(e):"";var r=e+"";return r=="0"&&1/e==-kc?"-0":r}var Uc=Gr,Jc=Uc;function Yc(e){return e==null?"":Jc(e)}var Wc=Yc,Xc=T,Zc=xe,Vc=Bc,Qc=Wc;function ef(e,r){return Xc(e)?e:Zc(e,r)?[e]:Vc(Qc(e))}var Nr=ef,rf=Ce,tf=1/0;function af(e){if(typeof e=="string"||rf(e))return e;var r=e+"";return r=="0"&&1/e==-tf?"-0":r}var te=af,nf=Nr,sf=te;function of(e,r){r=nf(r,e);for(var t=0,a=r.length;e!=null&&t<a;)e=e[sf(r[t++])];return t&&t==a?e:void 0}var zr=of,lf=zr;function uf(e,r,t){var a=e==null?void 0:lf(e,r);return a===void 0?t:a}var cf=uf;function ff(e,r){return e!=null&&r in Object(e)}var vf=ff,df=Nr,hf=Sr,gf=T,$f=Cr,_f=ye,pf=te;function bf(e,r,t){r=df(r,e);for(var a=-1,n=r.length,i=!1;++a<n;){var s=pf(r[a]);if(!(i=e!=null&&t(e,s)))break;e=e[s]}return i||++a!=n?i:(n=e==null?0:e.length,!!n&&_f(n)&&$f(s,n)&&(gf(e)||hf(e)))}var yf=bf,mf=vf,Sf=yf;function Af(e,r){return e!=null&&Sf(e,r,mf)}var Cf=Af,xf=Lr,Tf=cf,wf=Cf,Of=xe,Pf=Fr,Ef=Dr,If=te,Mf=1,jf=2;function Lf(e,r){return Of(e)&&Pf(r)?Ef(If(e),r):function(t){var a=Tf(t,e);return a===void 0&&a===r?wf(t,e):xf(r,a,Mf|jf)}}var Ff=Lf;function Df(e){return e}var Rf=Df;function Gf(e){return function(r){return r?.[e]}}var Nf=Gf,zf=zr;function Bf(e){return function(r){return zf(r,e)}}var Hf=Bf,Kf=Nf,qf=Hf,kf=xe,Uf=te;function Jf(e){return kf(e)?Kf(Uf(e)):qf(e)}var Yf=Jf,Wf=mc,Xf=Ff,Zf=Rf,Vf=T,Qf=Yf;function ev(e){return typeof e=="function"?e:e==null?Zf:typeof e=="object"?Vf(e)?Xf(e[0],e[1]):Wf(e):Qf(e)}var rv=ev,tv=Xi,av=gs,nv=rv,iv=T;function sv(e,r){return function(t,a){var n=iv(t)?tv:av,i=r?r():{};return n(t,e,nv(a),i)}}var ov=sv,lv=Yi,uv=ov,cv=Object.prototype,fv=cv.hasOwnProperty,vv=uv(function(e,r,t){fv.call(e,t)?e[t].push(r):lv(e,t,[r])}),dv=vv;const hv=$r(dv);function gv(e,{orderExecutions:r=!1}={}){return k(e,"execution",r?_t:null,a=>k(a,"attack",null,n=>k(n,"defence",null,i=>k(i,"direction",null,s=>s))))}function k(e,r,t,a){const n=$v(e,r);return t!=null?t.flatMap(i=>a(n[i]??[])):Object.values(n).flatMap(a)}function $v(e,r){return hv(e,r)}function _v(e,r){const t=r.selectedExams??new Set,a=r.filters??{},n=r.order?.randomize??!1,i=r.order?.includePercent??100,s=r.order?.orderExecutions??!1;let o=ct(e.filter(l=>t.has(l.id)));return o=o.filter(jt(a)),n&&(o=_i(o,{includePercent:i})),gv(o,{orderExecutions:s})}var pv=A("<div><!$><!/><!$><!/><!$><!/><div>"),bv=A('<div class=my-10><div class="flex justify-end gap-4 sticky top-0 py-2 bg-white"><!$><!/><!$><!/></div><!$><!/><div class="flex items-center justify-end mt-16 gap-4"><span></span><span>');const Fv=e=>{const[r,t]=se(j(new Set),{name:"examSelection:"+e.dojo.info.id,storage:sessionStorage,serialize:u=>JSON.stringify(Array.from(u)),deserialize:u=>new Set(JSON.parse(u))}),[a,n]=se(j({kneeFriendly:!1}),{name:"techniqueFilters:"+e.dojo.info.id,storage:sessionStorage}),[i,s]=se(j({randomize:!0,includePercent:80}),{name:"orderOptions:"+e.dojo.info.id,storage:sessionStorage}),[o,l]=j(!1);function c(){l(u=>!u)}const f=tt(()=>(o(),_v(e.dojo.details.exams,{order:{...i(),orderExecutions:!0},selectedExams:r(),filters:a()}))),g=async()=>{const{save:u}=st(e.dojo.info.id);await u(f()),document.location.href=Le(`/${e.dojo.info.id}/reader`)};return(()=>{var u=S(pv),_=u.firstChild,[$,p]=x(_.nextSibling),b=$.nextSibling,[C,y]=x(b.nextSibling),E=C.nextSibling,[w,P]=x(E.nextSibling),ae=w.nextSibling;return h(u,v(oe,{get headerLabel(){return m("examChooser.exams.header")},get children(){return v(wt,{get options(){return yv(e.dojo.details.exams)},get value(){return r()},onChange:t})}}),$,p),h(u,v(oe,{get headerLabel(){return m("examChooser.filters.header")},get children(){return v(Pt,{get value(){return a()},onChange:n})}}),C,y),h(u,v(oe,{get headerLabel(){return m("examChooser.order.header")},get children(){return v(It,{get value(){return i()},onChange:s,onForceRefresh:c})}}),w,P),h(ae,(()=>{var ne=fe(()=>r().size>0);return()=>ne()&&(()=>{var ie=S(bv),H=ie.firstChild,Br=H.firstChild,[we,Hr]=x(Br.nextSibling),Kr=we.nextSibling,[qr,kr]=x(Kr.nextSibling),Ur=H.nextSibling,[Oe,Jr]=x(Ur.nextSibling),Yr=Oe.nextSibling,Pe=Yr.firstChild,Wr=Pe.nextSibling;return h(H,v(ve,{size:"small",color:"primary",icon:$t,get label(){return m("examChooser.read")},onClick:g}),we,Hr),h(H,v(ve,{size:"small",color:"secondary",icon:ot,get label(){return m("examChooser.print")},onClick:()=>window.print()}),qr,kr),h(ie,v(xt,{get techniques(){return f()}}),Oe,Jr),h(Pe,()=>m("donations.question")),h(Wr,v(lt,{size:"small",get label(){return m("donations.action")},get href(){return Le("/donations")}})),ie})()})()),u})()};function yv(e){return e.map(r=>({id:r.id,label:Sv(r.label)}))}const mv={kyu5:"chooser.button.kyu5",kyu4:"chooser.button.kyu4",kyu3:"chooser.button.kyu3",kyu2:"chooser.button.kyu2",kyu1:"chooser.button.kyu1",dan1:"chooser.button.dan1",dan2:"chooser.button.dan2",dan3:"chooser.button.dan3",dan4:"chooser.button.dan4"};function Sv(e){switch(e.type){case"wellknown":return m(mv[e.key]);case"free":return nt(e.text)}}export{Fv as TechniqueChooser};
