import{g as o,p as w,r as u,t as l,m as P,e as a,c as _,b as V,i as h,u as z,h as C,j as x,d as I,M as y,x as H}from"./web.Br_rKyYi.js";import{S as g}from"./SimpleButton.BZcaYVZn.js";import{t as f}from"./usePersistentStore.DdLkRqUq.js";import{c as N}from"./isReady.BL8lxnTB.js";import{y as k}from"./preload-helper.DyxLmbb3.js";import{l as M}from"./adapter.D3DoqAO4.js";var R=l('<svg xmlns=http://www.w3.org/2000/svg width=24 height=24><path d="M6 6h12v12H6z">');const L=(t={})=>(()=>{var e=o(R);return w(e,t,!0,!0),u(),e})();var O=l('<svg xmlns=http://www.w3.org/2000/svg width=24 height=24><path d="M4 6H2v14c0 1.1.9 2 2 2h14v-2H4zm16-4H8c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2m0 14H8V4h12zM12 5.5v9l6-4.5z">');const v=(t={})=>(()=>{var e=o(O);return w(e,t,!0,!0),u(),e})(),X="single-direction";var T=l('<div><!$><!/><div class="absolute inset-0 z-0">');async function B(){const t=document.createElement("div");document.body.append(t);const e=Promise.withResolvers();return P(()=>a(Y,{get setPlayer(){return e.resolve}}),t),await e.promise}class F extends EventTarget{constructor(e,n){super(),this.htmlElement=e,this.setVisible=n}}const Y=t=>{let e=null;const[n,i]=_(!1);function s(r){e=new F(r,i),t.setPlayer(e)}function S(){e?.dispatchEvent(new Event("stop"))}return(()=>{var r=o(T),$=r.firstChild,[d,E]=V($.nextSibling),p=d.nextSibling;h(r,a(g,{class:"absolute top-1 right-1 z-10",size:"small",get label(){return f("video.stop")},icon:L,onClick:S}),d,E);var m=s;return typeof m=="function"?z(m,p):s=p,C(()=>x(r,N("fixed inset-0 bg-primary-dark",n()?"visible":"hidden"))),r})()};async function q(t){const e=await b();await e.loadVideo(t.videoId),await e.play(),await e.waitForStop(),await e.stop()}let c=null;function b(){return c=c??J(),c}k.subscribe(t=>{t&&b()});async function J(){const t=await B(),e=await M(t.htmlElement);function n(){e?.setSize(window.innerWidth,window.innerHeight)}window.addEventListener("resize",n),n();const i={loadVideo(s){return e.loadVideoById(s)},async play(){await e.playVideo(),t.setVisible(!0)},async stop(){await e.stopVideo(),t.setVisible(!1)},async waitForStop(){await e.waitForStop()}};return t.addEventListener("stop",()=>{i.stop()}),i}var j=l("<button>");const Z=t=>{async function e(){await q(t.link)}return a(H,{get children(){return[a(y,{get when(){return t.type==="icon"},get children(){var n=o(j);return n.$$click=e,h(n,a(v,{get class(){return t.class}})),u(),n}}),a(y,{get when(){return t.type==="button"},get children(){return a(g,{get class(){return t.class},size:"small",icon:v,get label(){return f("button.play-video.label")},onClick:e})}})]}})};I(["click"]);function A(t,e){return{async save(n){localStorage.setItem(t,JSON.stringify(n))},async load(){const n=localStorage.getItem(t);return n==null?e:Promise.resolve(JSON.parse(n))}}}function ee(t){return A(`currentTechniques:${t}`,[])}export{L as I,X as S,Z as Y,ee as c};
