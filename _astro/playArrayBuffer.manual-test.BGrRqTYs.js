import{c as B,F as L,d as M,b as j,q as F,g as b,a as g,i as s,e as _,r as O,t as h}from"./web.BO7jKKnc.js";function G(e){return B(L,{get each(){return Object.entries(e.object)},children:(t,n)=>n()>0?[e.separator,e.children(t[0],t[1])]:e.children(t[0],t[1])})}const T="/_astro/playArrayBuffer.fixture.D9jk8p3Y.mp3";function D(){let e=null,t=null;return{promise:new Promise((l,i)=>{e=l,t=i}),resolve:e,reject:t}}function N(e){const t=new ArrayBuffer(e.byteLength);return new Uint8Array(t).set(new Uint8Array(e)),t}const R=async(e,t={})=>{const n=U(),{resolve:l,promise:i}=D(),r=n.createBufferSource(),a=N(e);if(r.buffer=await n.decodeAudioData(a),r.connect(n.destination),!t.abortSignal?.aborted)return t.abortSignal?.addEventListener("abort",()=>r.stop()),r.start(),r.addEventListener("ended",()=>l()),i};let y=null;function U(){return y==null&&(y=new AudioContext),y}var q=h('<div><ol><li>Press the play button<ul><li>The text "ai hamni katate dori" should be played</li><li>During playback, "playing" should be shownw</li><li>After playback, "playing" should disappear</li></ul></li><li>Press "play" and then "stop"<ul><li>The text "ai hamni katate dori" should be played</li><li>On pressing stop, the playback should be stopped</li></ul></li><li>Press "play" multiple times, before the playback is finished"<ul><li>The text "ai hamni katate dori" should be played</li><li>On pressing "play" again, the previous playback should be stopped</li></ul></li></ol><div class="flex gap-2 items-center py-2"><!$><!/><!$><!/><button class="border-primary border bg-primary-light p-2 rounded"></button><button class="border-primary border bg-primary-light p-2 rounded">Stop</button><div>'),H=h("<p>Error while loading mp3: <!$><!/>"),W=h("<p>Loading mp3");async function Y(){return await(await fetch(T)).arrayBuffer()}const I=()=>{let e=new AbortController;const[t,n]=j(0),l=()=>{e.abort(),e=new AbortController},i=async a=>{l(),n(o=>o+1),await R(a,{abortSignal:e.signal}),n(o=>o-1)},[r]=F(Y);return(()=>{var a=b(q),o=a.firstChild,u=o.nextSibling,x=u.firstChild,[f,v]=g(x.nextSibling),S=f.nextSibling,[$,w]=g(S.nextSibling),c=$.nextSibling,m=c.nextSibling,k=m.nextSibling;return s(u,(()=>{var d=_(()=>!!r.error);return()=>d()&&(()=>{var p=b(H),C=p.firstChild,A=C.nextSibling,[E,P]=g(A.nextSibling);return s(p,()=>r.error,E,P),p})()})(),f,v),s(u,(()=>{var d=_(()=>!!r.loading);return()=>d()&&b(W)})(),$,w),c.$$click=()=>i(r()),s(c,()=>r.loading?"Loading...":"Play"),m.$$click=()=>l(),s(k,()=>t()>0&&"Playing"),O(),a})()};M(["click"]);export{G as F,I as M};
