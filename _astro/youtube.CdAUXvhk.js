let f=[],o=0;const g=4;let L=0,y=e=>{let s=[],t={get(){return t.lc||t.listen(()=>{})(),t.value},lc:0,listen(i){return t.lc=s.push(i),()=>{for(let l=o+g;l<f.length;)f[l]===i?f.splice(l,g):l+=g;let n=s.indexOf(i);~n&&(s.splice(n,1),--t.lc||t.off())}},notify(i,n){L++;let l=!f.length;for(let r of s)f.push(r,t.value,i,n);if(l){for(o=0;o<f.length;o+=g)f[o](f[o+1],f[o+2],f[o+3]);f.length=0}},off(){},set(i){let n=t.value;n!==i&&(t.value=i,t.notify(n))},subscribe(i){let n=t.listen(i);return i(t.value),n},value:e};return t};const N=5,p=6,h=10;let S=(e,s,t,i)=>(e.events=e.events||{},e.events[t+h]||(e.events[t+h]=i(n=>{e.events[t].reduceRight((l,r)=>(r(l),l),{shared:{},...n})})),e.events[t]=e.events[t]||[],e.events[t].push(s),()=>{let n=e.events[t],l=n.indexOf(s);n.splice(l,1),n.length||(delete e.events[t],e.events[t+h](),delete e.events[t+h])}),x=1e3,O=(e,s)=>S(e,i=>{let n=s(i);n&&e.events[p].push(n)},N,i=>{let n=e.listen;e.listen=(...r)=>(!e.lc&&!e.active&&(e.active=!0,i()),n(...r));let l=e.off;return e.events[p]=[],e.off=()=>{l(),setTimeout(()=>{if(e.active&&!e.lc){e.active=!1;for(let r of e.events[p])r();e.events[p]=[]}},x)},()=>{e.listen=n,e.off=l}}),A=(e,s,t)=>{Array.isArray(e)||(e=[e]);let i,n,l=()=>{if(n===L)return;n=L;let v=e.map(u=>u.get());if(!i||v.some((u,w)=>u!==i[w])){i=v;let u=s(...v);u&&u.then&&u.t?u.then(w=>{i===v&&r.set(w)}):(r.set(u),n=L)}},r=y(void 0),E=r.get;r.get=()=>(l(),E());let a,d=t?()=>{clearTimeout(a),a=setTimeout(l)}:l;return O(r,()=>{let v=e.map(u=>u.listen(d));return l(),()=>{for(let u of v)u()}}),r},M=(e,s)=>A(e,s),m=e=>e,c={},T={addEventListener(){},removeEventListener(){}};function R(){try{return typeof localStorage<"u"}catch{return!1}}R()&&(c=localStorage);let _={addEventListener(e,s,t){window.addEventListener("storage",s),window.addEventListener("pageshow",t)},removeEventListener(e,s,t){window.removeEventListener("storage",s),window.removeEventListener("pageshow",t)}};typeof window<"u"&&(T=_);function I(e,s=void 0,t={}){let i=t.encode||m,n=t.decode||m,l=y(s),r=l.set;l.set=d=>{typeof d>"u"?delete c[e]:c[e]=i(d),r(d)};function E(d){d.key===e?d.newValue===null?r(void 0):r(n(d.newValue)):c[e]||r(void 0)}function a(){l.set(c[e]?n(c[e]):s)}return O(l,()=>{if(a(),t.listen!==!1)return T.addEventListener(e,E,a),()=>{T.removeEventListener(e,E,a)}}),l}const U=I("youtubeEnabled","false"),k=M(U,e=>e==="true");function Q(e){U.set(e?"true":"false")}export{Q as s,k as y};
