const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["_astro/main.aFIO1j07.js","_astro/_commonjsHelpers.C4iS2aBk.js"])))=>i.map(i=>d[i]);
import{_ as Et}from"./preload-helper.DyxLmbb3.js";import{$ as H,q as bt,v as Ue,w as vr,c as At,o as $r,n as Sr,a as jr}from"./web.Br_rKyYi.js";var Or={},xr=Object.defineProperty,kr=(e,t,r)=>t in e?xr(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,Wt=(e,t,r)=>(kr(e,typeof t!="symbol"?t+"":t,r),r),dt=(e,t,r)=>{if(!t.has(e))throw TypeError("Cannot "+r)},f=(e,t,r)=>(dt(e,t,"read from private field"),r?r.call(e):t.get(e)),b=(e,t,r)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,r)},v=(e,t,r,n)=>(dt(e,t,"write to private field"),n?n.call(e,r):t.set(e,r),r),j=(e,t,r)=>(dt(e,t,"access private method"),r),z="astro-i18n",Lr=`${z}.config`,vt="github.com/alexandre-fernandez/astro-i18n/issues",Rr=class extends Error{constructor(e){super(e?`${z}: Unreachable code executed (at "${e}"), please open an issue at "${vt}".`:`${z}: Unreachable code executed, please open an issue at "${vt}".`)}},Pr=Rr;function $(){throw new Pr}function _r(e=new Error("Something went wrong.")){throw e}var Ge,Ct,he=class{constructor(e){b(this,Ge),Wt(this,"regexp"),this.regexp=new RegExp(e.source,e.flags)}static fromString(e,t){return new he(new RegExp(e,t))}get source(){return this.regexp.source}get flags(){return this.regexp.flags}add(e){return this.regexp=new RegExp(`${this.regexp.source}${e.source}`,this.regexp.flags),this}test(e){return this.regexp.test(e)}exec(e,t){let r=j(this,Ge,Ct).call(this,e),n=r.next();for(;!n.done&&t(n.value)!==he.BREAK;)n=r.next();return this}match(e){let t=null;return this.exec(e,r=>(t=r,he.BREAK)),t}clone(){return new he(new RegExp(this.regexp.source,this.regexp.flags))}toMatcher(){return this.match.bind(this)}},Nt=he;Ge=new WeakSet,Ct=function*(e){let t=this.regexp;t.flags.includes("g")||(t=new RegExp(this.regexp.source,`${this.regexp.flags}g`));let r=t.exec(e);for(;r!==null;)r&&(yield{range:[r.index,r.index+r[0].length],match:[...r]}),r=t.exec(e)},Wt(Nt,"BREAK","break");var m=Nt,Dt=class{#t;#e;constructor({source:e,flags:t}){this.#t=e,this.#e=t}static fromRegex(e){return new Dt(e.regexp)}appendPattern(e){return this.#t=`${this.#t}${e}`,this}matchTrimifiable(){return this.#t=`\\s*${this.#t}\\s*`,this}assertStarting(){return this.#t=`^${this.#t}`,this}assertEnding(){return this.#t=`${this.#t}$`,this}addGroup(){return this.#t=`(${this.#t})`,this}addGlobalFlag(){return this.#e.includes("g")||(this.#e=`${this.#e}g`),this}build(){return new m(new RegExp(this.#t,this.#e))}},J=Dt;function Oe(e,t,r){if(!t(e)){let n="";throw e?typeof e=="object"?n=`
${e.constructor.name}
${JSON.stringify(e,null,4)}`:typeof e=="symbol"?n=`Symbol("${e.description}")`:n=typeof e=="string"?`"${e}"`:`${e}`:n=`${e}`,!r&&t.name.startsWith("is")&&(r=t.name.slice(2)),new TypeError(r?`Unexpected type (expecting \`${r}\`), found: ${n}`:`Unexpected type, found: ${n}`)}}function Er(e){return typeof e=="number"&&!Number.isNaN(e)}function Ar(e){return e instanceof Date&&!Number.isNaN(e.getTime())}function xe(e){return Array.isArray(e)}function $e(e){return xe(e)&&e.every(t=>typeof t=="string")}function S(e){return!!e&&typeof e=="object"}function $t(e){return S(e)?Object.getPrototypeOf(e)===Object.prototype:!1}var fe,se,de,Je=class{static get path(){return j(this,se,de).call(this,"path")}static get posix(){return this.path.then(({posix:e})=>e)}static get fs(){return j(this,se,de).call(this,"fs")}static get url(){return j(this,se,de).call(this,"url")}static get module(){return j(this,se,de).call(this,"module")}};fe=new WeakMap,se=new WeakSet,de=async function(e){if(f(this,fe)[e])return f(this,fe)[e];let t=await Et(()=>import(`node:${e}`),[]);return f(this,fe)[e]=t,t},b(Je,se),b(Je,fe,{});var k=Je;async function Pe(e){let{sep:t,posix:r}=await k.path;return e.split(t).join(r.sep)}async function ye(e){let t=await Cr(e),r=e.split(t);return r.pop(),r.join(t)}function Wr(e){switch(e){case"":return!0;case"/":return!0;case"\\":return!0;default:return!/[/\\]/.test(e)}}async function Cr(e){let{sep:t}=await k.path,r=e.split("/").length-1,n=e.split("\\").length-1;return r>n?"/":n>r?"\\":t}function I(e,t,r){let{mode:n,mutable:s}={mode:"replace",mutable:!0,...r},i=s?e:structuredClone(e);for(let[a,o]of Object.entries(t)){let l=i[a];if(Object.hasOwn(i,a)){Ke(l)&&Ke(o)?I(l,o):n==="replace"&&(i[a]=t[a]);continue}i[a]=t[a]}return s?void 0:i}function be(e,t,r){let n=typeof t=="string"?[t]:t,s=e;for(let[i,a]of n.entries()){if(i===n.length-1){s[a]=r;break}Ke(s[a])||(s[a]={}),s=s[a]}}function Ke(e){return typeof e!="object"?!1:Object.getPrototypeOf(e)===Object.prototype}var Nr=class extends Error{constructor(e){super(e?`Peer dependency \`${e}\` was not found, if it's not already done try installing it.`:"A dependency was not found.")}},Dr=Nr,Ir=class extends Error{constructor(e){super(e?`No file was found for the given path (${e}).`:"No file was found for the given path.")}},It=Ir,Tr=class extends Error{constructor(e=[]){super(e.length>0?`Invalid file type, supported formats are: "${e.join('", "')}"`:"Invalid file type, format not supported.")}},Tt=Tr,Mr=class extends Error{constructor(e){super(e?`Invalid format, could not parse JSON (${e}).`:"Invalid format, could not parse JSON.")}},Fr=Mr;async function M(e){if(!e)return!1;let{existsSync:t,lstatSync:r}=await k.fs;return t(e)&&r(e).isDirectory()}async function Ne(e){if(!e)return!1;let{existsSync:t,lstatSync:r}=await k.fs;return t(e)&&!r(e).isDirectory()}async function Vr(e){let{accessSync:t,constants:r}=await k.fs;try{return t(e,r.R_OK),!0}catch{return!1}}async function Mt(e,t){let{readdirSync:r}=await k.fs,n=r(e);await t(await Pe(e),n);for(let s of n){let i=`${e}/${s}`;await M(i)&&await Mt(i,t)}}async function qr(e){let t=null;t=await Et(()=>import("./main.aFIO1j07.js").then(n=>n.m),__vite__mapDeps([0,1]));let r=/\.(js|cjs|mjs|ts)$/;if(!Ne(e))throw new It(e);if(!r.test(e))throw new Tt(["js","cjs","mjs","ts"]);try{let{outputFiles:n}=await t.build({entryPoints:[e],bundle:!0,external:["esbuild"],format:"cjs",platform:"node",write:!1}),s=new TextDecoder().decode(n[0]?.contents);return s?zr(s,e.replace(r,".cjs")):{}}catch{throw new Dr("esbuild")}}async function ke(e){if(!Ne(e))throw new It(e);if(!/\.json$/.test(e))throw new Tt(["json"]);let{readFileSync:t}=await k.fs,r=t(e,{encoding:"utf8"});try{return JSON.parse(r)}catch{throw new Fr(e)}}async function zr(e,t){let{Module:r}=await k.module,n=t.split("/").slice(0,-1).join("/"),s={module:new r(t),require(i){return this.module.require(i)}};return s.module.paths=r._nodeModulePaths(n),s.module.filename=t,s.module.exports={},s.require=i=>s.module.require(i),Object.assign(s.require,{resolve:i=>r._resolveFilename(i,s.module)}),new Function("exports","require","module","__filename","__dirname",e)(s.module.exports,s.require,s.module,t,n),s.module.exports}var Z="break",Ur=["json","js","cjs","mjs","ts"],Be="i18n",ve="pages",Gr=class extends Error{constructor(){super(`Could not find astro "${ve}" directory.`)}},Jr=Gr,Kr=new m(/(\/[^\s/]+)?(\/[^\s/]+)\.astro$/),Ve=new m(/^---\n([\S\s]+)\n---\n/),Br=new m(/export\s*(?:const\s+prerender|var\s+prerender|let\s+prerender|prerender)(?:\s*=\s*)?(true|false)?|export\s*?{\s*?prerender\s*?}/),Yr=new m(/export\s+(?:async\s+)?(?:function\s+|const\s+|var\s+|let\s+)getStaticPaths|export\s*{\s*getStaticPaths\s*}/),Hr=class{#t;#e;#r;#o;#l;#i=void 0;#n=void 0;#s=null;#a=null;constructor({name:e,route:t,path:r,translations:n,routes:s}){this.#t=e,this.#e=t,this.#r=r,this.#o=n,this.#l=s}get name(){return this.#t}get route(){return this.#e}get path(){return this.#r}get translations(){return this.#o}get routes(){return this.#l}async getContent(){if(this.#s)return this.#s;let{readFileSync:e}=await k.fs;return this.#s=e(this.#r,{encoding:"utf8"}),this.#a=Ve.match(this.#s)?.match[0]||null,this.#s}async getFrontmatter(){return this.#a?this.#a:(this.getContent(),this.#a)}async hasGetStaticPaths(){if(typeof this.#i<"u")return this.#i;let{readFileSync:e}=await k.fs,t=e(this.#r,{encoding:"utf8"}),r=Ve.match(t)?.match[0];return this.#i=r?Yr.test(r):!1,this.#i}async prerender(){if(typeof this.#n<"u")return this.#n;let{readFileSync:e}=await k.fs,t=e(this.#r,{encoding:"utf8"}),r=Ve.match(t)?.match[0];if(!r)return this.#n=!1,this.#n;let{match:n}=Br.match(r)||{};return n?n[1]?this.#n=n[1]==="true":this.#n=!0:this.#n=null,this.#n}async getProxy(e,t){let r=this.path.lastIndexOf("src/pages");if(r=r<0?null:r+9,!r)return null;let n="";e=e.replace(/\/$/,"")||"/";let s=this.#r.slice(r),i=e.split("/").length-1,a=`${"../".repeat(i)}${s.slice(1)}`;if(n+=`---
import Page from "${a}"
`,await this.hasGetStaticPaths()){let{locale:l,route:c}=t.internals.splitLocaleAndRoute(e);n+=`import { getStaticPaths as proxyGetStaticPaths } from "${a}"
/* @ts-ignore */
export const getStaticPaths = (props) => proxyGetStaticPaths({ ...props, astroI18n: `,n+=`{ locale: "${l}", route: "${c}", primaryLocale: "${t.primaryLocale}", secondaryLocales: ["${t.secondaryLocales.join('", "')}"] } })
`}let o=await this.prerender();return typeof o=="boolean"&&(n+=o?`export const prerender = true
`:`export const prerender = false
`),n+=`const { props } = Astro
---
<Page {...props} />`,n}},St=Hr,Zr=class extends Error{constructor(e){super(e?`Invalid pattern (${e.source}) given, the pattern should match the route name at index 1 (optional), the route locale at index 2 and the translated name at index 3 (optional).`:"Invalid pattern given, the pattern should match the route name at index 1 (optional), the route locale at index 2 and the translated name at index 3 (optional).")}},Xr=Zr;function le(e,t=!0){if(t){if(!S(e))return!1;for(let r of Object.values(e))if(!le(r,!1))return!1;return!0}if(typeof e=="string")return!0;if(!S(e))return!1;for(let r of Object.values(e))if(!le(r,!1))return!1;return!0}async function Qr(e,t={}){let{join:r}=await k.path,n=`${e}/${t.srcDir}/${ve}`;if(!await M(n))throw new Jr;let s={},i=(t.secondaryLocales||[]).map(d=>`/${t.srcDir}/${ve}/${d}`),a={i18n:Be,pages:Be,...t.translationDirectory},o=[t.primaryLocale||"en",...t.secondaryLocales||[]],l=m.fromString(`(\\/[^\\/\\s]+)?(?:\\/_?${a.pages})?\\/_?(${o.join("|")})(\\.[^\\.\\s]+)?\\.json$`),c=m.fromString(`_?${a.pages}`),u=t.showPrimaryLocale?r(n,t.primaryLocale||"en"):n;await Mt(u,async(d,p)=>{if(!i.some(g=>d.includes(g)))for(let g of p){let y=`${d}/${g}`;if(await M(y))continue;let O=y.replace(n,"");if(O.endsWith(".astro")){let{match:N,range:Fe}=Kr.match(O)||{};if(!N||!N[2]||!Fe)continue;let T="index",ee="/";if(N[1]?N[2]==="/index"?(T=N[1].replace("/",""),ee=`${O.slice(0,Fe[0])}/${T}`):(T=N[2].replace("/",""),ee=`${O.slice(0,Fe[0]+N[1].length)}/${T}`):N[2]!=="/index"&&(T=N[2].replace("/",""),ee=`/${T}`),T.startsWith("_"))continue;s[ee]={...s[ee],name:T,route:ee,path:y};continue}if(!O.endsWith(".json"))continue;let{match:R,range:mt}=l.match(O)||{};if(!R||!mt)continue;let E=`${O.slice(0,mt[0])}${R[1]||"/"}`;c.test(E)&&(E="/");let Le=R[2]||$(),wt=E.split("/").slice(-1).join("")||"index",yt=R[3]?R[3].replace(".",""):null,Me=await ke(y);Oe(Me,le,`${Le}.PageTranslations`),I(Me,s[E]?.translations?.[Le]||{});let yr={...s[E]?.translations,[Le]:Me},br=yt?{...s[E]?.routes,[Le]:{[wt]:yt}}:{...s[E]?.routes};s[E]={...s[E],name:wt,route:E,translations:yr,routes:br}}});let h=[];for(let d of Object.values(s))!d.path||!d.name||!d.route||h.push({translations:{},routes:{},...d});let w=`${e}/${t.srcDir}/${a.i18n}/${ve}`;if(!await M(w))return h.map(d=>new St(d));for(let d of h){let p=`${w}${d.route}`.replace(/\/$/,"");if(!await M(p))continue;let g=await jt(p,d.name,l);for(let{translations:y,routes:O}of g)I(d.translations,y),I(d.routes,O);if(p=`${p}/${a.pages}`,!!await M(p)){g=await jt(p,d.name,l);for(let{translations:y,routes:O}of g)I(d.translations,y),I(d.routes,O)}}return h.map(d=>new St(d))}async function jt(e,t,r){let{readdirSync:n}=await k.fs,s=[];for(let i of n(e,{encoding:"utf8"})){let{match:a}=r.match(`/${i}`)||{};if(!a)continue;let o=a[2]||_r(new Xr),l=a[3]?a[3].replace(".",""):null,c=await ke(`${e}/${i}`);Oe(c,le,`${o}.PageTranslations`),s.push({translations:{[o]:c},routes:l?{[o]:{[t]:l}}:{}})}return s}var en=class extends Error{constructor(e){super(e?`Unable to find project root. ${e}`:"Unable to find project root.")}},tn=en,rn=m.fromString(`${z}\\.config\\.(${Ur.join("|")})`),nn=m.fromString("astro\\.config\\.(js|cjs|mjs|ts)"),sn=new m(/[/\\]?node_modules/),an=new m(/.+?node_modules/),on=new m(/(?:package|deno)\.json/),ln=new m(/package\.json/),un=new m(/deno\.jsonc?/),cn=new m(/deps\.ts/),qe=".",Y="common",fn=J.fromRegex(rn).assertEnding().build(),Ft=J.fromRegex(nn).assertEnding().build();function hn(e){let t={routes:[],extra:[],common:void 0};for(let r of Object.keys(e)){if(r.startsWith("/")){t.routes.push(r);continue}if(r===Y){t.common=Y;continue}t.extra.push(r)}return t}async function dn(e,t={}){let r=`${e}/${t.srcDir}/${t.translationDirectory?.i18n||Be}`,n={};if(!await M(r))return n;let{readdirSync:s}=await k.fs,i=[t.primaryLocale||"en",...t.secondaryLocales||[]],a=m.fromString(`(${i.join("|")})\\.json`);for(let o of s(r)){if(o===ve)continue;let l=`${r}/${o}`;if(await M(l))for(let c of s(l)){let{match:u}=a.match(c)||{};if(!u?.[1])continue;let h=u[1],w=await ke(`${l}/${c}`);Oe(w,le,`${h}.GroupTranslations`),be(n,[o,h],w)}}return n}async function ze(e){return ie(Vt(e),fn.regexp)}async function pn(e){let t=await ie(Vt(e),Ft.regexp);if(!t)return null;let{readdirSync:r}=await k.fs,n=await ye(t),s=r(n),i=s.find(a=>ln.test(a));if(i){let a=await ke(`${n}/${i}`);if($t(a)&&$t(a.dependencies)&&a.dependencies[z])return n}return s.find(a=>un.test(a))||s.find(a=>cn.test(a))?n:null}async function gn(e){let{readdirSync:t}=await k.fs;return typeof t(e).find(r=>Ft.test(r))=="string"}function Vt(e){let{match:t}=an.match(e)||{};return t?t[0]?.replace(sn.regexp,"")||"/":e}async function ie(e,t,r=1,n=!0){let{readdirSync:s}=await k.fs;if(await Ne(e))return t.test(e)?e:n?ie(await ye(e),t,1,!1):null;if(!await Vr(e)||Wr(e))return null;let i=s(e),a=i.find(l=>t.test(l));if(a)return`${e}/${a}`;if(r>0&&typeof i.find(l=>on.test(l))!="string")return ie(await ye(e),t,1,!1);let o=i.filter(l=>{switch(l){case"node_modules":return!1;case"src":return!1;case"public":return!1;case"dist":return!1;case"build":return!1;default:return!l.startsWith(".")}});for(let l of o){let c=`${e}/${l}`;if(await Ne(e))continue;let u=await ie(c,t,-1,!1);if(typeof u=="string")return u}return r>0?ie(await ye(e),t,1,!1):null}var mn=class extends Error{constructor(){super(`Unable to find ${Lr}.`)}},wn=mn;function yn(e){if(!S(e))return!1;for(let t of Object.values(e)){if(!S(t))return!1;for(let r of Object.values(t))if(typeof r!="string")return!1}return!0}function bn(e){if(!S(e))return!1;for(let t of Object.values(e)){if(!S(t))return!1;for(let r of Object.values(t))if(!le(r))return!1}return!0}function vn(e){if(!xe(e))return!1;for(let t of e){if(!S(t))return!1;let r=Object.entries(t);if(r.length<2)return!1;for(let[n,s]of r)switch(n){case"groups":{if(!$e(s))return!1;break}case"routes":{if(!$e(s))return!1;break}default:return!1}}return!0}function $n(e){if(!S(e))return!1;for(let[t,r]of Object.entries(e))if(t!=="i18n"&&t!=="pages"||typeof r!="string")return!1;return!0}function Sn(e){if(!S(e))return!1;for(let[t,r]of Object.entries(e))switch(t){case"primaryLocale":{if(typeof r!="string")return!1;break}case"secondaryLocales":{if(!$e(r))return!1;break}case"fallbackLocale":{if(typeof r!="string")return!1;break}case"showPrimaryLocale":{if(typeof r!="boolean")return!1;break}case"trailingSlash":{if(r!=="always"&&r!=="never")return!1;break}case"run":{if(r!=="server"&&r!=="client+server")return!1;break}case"translations":{if(!bn(r))return!1;break}case"translationLoadingRules":{if(!vn(r))return!1;break}case"translationDirectory":{if(!$n(r))return!1;break}case"routes":{if(!yn(r))return!1;break}case"srcDir":{if(typeof r!="string")return!1;break}default:return!1}return!0}function jn(e){if(!S(e))return!1;for(let[t,r]of Object.entries(e))switch(t){case"primaryLocale":{if(typeof r!="string")return!1;break}case"secondaryLocales":{if(!$e(r))return!1;break}case"showPrimaryLocale":{if(typeof r!="boolean")return!1;break}case"trailingSlash":{if(r!=="always"&&r!=="never")return!1;break}default:return!1}return!0}var On=class extends Error{constructor(e){super(e?`Your primaryLocale ("${e}") cannot be contained in your secondaryLocales array.`:"Your primaryLocale cannot be contained in your secondaryLocales array.")}},xn=On,qt=class{primaryLocale;secondaryLocales;fallbackLocale;showPrimaryLocale;trailingSlash;run;translations;translationLoadingRules;translationDirectory;routes;path;srcDir;constructor({primaryLocale:e,secondaryLocales:t,fallbackLocale:r,showPrimaryLocale:n,trailingSlash:s,run:i,translations:a,translationLoadingRules:o,translationDirectory:l,routes:c,srcDir:u}={},h=""){if(this.primaryLocale=e||"en",this.secondaryLocales=t||[],this.fallbackLocale=r??(e||""),this.showPrimaryLocale=n||!1,this.trailingSlash=s||"never",this.run=i||"client+server",this.translations=a||{},this.translationLoadingRules=o||[],this.translationDirectory=l||{},this.routes=c||{},this.path=h||"",this.srcDir=u||"src",this.secondaryLocales.includes(this.primaryLocale))throw new xn(this.primaryLocale)}get pages(){return Object.keys(this.translations).filter(e=>e.startsWith("/"))}static async fromFilesystem(e=null){let{fileURLToPath:t}=await k.url;if(!e){let n="";typeof process<"u"&&(n=Or.PWD||""),e=await ze(await Pe(n))}if(!e){let n="";typeof process<"u"&&(n=process.cwd()),e=await ze(await Pe(n))}if(!e){let n="";typeof import.meta=="object"&&typeof import.meta.url=="string"?n=t(import.meta.url):typeof __filename=="string"&&(n=__filename),n&&(e=await ze(await Pe(n)))}if(!e)throw new wn;let r=e.endsWith(".json")?await ke(e):(await qr(e)).default;return Oe(r,Sn,"AstroI18nConfig"),new qt(r,e).loadFilesystemTranslations()}async loadFilesystemTranslations(){if(!this.path)return this;let e=await ye(this.path);if(!await gn(e)){let n=await pn(this.path);if(!n)throw new tn;e=n}let t=await Qr(e,this);for(let n of t)this.translations[n.route]||(this.translations[n.route]={}),I(this.translations[n.route]||$(),n.translations),this.routes||(this.routes={}),I(this.routes,n.routes);let r=await dn(e,this);return I(this.translations,r),this}toClientSideObject(){return{primaryLocale:this.primaryLocale,secondaryLocales:this.secondaryLocales,showPrimaryLocale:this.showPrimaryLocale,trailingSlash:this.trailingSlash}}toObject(){return{primaryLocale:this.primaryLocale,secondaryLocales:this.secondaryLocales,fallbackLocale:this.fallbackLocale,showPrimaryLocale:this.showPrimaryLocale,trailingSlash:this.trailingSlash,run:this.run,translations:this.translations,translationLoadingRules:this.translationLoadingRules,translationDirectory:this.translationDirectory,routes:this.routes}}toString(){return JSON.stringify(this.toObject(),null,"	")}},pe=qt,zt=(e=>(e.NONE="none",e.NODE="node",e.BROWSER="browser",e))(zt||{}),te=zt,kn=new m(/[$A-Z_a-z]/),pt=J.fromRegex(kn).appendPattern("[\\w$]*").build(),Ln=new m(/-?\d+(?:\.\d+)?/),Rn=new m(/^\s*$/),Ot=new m(/{{(.+)}}/),Ut=new m(/{#(.+?)#}/),Pn=m.fromString(`\\(\\s*(${pt.source})\\s*\\)`),_n=m.fromString(`>\\s*(${pt.source})\\s*(\\()?`),En=new m(/(?:function)?\s*[\w$]*\s*\(([\S\s]*?)\)\s*(?:=>)?\s*{?([\S\s]*)/),An=class extends Error{constructor(e=""){if(e){let t=e.slice(0,20);t.length===20&&(e=`${t.slice(0,17)}...`)}super(e?`Cannot parse unknown value (${e}).`:"Cannot parse unknown value")}},Gt=An,Wn=class extends Error{constructor(e=""){super(e?`Cannot procces untrimmed value ("${e}").`:"Cannot procces untrimmed value")}},Jt=Wn,Kt=J.fromRegex(Ln).assertStarting().build().toMatcher(),Bt=J.fromRegex(pt).assertStarting().build().toMatcher();function Cn(e){return Rn.test(e)?{range:[0,0],match:[""]}:null}function Yt(e){return e.startsWith("undefined")?{range:[0,9],match:["undefined"]}:null}function Ht(e){return e.startsWith("null")?{range:[0,4],match:["null"]}:null}function Zt(e){return e.startsWith("true")?{range:[0,4],match:["true"]}:e.startsWith("false")?{range:[0,5],match:["false"]}:null}function Xt(e){let t=e[0];if(t!=='"'&&t!=="'"&&t!=="`")return null;let r=e.slice(1).indexOf(t);return r===-1?null:(r+=2,{range:[0,r],match:[e.slice(0,r)]})}function Nn(e){if(!e.startsWith("{"))return null;let t=0;for(let r=0;r<e.length;r+=1){let n=e[r];if(n==="{"?t+=1:n==="}"&&(t-=1),t===0){let s=r+1;return{range:[0,s],match:[e.slice(0,s)]}}}return null}function Qt(e){if(!e.startsWith("["))return null;let t=0;for(let r=0;r<e.length;r+=1){let n=e[r];if(n==="["?t+=1:n==="]"&&(t-=1),t===0){let s=r+1;return{range:[0,s],match:[e.slice(0,s)]}}}return null}function X(e,t){let r=0,n=!1,s=null;for(let i=0;i<e.length;i+=1){let a=e[i]||$(),o=a==='"'||a==="'"||a==="`",l=!1,c=!1;if(a==="{"||a==="["?(r+=1,l=!0):a==="}"||a==="]"?(r-=1,c=!0):!n&&o?(r+=1,n=!0,s=a,l=!0):n&&a===s&&(r-=1,n=!1,s=null,c=!0),t(a,i,r,l,c)===Z)break}}var Dn=J.fromRegex(Pn).assertStarting().build().toMatcher(),In=J.fromRegex(_n).assertStarting().build().toMatcher();function er(e){e=e.trim();let t=e,{value:r,type:n,end:s}=Tn(e);e=e.slice(s).trim();let i=null,a=Dn(e);if(a){let{match:l,range:c}=a;i=l[1]||$(),e=e.slice(c[1]).trim()}let o=[];for(;e.length>0;){e[0]===")"&&(e=e.slice(1));let{match:l,range:c}=In(e)||{};if(!l?.[1]||!c)break;if(e=e.slice(c[1]).trim(),!l[2]){o.push({name:l[1],args:[]});continue}let{args:u,end:h}=Mn(e);e=e.slice(h).trim(),o.push({name:l[1],args:u})}return{raw:t,value:r,type:n,alias:i,formatters:o}}function re(e){let t=[];e=e.trim();let{type:r,value:n,alias:s,formatters:i}=er(e);for(let a of i)for(let o of a.args)for(let l of re(o))t.push(l);switch(r){case 4:{t.push(s||n);break}case 6:{let a="",o=!0;X(e,(l,c,u,h)=>{if(u===0){for(let w of re(a))t.push(w);return Z}if(o){if(h&&l==="{"||/\s/.test(l))return null;if(l===":")return o=!1,null}else if(l===","){for(let w of re(a))t.push(w);return a="",o=!0,null}return o||(a+=l),null});break}case 7:{let a="";X(e,(o,l,c,u)=>{if(c===0){for(let h of re(a))t.push(h);return Z}if(u&&o==="[")return null;if(o===","){for(let h of re(a))t.push(h);return a="",null}return a+=o,null});break}}return t}function Tn(e){if(/^\s+\S/.test(e))throw new Jt(e);let t=Cn(e);if(t)return{value:"undefined",type:0,end:t.range[1]};if(t=Yt(e),t)return{value:t.match[0]||$(),type:0,end:t.range[1]};if(t=Ht(e),t)return{value:t.match[0]||$(),type:1,end:t.range[1]};if(t=Zt(e),t)return{value:t.match[0]||$(),type:2,end:t.range[1]};if(t=Kt(e),t)return{value:t.match[0]||$(),type:3,end:t.range[1]};if(t=Bt(e),t)return{value:t.match[0]||$(),type:4,end:t.range[1]};if(t=Xt(e),t)return{value:t.match[0]||$(),type:5,end:t.range[1]};if(t=Nn(e),t)return{value:t.match[0]||$(),type:6,end:t.range[1]};if(t=Qt(e),t)return{value:t.match[0]||$(),type:7,end:t.range[1]};throw new Gt(e)}function Mn(e){let t={args:[],end:0},r="",n=!1;return X(e,(s,i,a)=>(s==="("&&(n=!0),a>0?(r+=s,null):s===","?(t.args.push(r.trim()),r="",null):s===")"?(n&&(r+=s),t.args.push(r.trim()),t.end=i+1,r="",Z):(r+=s,null))),t}function Fn(e,t,r,n,s,i){let a;switch(r){case 0:{a=void 0;break}case 1:{a=null;break}case 2:{if(e==="true"){a=!0;break}if(e==="false"){a=!1;break}}case 3:{a=e.includes(".")?Number.parseFloat(e):Number.parseInt(e,10);break}case 4:{if(t){a=s[t];break}a=s[e];break}case 5:{a=e.slice(1,-1);break}case 6:{a=Vn(e,s,i);break}case 7:{a=qn(e,s,i);break}default:throw new Gt(e)}for(let{name:o,args:l}of n){let c=i[o];if(!c)return;let u=l.map(h=>new ue(h,s,i).value);a=c(a,...u)}return a}function Vn(e,t,r){let n={},s="",i="",a=!0;return X(e,(o,l,c,u)=>{if(c===0)return n[s]=new ue(i,t,r).value,Z;if(c===1){if(a){if(u||/\s/.test(o))return null;if(o===":")return a=!1,null;s+=o}else if(o===",")return n[s]=new ue(i,t,r).value,s="",i="",a=!0,null}return a||(i+=o),null}),n}function qn(e,t,r){let n=[],s="";return X(e,(i,a,o,l)=>{if(o===0)return n.push(new ue(s,t,r).value),Z;if(o===1){if(l)return null;if(i===",")return n.push(new ue(s,t,r).value),s="",null}return s+=i,null}),n}var zn=class{raw;value;alias=null;constructor(e,t,r){let{raw:n,value:s,type:i,alias:a,formatters:o}=er(e);this.raw=n,this.alias=a,this.value=Fn(s,a,i,o,t,r)}},ue=zn,Un=class extends Error{constructor(e){super(e?`Variant priority must be of type number (found: (${e})).`:"Variant priority must be of type number.")}},Gn=Un,Jn=class extends Error{constructor(e){super(e?`Invalid variant property key (${e}), it must be a valid variable name.`:"Invalid variant property value, it must be a valid variable name.")}},Kn=Jn,xt="undefined, null, number, string, boolean and flat arrays of these types.",Bn=class extends Error{constructor(e){super(e?`Invalid variant property value (${e}), accepted types are: ${xt}.`:`Invalid variant property value, accepted types are: ${xt}.`)}},Te=Bn;function Ye(e){if(/^\s/.test(e))throw new Jt(e);let t=Yt(e);if(t)return{value:t.match[0]||$(),type:0,end:t.range[1]};if(t=Ht(e),t)return{value:t.match[0]||$(),type:1,end:t.range[1]};if(t=Zt(e),t)return{value:t.match[0]||$(),type:2,end:t.range[1]};if(t=Kt(e),t)return{value:t.match[0]||$(),type:3,end:t.range[1]};if(t=Xt(e),t)return{value:t.match[0]||$(),type:5,end:t.range[1]};if(t=Qt(e),t)return{value:t.match[0]||$(),type:7,end:t.range[1]};throw new Te(e)}function tr(e){return e===null||typeof e>"u"||typeof e=="boolean"||typeof e=="number"||typeof e=="string"}function Yn(e){return Array.isArray(e)?e.every(t=>tr(t)):!1}function De(e,t){let r;switch(t){case 0:{r=void 0;break}case 1:{r=null;break}case 2:{if(e==="true"){r=!0;break}if(e==="false"){r=!1;break}}case 3:{r=e.includes(".")?Number.parseFloat(e):Number.parseInt(e,10);break}case 5:{r=e.slice(1,-1);break}case 7:{r=Hn(e);break}default:throw new Te(e)}return r}function Hn(e){let t=[],r="";return X(e,(n,s,i,a)=>{if(i===0){let{value:o,type:l}=Ye(r.trim()),c=De(o,l);if(!tr(c))throw new Te(r);return t.push(c),Z}if(i===1){if(a)return null;if(n===","){let{value:o,type:l}=Ye(r.trim());return t.push(De(o,l)),r="",null}}return r+=n,null}),t}var Zn="$priority",rr=class{raw;priority;properties;value;constructor({raw:e,priority:t,properties:r,value:n}={}){this.raw=e||"",this.priority=t||0,this.properties=r||[],this.value=n||""}static fromString(e,t){let r=new rr;r.value=t;let n=e.trim();r.raw=n;let s="",i="",a=!0;return X(n,(o,l,c)=>{let u=l===n.length-1;if(a)return/\s/.test(o)?null:o===":"?(a=!1,null):(s+=o,null);if(c>0)return i+=o,null;if(u&&(i+=o),o===","||u){let h=Bt(s.trim())?.match[0];if(!h)throw new Kn(s);let{value:w,type:d}=Ye(i.trim());if(h===Zn){let y=De(w,d);if(typeof y!="number")throw new Gn(w);return r.priority=y*.001,null}let p=De(w,d),g=Array.isArray(p)?p:[p];if(!Yn(g))throw new Te(i);return r.properties.push({name:h,values:g}),s="",i="",a=!0,null}return i+=o,null}),r}calculateMatchingScore(e){let t=0;for(let{name:r,values:n}of this.properties){if(!Object.hasOwn(e,r))continue;let s=e[r],i=[];for(let a of n){if(typeof s=="number"&&typeof a=="number"){let o=s-a;if(o===0){i.push(1e3);continue}i.push(Math.abs(1e3/o)-1);continue}s===a&&i.push(1e3)}i.length!==0&&(t+=Math.max(...i))}return t>0?t+this.priority:t}},He=rr,Xn=class extends Error{constructor(){super("Cannot use a variant on a key which value is not a string.")}},Qn=Xn;function nr(e,t="",r={}){for(let[n,s]of Object.entries(e)){if(typeof s=="string"){let{match:i,range:a}=Ot.match(n)||{};if(!i?.[1]||!a){let l=`${t}${qe}${n}`.replace(/^\./,"");if(r[l]){r[l].default=s;continue}r[l]={default:s,variants:[]};continue}let o=`${t}${qe}${n.slice(0,a[0])+n.slice(a[1])}`.replace(/^\./,"");if(r[o]){r[o].variants.push(He.fromString(i[1],s));continue}r[o]={variants:[He.fromString(i[1],s)]};continue}if(Ot.test(n))throw new Qn;nr(s,`${t}${qe}${n}`.replace(/^\./,""),r)}return r}function es(e,t,r){let n=[];Ut.exec(e,({match:i,range:a})=>{if(!i[1])return;let{value:o}=new ue(i[1],t,r);n.push({value:ts(o),range:a})});let s=e;for(let i=n.length-1;i>=0;i-=1){let{value:a,range:o}=n[i]||$();s=s.slice(0,o[0])+a+s.slice(o[1])}return s}function ts(e){switch(typeof e){case"undefined":return"";case"string":return e;case"bigint":return e.toString();case"number":return e.toString();case"boolean":return e.toString();case"symbol":return`Symbol(${e.description})`||"Symbol";case"function":return e.name;case"object":return e?Object.hasOwn(e,"toString")&&typeof e.toString=="function"?e.toString():JSON.stringify(e,null,"	"):"";default:return""}}function rs(e){for(let t of Object.values(e))for(let r of Object.values(t))for(let n of Object.values(r))n.variants=n.variants.map(s=>new He(s));return e}var gt=new m(/\[(\.{3})?([\w-]+)]/),ns=new m(/(?:https?:\/{2})?[\w#%+.:=@~-]{1,256}\.[\d()A-Za-z]{1,6}\b[\w#%&()+./:=?@~-]*/),sr=class{#t={};#e;constructor(e={},t={}){this.#e=e,this.#t=t}static fromConfig({translations:e,translationLoadingRules:t}){return new sr().addTranslations(e).addTranslationLoadingRules(t)}get(e,t,r,n="",s={},i={},a=!1){let o=this.#r(e,t,r,a);!o&&n&&n!==r&&(o=this.#r(e,t,n,a));let l={score:0,value:o?.default||e};for(let c of o?.variants||[]){let u=c.calculateMatchingScore(s);u>l.score&&(l.score=u,l.value=c.value)}return es(l.value,s,i)}getRouteGroups(){return Object.keys(this.#e).filter(e=>e.startsWith("/"))}getParamRouteGroups(){return Object.keys(this.#e).filter(e=>e.startsWith("/")&&gt.test(e))}getLocaleTranslationVariables(e){let t={};for(let r of Object.values(this.#e)){if(!r[e])continue;let n=Object.entries(r[e]||$());for(let[s,{default:i,variants:a}]of n){let o={interpolationVars:[],variantVars:[],isVariantRequired:!1},l=[];if(i===void 0?o.isVariantRequired=!0:l.push(i),a.length>0){let p={};for(let{value:g,properties:y}of a){l.push(g);for(let{name:O,values:R}of y)p[O]=[...p[O]||[],...R]}o.variantVars=Object.entries(p).map(([g,y])=>({name:g,values:y}))}for(let p of l)Ut.exec(p,({match:g})=>{g[1]&&(o.interpolationVars=[...new Set([...o.interpolationVars,...re(g[1])])])});if(!t[s]){t[s]=o;continue}let{interpolationVars:c,variantVars:u,isVariantRequired:h}=t[s]||{},w=[...new Set([...c||[],...o.interpolationVars])],d=[];for(let p of o.variantVars){let g=u?.find(y=>y.name===p.name);d.push(g?{name:p.name,values:[...new Set([...g?.values||[],...p.values])]}:p)}t[s]={interpolationVars:w,variantVars:d,isVariantRequired:(h||!1)&&o.isVariantRequired}}}return t}addTranslations(e){for(let[t,r]of Object.entries(e)){let n=Object.entries(r);if(n.length===0&&!this.#e[t]){this.#e[t]={};continue}for(let[s,i]of n)be(this.#e,[t,s],nr(i))}return this}addTranslationLoadingRules(e){if(e.length===0)return this;let{routes:t}=hn(this.#e);for(let r of e){let n=[];for(let s of r.groups){let i=m.fromString(s);n.push(...Object.keys(this.#e).filter(a=>i.test(a)))}for(let s of r.routes){let i=m.fromString(s),a=t.filter(o=>i.test(o));for(let o of a){if(!this.#t[o]){this.#t[o]=[...new Set(n)];continue}this.#t[o]=[...new Set([...this.#t[o]||$(),...n])]}}}return this}clear(){this.#t={},this.#e={}}toClientSideObject(e){let t={};if(this.#t[e])for(let r of this.#t[e]||$())t[r]=this.#e[r]||{};return this.#e[e]&&(t[e]=this.#e[e]||{}),this.#e[Y]&&(t[Y]=this.#e[Y]||{}),t}toObject(){return{loadDirectives:this.#t,translations:this.#e}}toString(){return JSON.stringify(this.toObject(),null,"	")}#r(e,t,r,n=!1){let s=null;if(n){let i=this.getRouteGroups();for(let a of i)for(let o of this.#t[a]||[]){let l=this.#e[o]?.[r]?.[e];if(l){s=l;break}}if(!s)for(let a of i)this.#e[a]?.[r]?.[e]&&(s=this.#e[a]?.[r]?.[e]||$())}else{for(let i of this.#t[t]||[]){let a=this.#e[i]?.[r]?.[e];if(a){s=a;break}}!s&&this.#e[t]?.[r]?.[e]&&(s=this.#e[t]?.[r]?.[e]||$())}return!s&&this.#e[Y]?.[r]?.[e]&&(s=this.#e[Y]?.[r]?.[e]||$()),s}},Ze=sr,ss=class extends Error{constructor(e){super(e?`Invalid date (${e}).`:"Invalid date.")}},is=ss,as=class extends TypeError{constructor(e,t){e?super(t?`Invalid formatter (${t}) parameter: ${e}`:`Invalid formatter parameter: ${e}`):super(t?`Invalid formatter (${t}) parameter.`:"Invalid formatter parameter.")}},Se=as,os=class extends TypeError{constructor(e,t){e?super(t?`Invalid formatter (${t}) value: ${e}`:`Invalid formatter value: ${e}`):super(t?`Invalid formatter (${t}) value.`:"Invalid formatter value.")}},ce=os;function kt(e){if(typeof e!="string")throw new ce(`Received value is not a string, found "${e}".`,"upper");return e.toUpperCase()}function Lt(e){if(typeof e!="string")throw new ce(`Received value is not a string, found "${e}".`,"lower");return e.toLowerCase()}function ls(e){if(typeof e!="string")throw new ce(`Received value is not a string, found "${e}".`,"capitalize");return`${e.slice(0,1).toUpperCase()}${e.slice(1).toLowerCase()}`}function us(e,t){return e??t}function Rt(e,t){return e||t}function cs(e,t){return typeof e=="string"?e:t}function fs(e,t=!0){if(typeof e=="symbol")throw new ce(`Received value cannot be a symbol, found "${e.toString()}".`,"json");if(typeof t!="boolean")throw new Se(`format must be a boolean, found "${t}".`,"json");return t?JSON.stringify(e,null,"	"):JSON.stringify(e)}function hs(e,t={},r=U.locale){if(typeof e=="string"&&(e=Number.parseFloat(e)),!Er(e))throw new ce(`Received value is not a number, found "${e}".`,"intl_format_number");if(!S(t))throw new Se(`options must be an object, found "${t}".`,"intl_format_number");if(typeof r!="string")throw new Se(`locale must be a string, found "${r}".`,"intl_format_number");return new Intl.NumberFormat(r,t).format(e)}function ds(e,t={},r=U.locale){if(typeof e!="string"&&typeof e!="number"&&!(e instanceof Date))throw new ce(`Received value is not a string, number or Date, found "${e}".`,"intl_format_date");if(e=e instanceof Date?e:new Date(e),!Ar(e))throw new is(e);if(!S(t))throw new Se(`options must be an object, found "${t}".`,"intl_format_date");if(typeof r!="string")throw new Se(`locale must be a string, found "${r}".`,"intl_format_date");return new Intl.DateTimeFormat(r,t)}var ps=J.fromRegex(En).assertStarting().assertEnding().build().toMatcher();function gs(e){let t=ps(e.toString());if(!t)return{args:[],body:""};let[,r,n]=t.match;return{args:ws(r||""),body:ys(n||"")}}function ms(e){let t={};for(let[r,n]of Object.entries(e))t[r]=new Function(...n.args,n.body);return t}function ws(e){return e.trim().split(",").map(t=>t.trim())}function ys(e){return e.trim().endsWith("}")?e.slice(0,-1):e}var bs=class{#t={upper:kt,uppercase:kt,lower:Lt,lowercase:Lt,capitalize:ls,json:fs,default_nullish:us,default:Rt,default_falsy:Rt,default_non_string:cs,intl_format_number:hs,intl_format_date:ds};#e;#r;constructor(e={}){this.#e=e,this.#r={...this.#t,...this.#e}}get default(){return this.#t}get custom(){return this.#e}addFormaters(e){for(let[t,r]of Object.entries(e))this.#r[t]||(this.#r[t]=r,this.#e[t]=r);return this}clear(){this.#e={},this.#r={}}toClientSideObject(){let e={};for(let[t,r]of Object.entries(this.#e))e[t]=gs(r);return e}toObject(){return this.#r}toString(){return JSON.stringify(this.toObject(),null,"	")}},Xe=bs,vs=class extends Error{constructor(e){super(e?`Invalid environment: ${e}`:"Invalid environment.")}},$s=vs,ir=class{#t;#e;constructor(e={},t=""){this.#e=e,this.#t=t}static fromConfig({routes:e,primaryLocale:t}){return new ir({},t).addSegments(e)}get(e,t,r){return this.#e[t]?.[e]?.[r]||null}getSegmentLocales(e){let t=[];for(let[r,n]of Object.entries(this.#e))n[e]&&t.push(r);return t}addSegments(e){let t=Object.entries(e);for(let[r,n]of t){let s=t.filter(([i])=>i!==r&&i!==this.#t);for(let[i,a]of Object.entries(n)){be(this.#e,[this.#t,i,r],a),be(this.#e,[r,a,this.#t],i);for(let[o,l]of s)l[i]&&be(this.#e,[r,a,o],l[i])}}return this}clear(){this.#t="",this.#e={}}toClientSideObject(){return{...this.#e}}toObject(){return{primaryLocale:this.#t,segments:this.#e}}toString(){return JSON.stringify(this.toObject(),null,"	")}},Qe=ir,Ss=class extends Error{constructor(){super("Cannot initialize astro-i18n, it already has been initialized.")}},js=Ss,Os=class extends Error{constructor(e){super(e?`Cannot use filesystem: ${e}`:"Cannot use filesystem.")}},xs=Os,ks=class extends Error{constructor(){super(`Could not find the serialized ${z} state in the DOM. Check your ${z} config.`)}},Ls=ks;function Rs(e){if(!S(e))return!1;for(let t of Object.values(e)){if(!S(t))return!1;for(let r of Object.values(t)){if(!S(r))return!1;for(let n of Object.values(r))if(typeof n!="string")return!1}}return!0}function Ps(e){if(!S(e))return!1;for(let t of Object.values(e)){if(!S(t))return!1;let r=Object.entries(t);if(r.length<2)return!1;for(let[n,s]of r)switch(n){case"args":{if(!$e(s))return!1;break}case"body":{if(typeof s!="string")return!1;break}}}return!0}function _s(e){if(!S(e))return!1;for(let t of Object.values(e)){if(!S(t))return!1;for(let r of Object.values(t))if(!Es(r))return!1}return!0}function Es(e){if(!S(e))return!1;for(let t of Object.values(e)){if(!S(t))return!1;for(let[r,n]of Object.entries(t))switch(r){case"default":{if(typeof n!="string")return!1;break}case"variants":{if(!xe(n)||!n.every(s=>As(s)))return!1;break}default:return!1}}return!0}function As(e){if(!S(e))return!1;let t=Object.entries(e);if(t.length<4)return!1;for(let[r,n]of t)switch(r){case"raw":{if(typeof n!="string")return!1;break}case"priority":{if(typeof n!="number")return!1;break}case"properties":{if(!xe(n)||!n.every(s=>Ws(s)))return!1;break}case"value":{if(typeof n!="string")return!1;break}default:return!1}return!0}function Ws(e){if(!S(e))return!1;let t=Object.entries(e);if(t.length<2)return!1;for(let[r,n]of t)switch(r){case"name":{if(typeof n!="string")return!1;break}case"values":{if(!xe(n)||!n.every(s=>typeof s=="boolean"||typeof s=="string"||typeof s=="number"||s==null))return!1;break}default:return!1}return!0}function Cs(e){if(!S(e))return!1;let t=Object.entries(e);if(t.length<5)return!1;for(let[r,n]of t)switch(r){case"locale":{if(typeof n!="string")return!1;break}case"route":{if(typeof n!="string")return!1;break}case"config":{if(!jn(n))return!1;break}case"translations":{if(!_s(n))return!1;break}case"segments":{if(!Rs(n))return!1;break}case"formatters":{if(!Ps(n))return!1;break}default:return!1}return!0}function Pt(e){return ns.test(e)}function Ns(e){let t="",r=0;return gt.exec(e,({match:n,range:[s,i]})=>{if(t+=e.slice(r,s),!n[2]){r=i;return}t+=n[1]?"[\\w/-]+":"[\\w-]+",r=i}),t+=e.slice(r),m.fromString(t.replaceAll("/","\\/"))}var Ds=class extends Error{constructor(){super("Cannot perform operation, astro-i18n is not initialized.")}},_t=Ds,Is=class extends Error{constructor(){super("Could not redirect, is this code running in the server ?")}},Ts=Is,Re,K,F,V,x,L,_,C,W,q,B,A,ae,et,ar,tt,or,rt,lr,nt,ur,st,cr,ge,_e,Ee,it,Ae,at,me,We,Ce,ot,lt,fr,ut,hr,ct=class{constructor(){b(this,et),b(this,tt),b(this,rt),b(this,nt),b(this,st),b(this,ge),b(this,Ee),b(this,Ae),b(this,me),b(this,Ce),b(this,lt),b(this,ut),b(this,K,void 0),b(this,F,""),b(this,V,""),b(this,x,new pe),b(this,L,new Ze),b(this,_,new Qe),b(this,C,new Xe),b(this,W,!1),b(this,q,!1),b(this,B,{}),b(this,A,null),b(this,ae,""),typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node<"u"?v(this,K,te.NODE):typeof window>"u"?v(this,K,te.NONE):(v(this,K,te.BROWSER),f(this,x).run==="client+server"&&j(this,et,ar).call(this))}get environment(){return f(this,K).toString()}get route(){return f(this,q)?"":f(this,V)}set route(e){Pt(e)&&(e=new URL(e).pathname),e=decodeURI(e);let{locale:t,route:r}=j(this,me,We).call(this,e);v(this,V,r),v(this,F,t||j(this,Ae,at).call(this,j(this,Ce,ot).call(this,r))||this.primaryLocale)}get pages(){return f(this,L).getRouteGroups()}get page(){return j(this,ge,_e).call(this,this.route)}get locale(){return f(this,F)}get locales(){return[f(this,x).primaryLocale,...f(this,x).secondaryLocales]}get primaryLocale(){return f(this,x).primaryLocale}get secondaryLocales(){return f(this,x).secondaryLocales}get fallbackLocale(){return f(this,x).fallbackLocale}get isInitialized(){return f(this,W)}get internals(){return{toHtml:j(this,lt,fr).bind(this),config:f(this,x),segments:f(this,_),translations:f(this,L),splitLocaleAndRoute:j(this,me,We).bind(this),toString:j(this,ut,hr).bind(this),waitInitialization:j(this,tt,or).bind(this),setPrivateProperties:j(this,st,cr).bind(this),reinitalize:j(this,rt,lr).bind(this),getAndClearRedirection:j(this,nt,ur).bind(this)}}t(e,t={},r={}){if(!f(this,W))throw new _t;let{route:n,locale:s,fallbackLocale:i}=r;if(f(this,q))return f(this,L).get(e,"",s||this.locale,i||this.fallbackLocale,t,f(this,C).toObject(),!0);let a=n?j(this,ge,_e).call(this,n):j(this,ge,_e).call(this,this.route);return f(this,L).get(e,a||"",s||this.locale,i||this.fallbackLocale,t,f(this,C).toObject())}l(e,t={},r={}){if(!f(this,W))throw new _t;let{targetLocale:n,routeLocale:s,showPrimaryLocale:i,query:a}=r,o=j(this,Ce,ot).call(this,decodeURI(e)),l=this.locales.includes(o[0]||"")&&o.shift()||"",c=s||l||j(this,Ae,at).call(this,o)||this.primaryLocale,u=n||this.locale,h=o.map(g=>f(this,_).get(g,c,u)||g).join("/"),w=Object.entries(t);if(w.length>0)for(let[g,y]of w)h=h.replace(`[${g}]`,String(y).replace("/",""));if((i===void 0?f(this,x).showPrimaryLocale||u!==this.primaryLocale:i)&&(h=h?`${u}/${h}`:u),f(this,x).trailingSlash==="always"&&(h+="/"),h=h.startsWith("/")?h:`/${h}`,!a)return h;let d={};for(let[g,y]of Object.entries(a))d[g]=String(y);let p=new URLSearchParams(d).toString();return p?`${h}?${p}`:h}addTranslations(e){return f(this,L).addTranslations(e),j(this,Ee,it).call(this),this}addFormatters(e){return f(this,C).addFormaters(e),this}addTranslationLoadingRules(e){return f(this,L).addTranslationLoadingRules(e),this}addRoutes(e){return f(this,_).addSegments(e),j(this,Ee,it).call(this),this}extractRouteLocale(e){return j(this,me,We).call(this,e).locale}redirect(e,t=301){if(this.environment===te.BROWSER)throw new Ts;if(typeof e=="string"){let r=Pt(e)?new URL(e):new URL(`${f(this,ae)}/${e.replace(/^\//,"")}`);v(this,A,Response.redirect(r,t));return}v(this,A,Response.redirect(e,t))}async initialize(e=void 0,t={}){if(f(this,W))throw new js;switch(f(this,K)){case te.NODE:{v(this,x,typeof e=="object"?await new pe(e).loadFilesystemTranslations():await pe.fromFilesystem(e));break}case te.NONE:{if(typeof e=="string")throw new xs("Cannot load config from filesystem in a non-node environment.");v(this,x,new pe(e||{}));break}default:throw new $s("Cannot initialize in a browser environment.")}v(this,L,Ze.fromConfig(f(this,x))),v(this,_,Qe.fromConfig(f(this,x))),v(this,C,new Xe(t)),v(this,W,!0)}},dr=ct;Re=new WeakMap,K=new WeakMap,F=new WeakMap,V=new WeakMap,x=new WeakMap,L=new WeakMap,_=new WeakMap,C=new WeakMap,W=new WeakMap,q=new WeakMap,B=new WeakMap,A=new WeakMap,ae=new WeakMap,et=new WeakSet,ar=function(){let e=document.querySelector(`#${f(ct,Re)}`);if(!e||!e.textContent)throw new Ls;let t=JSON.parse(e.textContent);Oe(t,Cs),v(this,F,t.locale),v(this,V,t.route),v(this,x,new pe(t.config)),v(this,L,new Ze(rs(t.translations))),v(this,_,new Qe(t.segments,t.config.primaryLocale)),v(this,C,new Xe(ms(t.formatters))),v(this,W,!0),e.remove()},tt=new WeakSet,or=async function(){let e=t=>{f(this,W)?t():setTimeout(()=>e(t),25)};return new Promise(e)},rt=new WeakSet,lr=async function(e=void 0,t={}){v(this,W,!1),f(this,L).clear(),f(this,_).clear(),f(this,C).clear(),await this.initialize(e,t)},nt=new WeakSet,ur=function(){let e=f(this,A);return v(this,A,null),e},st=new WeakSet,cr=function(e={}){let{route:t,locale:r,isGetStaticPaths:n,origin:s}={route:f(this,V),locale:f(this,F),isGetStaticPaths:f(this,q),origin:f(this,ae),...e};v(this,V,t),v(this,F,r),v(this,q,n),v(this,ae,s)},ge=new WeakSet,_e=function(e){if(f(this,q))return null;if(f(this,B)[e])return f(this,B)[e]||$();let t=this.l(e,void 0,{targetLocale:this.primaryLocale});if(this.pages.includes(t))return t;let r=null;for(let n of this.pages)if(gt.test(n)&&Ns(n).test(e)){r=n;break}return!r||!this.pages.includes(r)?null:(f(this,B)[e]=r,r)},Ee=new WeakSet,it=function(){v(this,B,{})},Ae=new WeakSet,at=function(e){let t={};for(let n of e)for(let s of f(this,_).getSegmentLocales(n))t[s]||(t[s]=0),t[s]+=1;let r={locale:"",score:0,isExAequo:!0};for(let[n,s]of Object.entries(t)){if(s>r.score){r.locale=n,r.score=s,r.isExAequo=!1;continue}s===r.score&&(r.isExAequo=!0)}return r.isExAequo?null:r.locale||null},me=new WeakSet,We=function(e){e.startsWith("/")||(e=`/${e}`);let t=m.fromString(`\\/(${this.locales.join("|")})(?:\\/.*)?$`),{match:r}=t.match(e)||{},n=r?.[1]||null;return{locale:n,route:n?e.replace(`/${n}`,"").replace(/\/$/,"")||"/":e.replace(/\/$/,"")||"/"}},Ce=new WeakSet,ot=function(e){return e.replace(/^\//,"").replace(/\/$/,"").split("/")},lt=new WeakSet,fr=function(){let e={locale:f(this,F),route:f(this,V),config:f(this,x).toClientSideObject(),translations:f(this,L).toClientSideObject(this.route),segments:f(this,_).toClientSideObject(),formatters:f(this,C).toClientSideObject()};return`<script id="${f(ct,Re)}" type="application/json">${JSON.stringify(e)}<\/script>`},ut=new WeakSet,hr=function(){let e={};for(let[t,r]of Object.entries(f(this,C).toObject()))e[t]=r.name;return JSON.stringify({environment:this.environment,route:this.route,locale:this.locale,locales:this.locales,primaryLocale:this.primaryLocale,secondaryLocales:this.secondaryLocales,fallbackLocale:this.fallbackLocale,isInitialized:this.isInitialized,"#redirection":f(this,A)instanceof Response?{url:f(this,A).url,status:f(this,A).status}:f(this,A),"#origin":f(this,ae),"#isGetStaticPaths":f(this,q),"#routePageCache":f(this,B),"#config":f(this,x).toObject(),"#translations":f(this,L).toObject(),"#segments":f(this,_).toObject(),"#formatters":e},null,"	")},b(dr,Re,`__${z}__`);var Ms=dr,U=new Ms,Fs=U.t.bind(U),Zs=U.l.bind(U);function Xs(e,t){return Fs(e,t)}function Qs(e){return e[U.locale]??e[U.fallbackLocale]??e.en}const ft=Symbol("store-raw"),oe=Symbol("store-node"),D=Symbol("store-has"),pr=Symbol("store-self");function gr(e){let t=e[H];if(!t&&(Object.defineProperty(e,H,{value:t=new Proxy(e,zs)}),!Array.isArray(e))){const r=Object.keys(e),n=Object.getOwnPropertyDescriptors(e);for(let s=0,i=r.length;s<i;s++){const a=r[s];n[a].get&&Object.defineProperty(e,a,{enumerable:n[a].enumerable,get:n[a].get.bind(t)})}}return t}function G(e){let t;return e!=null&&typeof e=="object"&&(e[H]||!(t=Object.getPrototypeOf(e))||t===Object.prototype||Array.isArray(e))}function Q(e,t=new Set){let r,n,s,i;if(r=e!=null&&e[ft])return r;if(!G(e)||t.has(e))return e;if(Array.isArray(e)){Object.isFrozen(e)?e=e.slice(0):t.add(e);for(let a=0,o=e.length;a<o;a++)s=e[a],(n=Q(s,t))!==s&&(e[a]=n)}else{Object.isFrozen(e)?e=Object.assign({},e):t.add(e);const a=Object.keys(e),o=Object.getOwnPropertyDescriptors(e);for(let l=0,c=a.length;l<c;l++)i=a[l],!o[i].get&&(s=e[i],(n=Q(s,t))!==s&&(e[i]=n))}return e}function Ie(e,t){let r=e[t];return r||Object.defineProperty(e,t,{value:r=Object.create(null)}),r}function je(e,t,r){if(e[t])return e[t];const[n,s]=At(r,{equals:!1,internal:!0});return n.$=s,e[t]=n}function Vs(e,t){const r=Reflect.getOwnPropertyDescriptor(e,t);return!r||r.get||!r.configurable||t===H||t===oe||(delete r.value,delete r.writable,r.get=()=>e[H][t]),r}function mr(e){Ue()&&je(Ie(e,oe),pr)()}function qs(e){return mr(e),Reflect.ownKeys(e)}const zs={get(e,t,r){if(t===ft)return e;if(t===H)return r;if(t===bt)return mr(e),r;const n=Ie(e,oe),s=n[t];let i=s?s():e[t];if(t===oe||t===D||t==="__proto__")return i;if(!s){const a=Object.getOwnPropertyDescriptor(e,t);Ue()&&(typeof i!="function"||e.hasOwnProperty(t))&&!(a&&a.get)&&(i=je(n,t,i)())}return G(i)?gr(i):i},has(e,t){return t===ft||t===H||t===bt||t===oe||t===D||t==="__proto__"?!0:(Ue()&&je(Ie(e,D),t)(),t in e)},set(){return!0},deleteProperty(){return!0},ownKeys:qs,getOwnPropertyDescriptor:Vs};function P(e,t,r,n=!1){if(!n&&e[t]===r)return;const s=e[t],i=e.length;r===void 0?(delete e[t],e[D]&&e[D][t]&&s!==void 0&&e[D][t].$()):(e[t]=r,e[D]&&e[D][t]&&s===void 0&&e[D][t].$());let a=Ie(e,oe),o;if((o=je(a,t,s))&&o.$(()=>r),Array.isArray(e)&&e.length!==i){for(let l=e.length;l<i;l++)(o=a[l])&&o.$();(o=je(a,"length",i))&&o.$(e.length)}(o=a[pr])&&o.$()}function wr(e,t){const r=Object.keys(t);for(let n=0;n<r.length;n+=1){const s=r[n];P(e,s,t[s])}}function Us(e,t){if(typeof t=="function"&&(t=t(e)),t=Q(t),Array.isArray(t)){if(e===t)return;let r=0,n=t.length;for(;r<n;r++){const s=t[r];e[r]!==s&&P(e,r,s)}P(e,"length",n)}else wr(e,t)}function we(e,t,r=[]){let n,s=e;if(t.length>1){n=t.shift();const a=typeof n,o=Array.isArray(e);if(Array.isArray(n)){for(let l=0;l<n.length;l++)we(e,[n[l]].concat(t),r);return}else if(o&&a==="function"){for(let l=0;l<e.length;l++)n(e[l],l)&&we(e,[l].concat(t),r);return}else if(o&&a==="object"){const{from:l=0,to:c=e.length-1,by:u=1}=n;for(let h=l;h<=c;h+=u)we(e,[h].concat(t),r);return}else if(t.length>1){we(e[n],t,[n].concat(r));return}s=e[n],r=[n].concat(r)}let i=t[0];typeof i=="function"&&(i=i(s,r),i===s)||n===void 0&&i==null||(i=Q(i),n===void 0||G(s)&&G(i)&&!Array.isArray(i)?wr(s,i):P(e,n,i))}function Gs(...[e,t]){const r=Q(e||{}),n=Array.isArray(r),s=gr(r);function i(...a){vr(()=>{n&&a.length===1?Us(r,a[0]):we(r,a)})}return[s,i]}const ht=Symbol("store-root");function ne(e,t,r,n,s){const i=t[r];if(e===i)return;const a=Array.isArray(e);if(r!==ht&&(!G(e)||!G(i)||a!==Array.isArray(i)||s&&e[s]!==i[s])){P(t,r,e);return}if(a){if(e.length&&i.length&&(!n||s&&e[0]&&e[0][s]!=null)){let c,u,h,w,d,p,g,y;for(h=0,w=Math.min(i.length,e.length);h<w&&(i[h]===e[h]||s&&i[h]&&e[h]&&i[h][s]===e[h][s]);h++)ne(e[h],i,h,n,s);const O=new Array(e.length),R=new Map;for(w=i.length-1,d=e.length-1;w>=h&&d>=h&&(i[w]===e[d]||s&&i[h]&&e[h]&&i[w][s]===e[d][s]);w--,d--)O[d]=i[w];if(h>d||h>w){for(u=h;u<=d;u++)P(i,u,e[u]);for(;u<e.length;u++)P(i,u,O[u]),ne(e[u],i,u,n,s);i.length>e.length&&P(i,"length",e.length);return}for(g=new Array(d+1),u=d;u>=h;u--)p=e[u],y=s&&p?p[s]:p,c=R.get(y),g[u]=c===void 0?-1:c,R.set(y,u);for(c=h;c<=w;c++)p=i[c],y=s&&p?p[s]:p,u=R.get(y),u!==void 0&&u!==-1&&(O[u]=i[c],u=g[u],R.set(y,u));for(u=h;u<e.length;u++)u in O?(P(i,u,O[u]),ne(e[u],i,u,n,s)):P(i,u,e[u])}else for(let c=0,u=e.length;c<u;c++)ne(e[c],i,c,n,s);i.length>e.length&&P(i,"length",e.length);return}const o=Object.keys(e);for(let c=0,u=o.length;c<u;c++)ne(e[o[c]],i,o[c],n,s);const l=Object.keys(i);for(let c=0,u=l.length;c<u;c++)e[l[c]]===void 0&&P(i,l[c],void 0)}function Js(e,t={}){const{merge:r,key:n="id"}=t,s=Q(e);return i=>{if(!G(i)||!G(s))return s;const a=ne(s,{[ht]:i},ht,r,n);return a===void 0?i:a}}function Ks(e){let t=e.get(),[r,n]=Bs(t),s=e.subscribe(n);return $r(()=>s()),r}function Bs(e){let[t,r]=Gs({value:e});return[()=>t.value,n=>{let s=Q(t.value);return typeof n=="function"&&(n=n(s)),r("value",Js(n)),t.value}]}function ei(e,t){const r=Ks(e),[n,s]=At(t);return Sr(()=>{s(r)}),jr(()=>{s(r)}),n}export{Qs as a,Zs as c,Xs as t,ei as u};
