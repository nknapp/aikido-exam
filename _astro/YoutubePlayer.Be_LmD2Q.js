import{g as A,s as Q,a as j,t as O,m as Y,x as J,c as w,e as W,i as L,u as Z,l as K,f as X,j as ee,P as te,M as $,A as re,d as ne}from"./web.DcA5ypnZ.js";import{n as ae,S as z}from"./index.browser.SB4vPn2U.js";import{I as oe}from"./stop.BBEMwMoj.js";import{d as se}from"./delay.2S0BUUWF.js";import{a as ie}from"./_commonjsHelpers.C4iS2aBk.js";import{a as ue}from"./CheckButton.By-aBsoP.js";import{t as U}from"./usePersistentStore.CXrbfne9.js";var le=O('<svg xmlns=http://www.w3.org/2000/svg width=24 height=24><path d="M4 6H2v14c0 1.1.9 2 2 2h14v-2H4zm16-4H8c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2m0 14H8V4h12zM12 5.5v9l6-4.5z">');const q=(a={})=>(()=>{var n=A(le);return Q(n,a,!0,!0),j(),n})();var I={exports:{}},G;/**
* @link https://github.com/gajus/sister for the canonical source repository
* @license https://github.com/gajus/sister/blob/master/LICENSE BSD 3-Clause
*/G=function(){var a={},n={};return a.on=function(t,i){var f={name:t,handler:i};return n[t]=n[t]||[],n[t].unshift(f),f},a.off=function(t){var i=n[t.name].indexOf(t);i!==-1&&n[t.name].splice(i,1)},a.trigger=function(t,i){var f=n[t],s;if(f)for(s=f.length;s--;)f[s].handler(i)},a};var ce=G,M={exports:{}},N={exports:{}},x,B;function de(){if(B)return x;B=1;var a=1e3,n=a*60,t=n*60,i=t*24,f=i*7,s=i*365.25;x=function(e,r){r=r||{};var o=typeof e;if(o==="string"&&e.length>0)return p(e);if(o==="number"&&isFinite(e))return r.long?y(e):C(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))};function p(e){if(e=String(e),!(e.length>100)){var r=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(e);if(r){var o=parseFloat(r[1]),l=(r[2]||"ms").toLowerCase();switch(l){case"years":case"year":case"yrs":case"yr":case"y":return o*s;case"weeks":case"week":case"w":return o*f;case"days":case"day":case"d":return o*i;case"hours":case"hour":case"hrs":case"hr":case"h":return o*t;case"minutes":case"minute":case"mins":case"min":case"m":return o*n;case"seconds":case"second":case"secs":case"sec":case"s":return o*a;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return o;default:return}}}}function C(e){var r=Math.abs(e);return r>=i?Math.round(e/i)+"d":r>=t?Math.round(e/t)+"h":r>=n?Math.round(e/n)+"m":r>=a?Math.round(e/a)+"s":e+"ms"}function y(e){var r=Math.abs(e);return r>=i?u(e,r,i,"day"):r>=t?u(e,r,t,"hour"):r>=n?u(e,r,n,"minute"):r>=a?u(e,r,a,"second"):e+" ms"}function u(e,r,o,l){var h=r>=o*1.5;return Math.round(e/o)+" "+l+(h?"s":"")}return x}function fe(a){t.debug=t,t.default=t,t.coerce=y,t.disable=s,t.enable=f,t.enabled=p,t.humanize=de(),t.destroy=u,Object.keys(a).forEach(e=>{t[e]=a[e]}),t.names=[],t.skips=[],t.formatters={};function n(e){let r=0;for(let o=0;o<e.length;o++)r=(r<<5)-r+e.charCodeAt(o),r|=0;return t.colors[Math.abs(r)%t.colors.length]}t.selectColor=n;function t(e){let r,o=null,l,h;function c(...d){if(!c.enabled)return;const g=c,m=Number(new Date),v=m-(r||m);g.diff=v,g.prev=r,g.curr=m,r=m,d[0]=t.coerce(d[0]),typeof d[0]!="string"&&d.unshift("%O");let F=0;d[0]=d[0].replace(/%([a-zA-Z%])/g,(b,P)=>{if(b==="%%")return"%";F++;const _=t.formatters[P];if(typeof _=="function"){const E=d[F];b=_.call(g,E),d.splice(F,1),F--}return b}),t.formatArgs.call(g,d),(g.log||t.log).apply(g,d)}return c.namespace=e,c.useColors=t.useColors(),c.color=t.selectColor(e),c.extend=i,c.destroy=t.destroy,Object.defineProperty(c,"enabled",{enumerable:!0,configurable:!1,get:()=>o!==null?o:(l!==t.namespaces&&(l=t.namespaces,h=t.enabled(e)),h),set:d=>{o=d}}),typeof t.init=="function"&&t.init(c),c}function i(e,r){const o=t(this.namespace+(typeof r>"u"?":":r)+e);return o.log=this.log,o}function f(e){t.save(e),t.namespaces=e,t.names=[],t.skips=[];let r;const o=(typeof e=="string"?e:"").split(/[\s,]+/),l=o.length;for(r=0;r<l;r++)o[r]&&(e=o[r].replace(/\*/g,".*?"),e[0]==="-"?t.skips.push(new RegExp("^"+e.slice(1)+"$")):t.names.push(new RegExp("^"+e+"$")))}function s(){const e=[...t.names.map(C),...t.skips.map(C).map(r=>"-"+r)].join(",");return t.enable(""),e}function p(e){if(e[e.length-1]==="*")return!0;let r,o;for(r=0,o=t.skips.length;r<o;r++)if(t.skips[r].test(e))return!1;for(r=0,o=t.names.length;r<o;r++)if(t.names[r].test(e))return!0;return!1}function C(e){return e.toString().substring(2,e.toString().length-2).replace(/\.\*\?$/,"*")}function y(e){return e instanceof Error?e.stack||e.message:e}function u(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return t.enable(t.load()),t}var pe=fe;(function(a,n){var t={};n.formatArgs=f,n.save=s,n.load=p,n.useColors=i,n.storage=C(),n.destroy=(()=>{let u=!1;return()=>{u||(u=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),n.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function i(){if(typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs))return!0;if(typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;let u;return typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&(u=navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/))&&parseInt(u[1],10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function f(u){if(u[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+u[0]+(this.useColors?"%c ":" ")+"+"+a.exports.humanize(this.diff),!this.useColors)return;const e="color: "+this.color;u.splice(1,0,e,"color: inherit");let r=0,o=0;u[0].replace(/%[a-zA-Z%]/g,l=>{l!=="%%"&&(r++,l==="%c"&&(o=r))}),u.splice(o,0,e)}n.log=console.debug||console.log||(()=>{});function s(u){try{u?n.storage.setItem("debug",u):n.storage.removeItem("debug")}catch{}}function p(){let u;try{u=n.storage.getItem("debug")}catch{}return!u&&typeof process<"u"&&"env"in process&&(u=t.DEBUG),u}function C(){try{return localStorage}catch{}}a.exports=pe(n);const{formatters:y}=a.exports;y.j=function(u){try{return JSON.stringify(u)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}}})(N,N.exports);var Ce=N.exports,k={exports:{}},V={exports:{}};(function(a,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default={BUFFERING:3,ENDED:0,PAUSED:2,PLAYING:1,UNSTARTED:-1,VIDEO_CUED:5},a.exports=n.default})(V,V.exports);var ye=V.exports;(function(a,n){Object.defineProperty(n,"__esModule",{value:!0});var t=ye,i=f(t);function f(s){return s&&s.__esModule?s:{default:s}}n.default={pauseVideo:{acceptableStates:[i.default.ENDED,i.default.PAUSED],stateChangeRequired:!1},playVideo:{acceptableStates:[i.default.ENDED,i.default.PLAYING],stateChangeRequired:!1},seekTo:{acceptableStates:[i.default.ENDED,i.default.PLAYING,i.default.PAUSED],stateChangeRequired:!0,timeout:3e3}},a.exports=n.default})(k,k.exports);var ge=k.exports,D={exports:{}};(function(a,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=["ready","stateChange","playbackQualityChange","playbackRateChange","error","apiChange","volumeChange"],a.exports=n.default})(D,D.exports);var me=D.exports,T={exports:{}};(function(a,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=["cueVideoById","loadVideoById","cueVideoByUrl","loadVideoByUrl","playVideo","pauseVideo","stopVideo","getVideoLoadedFraction","cuePlaylist","loadPlaylist","nextVideo","previousVideo","playVideoAt","setShuffle","setLoop","getPlaylist","getPlaylistIndex","setOption","mute","unMute","isMuted","setVolume","getVolume","seekTo","getPlayerState","getPlaybackRate","setPlaybackRate","getAvailablePlaybackRates","getPlaybackQuality","setPlaybackQuality","getAvailableQualityLevels","getCurrentTime","getDuration","removeEventListener","getVideoUrl","getVideoEmbedCode","getOptions","getOption","addEventListener","destroy","setSize","getIframe","getSphericalProperties","setSphericalProperties"],a.exports=n.default})(T,T.exports);var he=T.exports;(function(a,n){Object.defineProperty(n,"__esModule",{value:!0});var t=Ce,i=e(t),f=ge,s=e(f),p=me,C=e(p),y=he,u=e(y);function e(l){return l&&l.__esModule?l:{default:l}}const r=(0,i.default)("youtube-player"),o={};o.proxyEvents=l=>{const h={};for(const c of C.default){const d="on"+c.slice(0,1).toUpperCase()+c.slice(1);h[d]=g=>{r('event "%s"',d,g),l.trigger(c,g)}}return h},o.promisifyPlayer=(l,h=!1)=>{const c={};for(const d of u.default)h&&s.default[d]?c[d]=(...g)=>l.then(m=>{const v=s.default[d],F=m.getPlayerState(),S=m[d].apply(m,g);return v.stateChangeRequired||Array.isArray(v.acceptableStates)&&!v.acceptableStates.includes(F)?new Promise(b=>{const P=()=>{const _=m.getPlayerState();let E;typeof v.timeout=="number"&&(E=setTimeout(()=>{m.removeEventListener("onStateChange",P),b()},v.timeout)),Array.isArray(v.acceptableStates)&&v.acceptableStates.includes(_)&&(m.removeEventListener("onStateChange",P),clearTimeout(E),b())};m.addEventListener("onStateChange",P)}).then(()=>S):S}):c[d]=(...g)=>l.then(m=>m[d].apply(m,g));return c},n.default=o,a.exports=n.default})(M,M.exports);var ve=M.exports,R={exports:{}},we=function(n,t,i){var f=document.head||document.getElementsByTagName("head")[0],s=document.createElement("script");typeof t=="function"&&(i=t,t={}),t=t||{},i=i||function(){},s.type=t.type||"text/javascript",s.charset=t.charset||"utf8",s.async="async"in t?!!t.async:!0,s.src=n,t.attrs&&Fe(s,t.attrs),t.text&&(s.text=""+t.text);var p="onload"in s?H:be;p(s,i),s.onload||H(s,i),f.appendChild(s)};function Fe(a,n){for(var t in n)a.setAttribute(t,n[t])}function H(a,n){a.onload=function(){this.onerror=this.onload=null,n(null,a)},a.onerror=function(){this.onerror=this.onload=null,n(new Error("Failed to load "+this.src),a)}}function be(a,n){a.onreadystatechange=function(){this.readyState!="complete"&&this.readyState!="loaded"||(this.onreadystatechange=null,n(null,a))}}(function(a,n){Object.defineProperty(n,"__esModule",{value:!0});var t=we,i=f(t);function f(s){return s&&s.__esModule?s:{default:s}}n.default=s=>new Promise(C=>{if(window.YT&&window.YT.Player&&window.YT.Player instanceof Function){C(window.YT);return}else{const u=window.location.protocol==="http:"?"http:":"https:";(0,i.default)(u+"//www.youtube.com/iframe_api",e=>{e&&s.trigger("error",e)})}const y=window.onYouTubeIframeAPIReady;window.onYouTubeIframeAPIReady=()=>{y&&y(),C(window.YT)}}),a.exports=n.default})(R,R.exports);var Pe=R.exports;(function(a,n){Object.defineProperty(n,"__esModule",{value:!0});var t=ce,i=y(t),f=ve,s=y(f),p=Pe,C=y(p);function y(e){return e&&e.__esModule?e:{default:e}}let u;n.default=(e,r={},o=!1)=>{const l=(0,i.default)();if(u||(u=(0,C.default)(l)),r.events)throw new Error("Event handlers cannot be overwritten.");if(typeof e=="string"&&!document.getElementById(e))throw new Error('Element "'+e+'" does not exist.');r.events=s.default.proxyEvents(l);const h=new Promise(d=>{typeof e=="object"&&e.playVideo instanceof Function?d(e):u.then(g=>{const m=new g.Player(e,r);return l.on("ready",()=>{d(m)}),null})}),c=s.default.promisifyPlayer(h,o);return c.on=l.on,c.off=l.off,c},a.exports=n.default})(I,I.exports);var _e=I.exports;const Ee=ie(_e);var Se=O('<div><!$><!/><div class="absolute inset-0 z-0">'),xe=O("<button>");const Te=a=>{const n=ae(),[t,i]=Y(),[f,s]=Y(!1);let p=null;function C(){p?.setSize(window.innerWidth,window.innerHeight)}J(()=>{p?.destroy(),window.removeEventListener("resize",C)});function y(r){if(r==null)throw new Error("Could not find element for video player");return r}async function u(){p==null&&(p=Ee(y(t()),{host:"https://www.youtube-nocookie.com",playerVars:{rel:0,autoplay:0,modestbranding:1}}),window.addEventListener("resize",C),C()),s(!0),await se(0);const r=y(p);await r.loadVideoById({videoId:a.link.videoId}),await r.playVideo(),await new Promise(o=>{r.on("stateChange",l=>{l.data===0&&o()})}),s(!1)}async function e(r){r.preventDefault(),r.stopPropagation(),r.stopImmediatePropagation(),p?.stopVideo(),s(!1)}return[w(te,{get children(){var r=A(Se),o=r.firstChild,[l,h]=W(o.nextSibling),c=l.nextSibling;return L(r,w(z,{class:"absolute top-1 right-1 z-10",size:"small",get label(){return U("video.stop")},icon:oe,onClick:e}),l,h),Z(i,c),K(c,"id",n),X(()=>ee(r,ue("fixed inset-0",f()||"hidden"))),r}}),w(re,{get children(){return[w($,{get when(){return a.type==="icon"},get children(){var r=A(xe);return r.$$click=u,L(r,w(q,{get class(){return a.class}})),j(),r}}),w($,{get when(){return a.type==="button"},get children(){return w(z,{get class(){return a.class},size:"small",icon:q,get label(){return U("button.play-video.label")},onClick:u})}})]}})]};ne(["click"]);export{Te as YoutubePlayer};
