import{g as h,j as w,r as v,t as d,b as y,i as u,d as m,F as M,f as S,h as p,e as A,s as D,l as I,p as H,a as P,c as j,S as N}from"./web._rAx8qX5.js";import{S as B,t as R,c as L}from"./techniqueStore.OpD8ADmx.js";import{p as V}from"./playArrayBuffer.D6vWLOse.js";import{c as f,d as E,S as C,C as F}from"./CheckButton.C5YMRp86.js";var G=d('<svg xmlns=http://www.w3.org/2000/svg width=24 height=24><path d="M10 8.64 15.27 12 10 15.36zM8 5v14l11-7z">');const X=(t={})=>(()=>{var e=h(G);return w(e,t,!0,!0),v(),e})();var Z=d('<svg xmlns=http://www.w3.org/2000/svg width=24 height=24><path d="M6 19h4V5H6zm8-14v14h4V5z">');const J=(t={})=>(()=>{var e=h(Z);return w(e,t,!0,!0),v(),e})();var O=d('<svg xmlns=http://www.w3.org/2000/svg width=24 height=24><path d="m6 18 8.5-6L6 6zm2-8.14L11.03 12 8 14.14zM16 6h2v12h-2z">');const W=(t={})=>(()=>{var e=h(O);return w(e,t,!0,!0),v(),e})();var Q=d('<svg xmlns=http://www.w3.org/2000/svg width=24 height=24><path d="M6 6h2v12H6zm3.5 6 8.5 6V6zm6.5 2.14L12.97 12 16 9.86z">');const T=(t={})=>(()=>{var e=h(Q);return w(e,t,!0,!0),v(),e})();var U=d('<svg xmlns=http://www.w3.org/2000/svg width=24 height=24><path d="M19.03 3.56c-1.67-1.39-3.74-2.3-6.03-2.51v2.01c1.73.19 3.31.88 4.61 1.92zM11 3.06V1.05c-2.29.2-4.36 1.12-6.03 2.51l1.42 1.42A8.93 8.93 0 0 1 11 3.06M4.98 6.39 3.56 4.97C2.17 6.64 1.26 8.71 1.05 11h2.01c.19-1.73.88-3.31 1.92-4.61M20.94 11h2.01c-.21-2.29-1.12-4.36-2.51-6.03l-1.42 1.42A8.93 8.93 0 0 1 20.94 11M7 12l3.44 1.56L12 17l1.56-3.44L17 12l-3.44-1.56L12 7l-1.56 3.44z"></path><path d="M12 21a8.96 8.96 0 0 1-7.46-4H7v-2H1v6h2v-2.7c1.99 2.84 5.27 4.7 9 4.7 4.87 0 9-3.17 10.44-7.56l-1.96-.45C19.25 18.48 15.92 21 12 21">');const Y=(t={})=>(()=>{var e=h(U);return w(e,t,!0,!0),v(),e})();var K=d('<svg xmlns=http://www.w3.org/2000/svg width=24 height=24><path d="m20.38 8.57-1.23 1.85a8 8 0 0 1-.22 7.58H5.07A8 8 0 0 1 15.58 6.85l1.85-1.23A10 10 0 0 0 3.35 19a2 2 0 0 0 1.72 1h13.85a2 2 0 0 0 1.74-1 10 10 0 0 0-.27-10.44z"></path><path d="M10.59 15.41a2 2 0 0 0 2.83 0l5.66-8.49-8.49 5.66a2 2 0 0 0 0 2.83">');const q=(t={})=>(()=>{var e=h(K);return w(e,t,!0,!0),v(),e})(),tt=["execution","attack","defence","direction"],et=console.warn.bind(console);async function ot(t){return at(t,async e=>{for(let c=0;c<2;c++)try{const a=new URL(e,window.location.href);return await(await fetch(a)).arrayBuffer()}catch(a){et("Retrying after ",a)}const o=new URL(e,window.location.href);return await(await fetch(o)).arrayBuffer()})}async function at(t,e){const o=Object.entries(t),r=await Promise.all(o.map(async([c,a])=>[c,await e(a)]));return Object.fromEntries(r)}async function rt(t,e){return new it(ot(t),e)}class it{constructor(e,o){this.abortController=new AbortController,this.speechPack=e,this.playArrayBuffer=o}async play(e){this.abortController.abort();const o=new AbortController;this.abortController=o;for(const r of e){if(o.signal.aborted)return;await this.playSingle(r,o)}}async stop(){this.abortController.abort()}async playSingle(e,o){const r=await this.speechPack;await this.playArrayBuffer(r[e],{abortSignal:o.signal})}}const nt="/_astro/ai-hanmi-katate-dori.D9jk8p3Y.mp3",st="/_astro/chudan-tsuki.BrFfXMeB.mp3",ct="/_astro/gokyo.0srG7ZHQ.mp3",lt="/_astro/gyuako-hanmi-katate-dori.BGKU1Irj.mp3",ut="/_astro/hanmi-handachi-waza.CgzBHatk.mp3",ht="/_astro/ikkyo.CFXMDrKb.mp3",dt="/_astro/irimi-nage.CA6B882B.mp3",mt="/_astro/jo-dori.DY1rSdG_.mp3",_t="/_astro/jo-nage.BsNSZwWa.mp3",gt="/_astro/jodan-tsuki.CgM3QNWj.mp3",kt="/_astro/kata-dori.BMRXzDnG.mp3",pt="/_astro/kata-dori-men-uchi.4xRGKyIq.mp3",yt="/_astro/katate-ryote-dori.tJTHKJO3.mp3",vt="/_astro/kokyu-hoo.BHl7iYAQ.mp3",ft="/_astro/kokyu-nage.M2EYX4Aa.mp3",wt="/_astro/koshi-nage.CpAkLt1W.mp3",$t="/_astro/kote-gaeshi.CVsclVg0.mp3",bt="/_astro/mae-ryo-kata-dori.CJC4u-vF.mp3",xt="/_astro/muna-dori.DlZKLa7s.mp3",St="/_astro/nikyo.DU7R2odT.mp3",Ct="/_astro/ryote-dori.4XoQsVYZ.mp3",jt="/_astro/sankyo.D0yfMH1q.mp3",zt="/_astro/shiho-nage.CAocqfxm.mp3",Bt="/_astro/shomen-uchi.Dd6ZuwJs.mp3",Pt="/_astro/sokumen-irimi-nage.Dyvi1wgu.mp3",Mt="/_astro/suwari-waza.sxu5IlZL.mp3",At="/_astro/tachi-dori.CH6FjBE9.mp3",Dt="/_astro/tachi-waza.UoifgM4v.mp3",It="/_astro/tanto-dori.CAczNXDZ.mp3",Ht="/_astro/tenchi-nage.CmOWHM4v.mp3",Nt="/_astro/uchi-kaiten-nage.Du2Fg5XT.mp3",Rt="/_astro/uchi-kaiten-sankyo.BXaGNTfg.mp3",Lt="/_astro/soto-kaiten-nage.CmdkNJTS.mp3",Vt="/_astro/ude-kime-nage.DliicUH3.mp3",Et="/_astro/ude-garami.BxhhieCv.mp3",Ft="/_astro/ushiro-eri-dori.Da-hHZWp.mp3",Gt="/_astro/ushiro-katate-dori-kube-shime.B7m8SfwS.mp3",Xt="/_astro/ushiro-ryo-hiji-dori.B1tRhP4p.mp3",Zt="/_astro/ushiro-ryo-kata-dori.B0jts-Yv.mp3",Jt="/_astro/ushiro-ryote-dori.JvTDF8G8.mp3",Ot="/_astro/yokomen-uchi.BNHvU40-.mp3",Wt="/_astro/yonkyo.Cv8QN4OZ.mp3",Qt="/_astro/omote.C0NjVpun.mp3",Tt="/_astro/ura.D0ii5oqJ.mp3",Ut="/_astro/sumi-otoshi.D-Fms4cX.mp3",Yt="/_astro/aiki-otoshi.keSqx0zw.mp3",Kt="/_astro/juji-garami.BtnIG-B8.mp3",qt="/_astro/hiji-kime-osae.84ekinfN.mp3",te="/_astro/shomen-uchi-gyaku-te.DFVuQIBd.mp3",ee="/_astro/shomen-uchi-hon-te.k5rahOS9.mp3",oe="/_astro/yokomen-uchi-gyaku-te.Cklg5XYG.mp3",ae="/_astro/yokomen-uchi-hon-te.BN0AuJBh.mp3",re="/_astro/ai-hanmi-ryote-dori.CZe52sQ-.mp3",ie={"suwari waza":Mt,"hanmi handachi waza":ut,"tachi waza":Dt,"tanto dori":It,"jo dori":mt,"jo nage":_t,"tachi dori":At,"ai hanmi katate dori":nt,"gyuako hanmi katate dori":lt,"kata dori":kt,"ryote dori":Ct,"katate ryote dori":yt,"muna dori":xt,"mae ryo kata dori":bt,"shomen uchi":Bt,"yokomen uchi":Ot,"chudan tsuki":st,"jodan tsuki":gt,"kata dori men uchi":pt,"ushiro ryote dori":Jt,"ushiro ryo hiji dori":Xt,"ushiro ryo kata dori":Zt,"ushiro katate dori kubi shime":Gt,"ushiro eri dori":Ft,"shomen uchi gyaku-te":te,"shomen uchi hon-te":ee,"yokomen uchi gyaku-te":oe,"yokomen uchi hon-te":ae,"ai hanmi ryote dori":re,ikkyo:ht,nikyo:St,sankyo:jt,yonkyo:Wt,gokyo:ct,"irimi nage":dt,"kokyu nage":ft,"shiho nage":zt,"ude kime nage":Vt,"ude garami":Et,"sokumen irimi nage":Pt,"uchi kaiten nage":Nt,"soto kaiten nage":Lt,"tenchi nage":Ht,"koshi nage":wt,"kote gaeshi":$t,"kokyu ho":vt,"sumi otoshi":Ut,"aiki otoshi":Yt,"juji garami":Kt,"hiji kimo osae":qt,"uchi kaiten sankyo":Rt,omote:Qt,ura:Tt},ne=["execution","attack","defence"];function se(t,e){const o=t.direction===B?ne:tt;if(e==null)return o;if(t.execution!==e.execution)return o.slice(0);if(t.attack!==e.attack)return o.slice(1);if(t.defence!==e.defence)return o.slice(2);if(t.direction!==e.direction)return o.slice(3);throw new Error("All components of the previous technique equal the current one")}function ce(t,e){const o={execution:void 0,attack:void 0,defence:void 0,direction:void 0};for(const r of se(t,e))le(t,r,o);return o}function le(t,e,o){o[e]=t[e]==B?void 0:t[e]}var ue=d('<div><div class="bg-info-light snap-start border-info border p-2 rounded"></div><!$><!/>'),he=d("<div><div></div><div></div><div></div><div>");const de=t=>(()=>{var e=h(ue),o=e.firstChild,r=o.nextSibling,[c,a]=y(r.nextSibling);return u(o,()=>R("player.does.not.work")),u(e,m(M,{get each(){return t.techniques},children:(n,i)=>m(me,{technique:n,get previous(){return t.techniques[i()-1]},get active(){return z(n)==z(t.currentTechnique)}})}),c,a),S(()=>p(e,f("overflow-scroll grid gap-2 snap-y shadow-lg",t.class))),e})(),me=t=>{const e=A(()=>ce(t.technique,t.previous)),o=r=>e()[r]?"text-black font-bold":"text-secondary";return(()=>{var r=h(he),c=r.firstChild,a=c.nextSibling,n=a.nextSibling,i=n.nextSibling;return u(c,()=>t.technique.execution),u(a,()=>t.technique.attack),u(n,()=>t.technique.defence),u(i,()=>e().direction),S(s=>{var k=z(t.technique),l=f(t.active&&"bg-primary-light","border-primary-light border p-2 rounded snap-mandatory","snap-start"),_=f(o("execution"),"text-sm h-6"),g=f(o("attack"),"text-sm h-6"),$=f(o("defence"),"text-xl h-8"),b=f(o("direction"),"text-sm h-6");return k!==s.e&&D(r,"id",s.e=k),l!==s.t&&p(r,s.t=l),_!==s.a&&p(c,s.a=_),g!==s.o&&p(a,s.o=g),$!==s.i&&p(n,s.i=$),b!==s.n&&p(i,s.n=b),s},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0}),r})()};function z(t){return`${t.execution} ${t.attack} ${t.defence} ${t.direction}`.replace(/\W/g,"_")}var _e=d('<button><!$><!/><div class="grid grid-cols-3 w-24 gap-1 h-6">'),ge=d("<div>");const x=["slow","normal","fast"],ke=t=>{const{buttonClasses:e,iconClasses:o}=E(()=>t),r=A(()=>x.indexOf(t.value));function c(){const a=(r()+1)%x.length;t.onChange(x[a])}return(()=>{var a=h(_e),n=a.firstChild,[i,s]=y(n.nextSibling),k=i.nextSibling;return a.$$click=c,u(a,m(q,{get class(){return o()}}),i,s),u(k,m(M,{each:x,children:(l,_)=>(()=>{var g=h(ge);return S(()=>p(g,r()<_()?"border-primary border":"bg-primary border-primary-dark border-1")),g})()})),S(l=>{var _=e(),g=t.disabled;return _!==l.e&&p(a,l.e=_),g!==l.t&&H(a,"disabled",l.t=g),l},{e:void 0,t:void 0}),v(),a})()};I(["click"]);var pe=d('<div class="flex flex-col gap-4">'),ye=d('<div class="grid grid-cols-3 gap-4"><!$><!/><!$><!/><!$><!/>'),ve=d('<div class="grid grid-cols-2 gap-4"><!$><!/><!$><!/>');const Se=t=>{const e=L(t.dojoInfo.id),[o]=P(e.load,{initialValue:[]}),[r,c]=j(!1),[a]=P(async()=>{const n=await rt(ie,V);return{play:async i=>{c(!0),i.direction===B?await n.play([i.execution,i.attack,i.defence]):await n.play([i.execution,i.attack,i.defence,i.direction]),c(!1)},stop:async()=>n.stop()}},{initialValue:{play:async()=>{},stop:async()=>{}}});return(()=>{var n=h(pe);return u(n,m(N,{fallback:"Loading",get children(){return[m(fe,{get player(){return a()},get techniques(){return o()},get playing(){return r()}}),m(de,{class:"h-[40vh]",get techniques(){return o()},get currentTechnique(){return o()[0]}})]}})),n})()},fe=t=>{const[e,o]=j(!1),[r,c]=j("normal");return[(()=>{var a=h(ye),n=a.firstChild,[i,s]=y(n.nextSibling),k=i.nextSibling,[l,_]=y(k.nextSibling),g=l.nextSibling,[$,b]=y(g.nextSibling);return u(a,m(C,{size:"large",icon:T}),i,s),u(a,m(C,{size:"large",onClick:()=>t.playing?t.player.stop():t.player.play(t.techniques[0]),get icon(){return t.playing?J:X}}),l,_),u(a,m(C,{size:"large",icon:W}),$,b),a})(),(()=>{var a=h(ve),n=a.firstChild,[i,s]=y(n.nextSibling),k=i.nextSibling,[l,_]=y(k.nextSibling);return u(a,m(F,{size:"small",icon:Y,label:"Autoplay",get value(){return e()},onChange:o}),i,s),u(a,m(ke,{get disabled(){return!e()},get value(){return r()},onChange:c}),l,_),a})()]};export{Se as Reader};
