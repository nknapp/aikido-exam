import{g as d,j as w,r as f,t as m,b as y,i as c,d as l,F as P,f as S,h as p,e as A,s as D,l as I,p as N,a as z,S as H,c as M}from"./web._rAx8qX5.js";import{S as B,t as R,c as L}from"./techniqueStore.OpD8ADmx.js";import{p as E}from"./playArrayBuffer.D6vWLOse.js";import{c as v,d as F,S as C,C as G}from"./CheckButton.C5YMRp86.js";var V=m('<svg xmlns=http://www.w3.org/2000/svg width=24 height=24><path d="M10 8.64 15.27 12 10 15.36zM8 5v14l11-7z">');const X=(t={})=>(()=>{var e=d(V);return w(e,t,!0,!0),f(),e})();var Z=m('<svg xmlns=http://www.w3.org/2000/svg width=24 height=24><path d="m6 18 8.5-6L6 6zm2-8.14L11.03 12 8 14.14zM16 6h2v12h-2z">');const J=(t={})=>(()=>{var e=d(Z);return w(e,t,!0,!0),f(),e})();var O=m('<svg xmlns=http://www.w3.org/2000/svg width=24 height=24><path d="M6 6h2v12H6zm3.5 6 8.5 6V6zm6.5 2.14L12.97 12 16 9.86z">');const W=(t={})=>(()=>{var e=d(O);return w(e,t,!0,!0),f(),e})();var Q=m('<svg xmlns=http://www.w3.org/2000/svg width=24 height=24><path d="M19.03 3.56c-1.67-1.39-3.74-2.3-6.03-2.51v2.01c1.73.19 3.31.88 4.61 1.92zM11 3.06V1.05c-2.29.2-4.36 1.12-6.03 2.51l1.42 1.42A8.93 8.93 0 0 1 11 3.06M4.98 6.39 3.56 4.97C2.17 6.64 1.26 8.71 1.05 11h2.01c.19-1.73.88-3.31 1.92-4.61M20.94 11h2.01c-.21-2.29-1.12-4.36-2.51-6.03l-1.42 1.42A8.93 8.93 0 0 1 20.94 11M7 12l3.44 1.56L12 17l1.56-3.44L17 12l-3.44-1.56L12 7l-1.56 3.44z"></path><path d="M12 21a8.96 8.96 0 0 1-7.46-4H7v-2H1v6h2v-2.7c1.99 2.84 5.27 4.7 9 4.7 4.87 0 9-3.17 10.44-7.56l-1.96-.45C19.25 18.48 15.92 21 12 21">');const T=(t={})=>(()=>{var e=d(Q);return w(e,t,!0,!0),f(),e})();var U=m('<svg xmlns=http://www.w3.org/2000/svg width=24 height=24><path d="m20.38 8.57-1.23 1.85a8 8 0 0 1-.22 7.58H5.07A8 8 0 0 1 15.58 6.85l1.85-1.23A10 10 0 0 0 3.35 19a2 2 0 0 0 1.72 1h13.85a2 2 0 0 0 1.74-1 10 10 0 0 0-.27-10.44z"></path><path d="M10.59 15.41a2 2 0 0 0 2.83 0l5.66-8.49-8.49 5.66a2 2 0 0 0 0 2.83">');const Y=(t={})=>(()=>{var e=d(U);return w(e,t,!0,!0),f(),e})(),K=["execution","attack","defence","direction"],q=console.warn.bind(console);async function tt(t){return et(t,async e=>{for(let i=0;i<2;i++)try{const o=new URL(e,window.location.href);return await(await fetch(o)).arrayBuffer()}catch(o){q("Retrying after ",o)}const a=new URL(e,window.location.href);return await(await fetch(a)).arrayBuffer()})}async function et(t,e){const a=Object.entries(t),r=await Promise.all(a.map(async([i,o])=>[i,await e(o)]));return Object.fromEntries(r)}async function ot(t,e){return new at(tt(t),e)}class at{constructor(e,a){this.speechPack=e,this.playArrayBuffer=a}async play(e){for(const a of e)await this.playSingle(a)}async playSingle(e){const a=await this.speechPack;await this.playArrayBuffer(a[e])}}const rt="/_astro/ai-hanmi-katate-dori.D9jk8p3Y.mp3",it="/_astro/chudan-tsuki.BrFfXMeB.mp3",nt="/_astro/gokyo.0srG7ZHQ.mp3",st="/_astro/gyuako-hanmi-katate-dori.BGKU1Irj.mp3",ct="/_astro/hanmi-handachi-waza.CgzBHatk.mp3",ut="/_astro/ikkyo.CFXMDrKb.mp3",ht="/_astro/irimi-nage.CA6B882B.mp3",lt="/_astro/jo-dori.DY1rSdG_.mp3",dt="/_astro/jo-nage.BsNSZwWa.mp3",mt="/_astro/jodan-tsuki.CgM3QNWj.mp3",_t="/_astro/kata-dori.BMRXzDnG.mp3",gt="/_astro/kata-dori-men-uchi.4xRGKyIq.mp3",kt="/_astro/katate-ryote-dori.tJTHKJO3.mp3",pt="/_astro/kokyu-hoo.BHl7iYAQ.mp3",yt="/_astro/kokyu-nage.M2EYX4Aa.mp3",vt="/_astro/koshi-nage.CpAkLt1W.mp3",ft="/_astro/kote-gaeshi.CVsclVg0.mp3",wt="/_astro/mae-ryo-kata-dori.CJC4u-vF.mp3",$t="/_astro/muna-dori.DlZKLa7s.mp3",xt="/_astro/nikyo.DU7R2odT.mp3",bt="/_astro/ryote-dori.4XoQsVYZ.mp3",St="/_astro/sankyo.D0yfMH1q.mp3",Ct="/_astro/shiho-nage.CAocqfxm.mp3",jt="/_astro/shomen-uchi.Dd6ZuwJs.mp3",Bt="/_astro/sokumen-irimi-nage.Dyvi1wgu.mp3",zt="/_astro/suwari-waza.sxu5IlZL.mp3",Mt="/_astro/tachi-dori.CH6FjBE9.mp3",Pt="/_astro/tachi-waza.UoifgM4v.mp3",At="/_astro/tanto-dori.CAczNXDZ.mp3",Dt="/_astro/tenchi-nage.CmOWHM4v.mp3",It="/_astro/uchi-kaiten-nage.Du2Fg5XT.mp3",Nt="/_astro/uchi-kaiten-sankyo.BXaGNTfg.mp3",Ht="/_astro/soto-kaiten-nage.CmdkNJTS.mp3",Rt="/_astro/ude-kime-nage.DliicUH3.mp3",Lt="/_astro/ude-garami.BxhhieCv.mp3",Et="/_astro/ushiro-eri-dori.Da-hHZWp.mp3",Ft="/_astro/ushiro-katate-dori-kube-shime.B7m8SfwS.mp3",Gt="/_astro/ushiro-ryo-hiji-dori.B1tRhP4p.mp3",Vt="/_astro/ushiro-ryo-kata-dori.B0jts-Yv.mp3",Xt="/_astro/ushiro-ryote-dori.JvTDF8G8.mp3",Zt="/_astro/yokomen-uchi.BNHvU40-.mp3",Jt="/_astro/yonkyo.Cv8QN4OZ.mp3",Ot="/_astro/omote.C0NjVpun.mp3",Wt="/_astro/ura.D0ii5oqJ.mp3",Qt="/_astro/sumi-otoshi.D-Fms4cX.mp3",Tt="/_astro/aiki-otoshi.keSqx0zw.mp3",Ut="/_astro/juji-garami.BtnIG-B8.mp3",Yt="/_astro/hiji-kime-osae.84ekinfN.mp3",Kt="/_astro/shomen-uchi-gyaku-te.DFVuQIBd.mp3",qt="/_astro/shomen-uchi-hon-te.k5rahOS9.mp3",te="/_astro/yokomen-uchi-gyaku-te.Cklg5XYG.mp3",ee="/_astro/yokomen-uchi-hon-te.BN0AuJBh.mp3",oe="/_astro/ai-hanmi-ryote-dori.CZe52sQ-.mp3",ae={"suwari waza":zt,"hanmi handachi waza":ct,"tachi waza":Pt,"tanto dori":At,"jo dori":lt,"jo nage":dt,"tachi dori":Mt,"ai hanmi katate dori":rt,"gyuako hanmi katate dori":st,"kata dori":_t,"ryote dori":bt,"katate ryote dori":kt,"muna dori":$t,"mae ryo kata dori":wt,"shomen uchi":jt,"yokomen uchi":Zt,"chudan tsuki":it,"jodan tsuki":mt,"kata dori men uchi":gt,"ushiro ryote dori":Xt,"ushiro ryo hiji dori":Gt,"ushiro ryo kata dori":Vt,"ushiro katate dori kubi shime":Ft,"ushiro eri dori":Et,"shomen uchi gyaku-te":Kt,"shomen uchi hon-te":qt,"yokomen uchi gyaku-te":te,"yokomen uchi hon-te":ee,"ai hanmi ryote dori":oe,ikkyo:ut,nikyo:xt,sankyo:St,yonkyo:Jt,gokyo:nt,"irimi nage":ht,"kokyu nage":yt,"shiho nage":Ct,"ude kime nage":Rt,"ude garami":Lt,"sokumen irimi nage":Bt,"uchi kaiten nage":It,"soto kaiten nage":Ht,"tenchi nage":Dt,"koshi nage":vt,"kote gaeshi":ft,"kokyu ho":pt,"sumi otoshi":Qt,"aiki otoshi":Tt,"juji garami":Ut,"hiji kimo osae":Yt,"uchi kaiten sankyo":Nt,omote:Ot,ura:Wt},re=["execution","attack","defence"];function ie(t,e){const a=t.direction===B?re:K;if(e==null)return a;if(t.execution!==e.execution)return a.slice(0);if(t.attack!==e.attack)return a.slice(1);if(t.defence!==e.defence)return a.slice(2);if(t.direction!==e.direction)return a.slice(3);throw new Error("All components of the previous technique equal the current one")}function ne(t,e){const a={execution:void 0,attack:void 0,defence:void 0,direction:void 0};for(const r of ie(t,e))se(t,r,a);return a}function se(t,e,a){a[e]=t[e]==B?void 0:t[e]}var ce=m('<div><div class="bg-info-light snap-start border-info border p-2 rounded"></div><!$><!/>'),ue=m("<div><div></div><div></div><div></div><div>");const he=t=>(()=>{var e=d(ce),a=e.firstChild,r=a.nextSibling,[i,o]=y(r.nextSibling);return c(a,()=>R("player.does.not.work")),c(e,l(P,{get each(){return t.techniques},children:(u,h)=>l(le,{technique:u,get previous(){return t.techniques[h()-1]},get active(){return j(u)==j(t.currentTechnique)}})}),i,o),S(()=>p(e,v("overflow-scroll grid gap-2 snap-y shadow-lg",t.class))),e})(),le=t=>{const e=A(()=>ne(t.technique,t.previous)),a=r=>e()[r]?"text-black font-bold":"text-secondary";return(()=>{var r=d(ue),i=r.firstChild,o=i.nextSibling,u=o.nextSibling,h=u.nextSibling;return c(i,()=>t.technique.execution),c(o,()=>t.technique.attack),c(u,()=>t.technique.defence),c(h,()=>e().direction),S(n=>{var k=j(t.technique),s=v(t.active&&"bg-primary-light","border-primary-light border p-2 rounded snap-mandatory","snap-start"),_=v(a("execution"),"text-sm h-6"),g=v(a("attack"),"text-sm h-6"),$=v(a("defence"),"text-xl h-8"),x=v(a("direction"),"text-sm h-6");return k!==n.e&&D(r,"id",n.e=k),s!==n.t&&p(r,n.t=s),_!==n.a&&p(i,n.a=_),g!==n.o&&p(o,n.o=g),$!==n.i&&p(u,n.i=$),x!==n.n&&p(h,n.n=x),n},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0}),r})()};function j(t){return`${t.execution} ${t.attack} ${t.defence} ${t.direction}`.replace(/\W/g,"_")}var de=m('<button><!$><!/><div class="grid grid-cols-3 w-24 gap-1 h-6">'),me=m("<div>");const b=["slow","normal","fast"],_e=t=>{const{buttonClasses:e,iconClasses:a}=F(()=>t),r=A(()=>b.indexOf(t.value));function i(){const o=(r()+1)%b.length;t.onChange(b[o])}return(()=>{var o=d(de),u=o.firstChild,[h,n]=y(u.nextSibling),k=h.nextSibling;return o.$$click=i,c(o,l(Y,{get class(){return a()}}),h,n),c(k,l(P,{each:b,children:(s,_)=>(()=>{var g=d(me);return S(()=>p(g,r()<_()?"border-primary border":"bg-primary border-primary-dark border-1")),g})()})),S(s=>{var _=e(),g=t.disabled;return _!==s.e&&p(o,s.e=_),g!==s.t&&N(o,"disabled",s.t=g),s},{e:void 0,t:void 0}),f(),o})()};I(["click"]);var ge=m('<div class="flex flex-col gap-4">'),ke=m('<div class="grid grid-cols-3 gap-4"><!$><!/><!$><!/><!$><!/>'),pe=m('<div class="grid grid-cols-2 gap-4"><!$><!/><!$><!/>');const xe=t=>{const e=L(t.dojoInfo.id),[a]=z(e.load,{initialValue:[]}),[r]=z(async()=>{const i=await ot(ae,E);return o=>o.direction===B?i.play([o.execution,o.attack,o.defence]):i.play([o.execution,o.attack,o.defence,o.direction])},{initialValue:async()=>{}});return(()=>{var i=d(ge);return c(i,l(H,{fallback:"Loading",get children(){return[l(ye,{get player(){return r()},get techniques(){return a()}}),l(he,{class:"h-[40vh]",get techniques(){return a()},get currentTechnique(){return a()[0]}})]}})),i})()},ye=t=>{const[e,a]=M(!1),[r,i]=M("normal");return[(()=>{var o=d(ke),u=o.firstChild,[h,n]=y(u.nextSibling),k=h.nextSibling,[s,_]=y(k.nextSibling),g=s.nextSibling,[$,x]=y(g.nextSibling);return c(o,l(C,{size:"large",icon:W}),h,n),c(o,l(C,{size:"large",onClick:()=>t.player(t.techniques[0]),icon:X}),s,_),c(o,l(C,{size:"large",icon:J}),$,x),o})(),(()=>{var o=d(pe),u=o.firstChild,[h,n]=y(u.nextSibling),k=h.nextSibling,[s,_]=y(k.nextSibling);return c(o,l(G,{size:"small",icon:T,label:"Autoplay",get value(){return e()},onChange:a}),h,n),c(o,l(_e,{get disabled(){return!e()},get value(){return r()},onChange:i}),s,_),o})()]};export{xe as Reader};
