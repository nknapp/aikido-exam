const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["_astro/main.aFIO1j07.js","_astro/_commonjsHelpers.C4iS2aBk.js"])))=>i.map(i=>d[i]);
import{d as nr,g as ar,b as sr,i as ie,f as ir,e as or,h as lr,j as oe,s as ur,k as cr,r as fr,t as hr}from"./web.BBIpouoX.js";import{i as dr,a as pr,c as mr,_ as be}from"./preload-helper.dLw7uZYB.js";var gr=hr("<button><!$><!/><span>");const Ta=t=>{const e=dr(),{buttonClasses:r,iconClasses:n}=pr(()=>({...t,highlighted:t.value,disabled:t.disabled||!e()}));return(()=>{var a=ar(gr),i=a.firstChild,[s,o]=sr(i.nextSibling),l=s.nextSibling;return a.$$click=()=>t.onChange(!t.value),ie(a,(()=>{var c=ir(()=>!!t.icon);return()=>c()&&or(t.icon,{get class(){return n()}})})(),s,o),ie(l,()=>t.label),lr(c=>{var h=r(),f=t.value,S=t.disabled||!e(),d=mr(t.hideLabel&&"sr-only");return h!==c.e&&oe(a,c.e=h),f!==c.t&&ur(a,"aria-checked",c.t=f),S!==c.a&&cr(a,"disabled",c.a=S),d!==c.o&&oe(l,c.o=d),c},{e:void 0,t:void 0,a:void 0,o:void 0}),fr(),a})()};nr(["click"]);var wr={},yr=Object.defineProperty,br=(t,e,r)=>e in t?yr(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,ve=(t,e,r)=>(br(t,typeof e!="symbol"?e+"":e,r),r),te=(t,e,r)=>{if(!e.has(t))throw TypeError("Cannot "+r)},u=(t,e,r)=>(te(t,e,"read from private field"),r?r.call(t):e.get(t)),m=(t,e,r)=>{if(e.has(t))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(t):e.set(t,r)},w=(t,e,r,n)=>(te(t,e,"write to private field"),n?n.call(t,r):e.set(t,r),r),$=(t,e,r)=>(te(t,e,"access private method"),r),F="astro-i18n",vr=`${F}.config`,le="github.com/alexandre-fernandez/astro-i18n/issues",$r=class extends Error{constructor(t){super(t?`${F}: Unreachable code executed (at "${t}"), please open an issue at "${le}".`:`${F}: Unreachable code executed, please open an issue at "${le}".`)}},Sr=$r;function b(){throw new Sr}function jr(t=new Error("Something went wrong.")){throw t}var Nt,$e,st=class{constructor(t){m(this,Nt),ve(this,"regexp"),this.regexp=new RegExp(t.source,t.flags)}static fromString(t,e){return new st(new RegExp(t,e))}get source(){return this.regexp.source}get flags(){return this.regexp.flags}add(t){return this.regexp=new RegExp(`${this.regexp.source}${t.source}`,this.regexp.flags),this}test(t){return this.regexp.test(t)}exec(t,e){let r=$(this,Nt,$e).call(this,t),n=r.next();for(;!n.done&&e(n.value)!==st.BREAK;)n=r.next();return this}match(t){let e=null;return this.exec(t,r=>(e=r,st.BREAK)),e}clone(){return new st(new RegExp(this.regexp.source,this.regexp.flags))}toMatcher(){return this.match.bind(this)}},Se=st;Nt=new WeakSet,$e=function*(t){let e=this.regexp;e.flags.includes("g")||(e=new RegExp(this.regexp.source,`${this.regexp.flags}g`));let r=e.exec(t);for(;r!==null;)r&&(yield{range:[r.index,r.index+r[0].length],match:[...r]}),r=e.exec(t)},ve(Se,"BREAK","break");var p=Se,je=class{#e;#t;constructor({source:t,flags:e}){this.#e=t,this.#t=e}static fromRegex(t){return new je(t.regexp)}appendPattern(t){return this.#e=`${this.#e}${t}`,this}matchTrimifiable(){return this.#e=`\\s*${this.#e}\\s*`,this}assertStarting(){return this.#e=`^${this.#e}`,this}assertEnding(){return this.#e=`${this.#e}$`,this}addGroup(){return this.#e=`(${this.#e})`,this}addGlobalFlag(){return this.#t.includes("g")||(this.#t=`${this.#t}g`),this}build(){return new p(new RegExp(this.#e,this.#t))}},q=je;function mt(t,e,r){if(!e(t)){let n="";throw t?typeof t=="object"?n=`
${t.constructor.name}
${JSON.stringify(t,null,4)}`:typeof t=="symbol"?n=`Symbol("${t.description}")`:n=typeof t=="string"?`"${t}"`:`${t}`:n=`${t}`,!r&&e.name.startsWith("is")&&(r=e.name.slice(2)),new TypeError(r?`Unexpected type (expecting \`${r}\`), found: ${n}`:`Unexpected type, found: ${n}`)}}function xr(t){return typeof t=="number"&&!Number.isNaN(t)}function kr(t){return t instanceof Date&&!Number.isNaN(t.getTime())}function gt(t){return Array.isArray(t)}function dt(t){return gt(t)&&t.every(e=>typeof e=="string")}function v(t){return!!t&&typeof t=="object"}function ue(t){return v(t)?Object.getPrototypeOf(t)===Object.prototype:!1}var at,Q,it,It=class{static get path(){return $(this,Q,it).call(this,"path")}static get posix(){return this.path.then(({posix:t})=>t)}static get fs(){return $(this,Q,it).call(this,"fs")}static get url(){return $(this,Q,it).call(this,"url")}static get module(){return $(this,Q,it).call(this,"module")}};at=new WeakMap,Q=new WeakSet,it=async function(t){if(u(this,at)[t])return u(this,at)[t];let e=await be(()=>import(`node:${t}`),[]);return u(this,at)[t]=e,e},m(It,Q),m(It,at,{});var k=It;async function vt(t){let{sep:e,posix:r}=await k.path;return t.split(e).join(r.sep)}async function ct(t){let e=await Lr(t),r=t.split(e);return r.pop(),r.join(e)}function Or(t){switch(t){case"":return!0;case"/":return!0;case"\\":return!0;default:return!/[/\\]/.test(t)}}async function Lr(t){let{sep:e}=await k.path,r=t.split("/").length-1,n=t.split("\\").length-1;return r>n?"/":n>r?"\\":e}function N(t,e,r){let{mode:n,mutable:a}={mode:"replace",mutable:!0,...r},i=a?t:structuredClone(t);for(let[s,o]of Object.entries(e)){let l=i[s];if(Object.hasOwn(i,s)){Tt(l)&&Tt(o)?N(l,o):n==="replace"&&(i[s]=e[s]);continue}i[s]=e[s]}return a?void 0:i}function ft(t,e,r){let n=typeof e=="string"?[e]:e,a=t;for(let[i,s]of n.entries()){if(i===n.length-1){a[s]=r;break}Tt(a[s])||(a[s]={}),a=a[s]}}function Tt(t){return typeof t!="object"?!1:Object.getPrototypeOf(t)===Object.prototype}var Rr=class extends Error{constructor(t){super(t?`Peer dependency \`${t}\` was not found, if it's not already done try installing it.`:"A dependency was not found.")}},Er=Rr,_r=class extends Error{constructor(t){super(t?`No file was found for the given path (${t}).`:"No file was found for the given path.")}},xe=_r,Pr=class extends Error{constructor(t=[]){super(t.length>0?`Invalid file type, supported formats are: "${t.join('", "')}"`:"Invalid file type, format not supported.")}},ke=Pr,Cr=class extends Error{constructor(t){super(t?`Invalid format, could not parse JSON (${t}).`:"Invalid format, could not parse JSON.")}},Wr=Cr;async function T(t){if(!t)return!1;let{existsSync:e,lstatSync:r}=await k.fs;return e(t)&&r(t).isDirectory()}async function Ot(t){if(!t)return!1;let{existsSync:e,lstatSync:r}=await k.fs;return e(t)&&!r(t).isDirectory()}async function Nr(t){let{accessSync:e,constants:r}=await k.fs;try{return e(t,r.R_OK),!0}catch{return!1}}async function Oe(t,e){let{readdirSync:r}=await k.fs,n=r(t);await e(await vt(t),n);for(let a of n){let i=`${t}/${a}`;await T(i)&&await Oe(i,e)}}async function Ir(t){let e=null;e=await be(()=>import("./main.aFIO1j07.js").then(n=>n.m),__vite__mapDeps([0,1]));let r=/\.(js|cjs|mjs|ts)$/;if(!Ot(t))throw new xe(t);if(!r.test(t))throw new ke(["js","cjs","mjs","ts"]);try{let{outputFiles:n}=await e.build({entryPoints:[t],bundle:!0,external:["esbuild"],format:"cjs",platform:"node",write:!1}),a=new TextDecoder().decode(n[0]?.contents);return a?Tr(a,t.replace(r,".cjs")):{}}catch{throw new Er("esbuild")}}async function wt(t){if(!Ot(t))throw new xe(t);if(!/\.json$/.test(t))throw new ke(["json"]);let{readFileSync:e}=await k.fs,r=e(t,{encoding:"utf8"});try{return JSON.parse(r)}catch{throw new Wr(t)}}async function Tr(t,e){let{Module:r}=await k.module,n=e.split("/").slice(0,-1).join("/"),a={module:new r(e),require(i){return this.module.require(i)}};return a.module.paths=r._nodeModulePaths(n),a.module.filename=e,a.module.exports={},a.require=i=>a.module.require(i),Object.assign(a.require,{resolve:i=>r._resolveFilename(i,a.module)}),new Function("exports","require","module","__filename","__dirname",t)(a.module.exports,a.require,a.module,e,n),a.module.exports}var B="break",Dr=["json","js","cjs","mjs","ts"],Dt="i18n",ht="pages",Mr=class extends Error{constructor(){super(`Could not find astro "${ht}" directory.`)}},Ar=Mr,Fr=new p(/(\/[^\s/]+)?(\/[^\s/]+)\.astro$/),Pt=new p(/^---\n([\S\s]+)\n---\n/),Vr=new p(/export\s*(?:const\s+prerender|var\s+prerender|let\s+prerender|prerender)(?:\s*=\s*)?(true|false)?|export\s*?{\s*?prerender\s*?}/),qr=new p(/export\s+(?:async\s+)?(?:function\s+|const\s+|var\s+|let\s+)getStaticPaths|export\s*{\s*getStaticPaths\s*}/),zr=class{#e;#t;#r;#o;#l;#s=void 0;#n=void 0;#a=null;#i=null;constructor({name:t,route:e,path:r,translations:n,routes:a}){this.#e=t,this.#t=e,this.#r=r,this.#o=n,this.#l=a}get name(){return this.#e}get route(){return this.#t}get path(){return this.#r}get translations(){return this.#o}get routes(){return this.#l}async getContent(){if(this.#a)return this.#a;let{readFileSync:t}=await k.fs;return this.#a=t(this.#r,{encoding:"utf8"}),this.#i=Pt.match(this.#a)?.match[0]||null,this.#a}async getFrontmatter(){return this.#i?this.#i:(this.getContent(),this.#i)}async hasGetStaticPaths(){if(typeof this.#s<"u")return this.#s;let{readFileSync:t}=await k.fs,e=t(this.#r,{encoding:"utf8"}),r=Pt.match(e)?.match[0];return this.#s=r?qr.test(r):!1,this.#s}async prerender(){if(typeof this.#n<"u")return this.#n;let{readFileSync:t}=await k.fs,e=t(this.#r,{encoding:"utf8"}),r=Pt.match(e)?.match[0];if(!r)return this.#n=!1,this.#n;let{match:n}=Vr.match(r)||{};return n?n[1]?this.#n=n[1]==="true":this.#n=!0:this.#n=null,this.#n}async getProxy(t,e){let r=this.path.lastIndexOf("src/pages");if(r=r<0?null:r+9,!r)return null;let n="";t=t.replace(/\/$/,"")||"/";let a=this.#r.slice(r),i=t.split("/").length-1,s=`${"../".repeat(i)}${a.slice(1)}`;if(n+=`---
import Page from "${s}"
`,await this.hasGetStaticPaths()){let{locale:l,route:c}=e.internals.splitLocaleAndRoute(t);n+=`import { getStaticPaths as proxyGetStaticPaths } from "${s}"
/* @ts-ignore */
export const getStaticPaths = (props) => proxyGetStaticPaths({ ...props, astroI18n: `,n+=`{ locale: "${l}", route: "${c}", primaryLocale: "${e.primaryLocale}", secondaryLocales: ["${e.secondaryLocales.join('", "')}"] } })
`}let o=await this.prerender();return typeof o=="boolean"&&(n+=o?`export const prerender = true
`:`export const prerender = false
`),n+=`const { props } = Astro
---
<Page {...props} />`,n}},ce=zr,Ur=class extends Error{constructor(t){super(t?`Invalid pattern (${t.source}) given, the pattern should match the route name at index 1 (optional), the route locale at index 2 and the translated name at index 3 (optional).`:"Invalid pattern given, the pattern should match the route name at index 1 (optional), the route locale at index 2 and the translated name at index 3 (optional).")}},Gr=Ur;function et(t,e=!0){if(e){if(!v(t))return!1;for(let r of Object.values(t))if(!et(r,!1))return!1;return!0}if(typeof t=="string")return!0;if(!v(t))return!1;for(let r of Object.values(t))if(!et(r,!1))return!1;return!0}async function Jr(t,e={}){let{join:r}=await k.path,n=`${t}/${e.srcDir}/${ht}`;if(!await T(n))throw new Ar;let a={},i=(e.secondaryLocales||[]).map(d=>`/${e.srcDir}/${ht}/${d}`),s={i18n:Dt,pages:Dt,...e.translationDirectory},o=[e.primaryLocale||"en",...e.secondaryLocales||[]],l=p.fromString(`(\\/[^\\/\\s]+)?(?:\\/_?${s.pages})?\\/_?(${o.join("|")})(\\.[^\\.\\s]+)?\\.json$`),c=p.fromString(`_?${s.pages}`),h=e.showPrimaryLocale?r(n,e.primaryLocale||"en"):n;await Oe(h,async(d,y)=>{if(!i.some(g=>d.includes(g)))for(let g of y){let j=`${d}/${g}`;if(await T(j))continue;let O=j.replace(n,"");if(O.endsWith(".astro")){let{match:W,range:_t}=Fr.match(O)||{};if(!W||!W[2]||!_t)continue;let I="index",H="/";if(W[1]?W[2]==="/index"?(I=W[1].replace("/",""),H=`${O.slice(0,_t[0])}/${I}`):(I=W[2].replace("/",""),H=`${O.slice(0,_t[0]+W[1].length)}/${I}`):W[2]!=="/index"&&(I=W[2].replace("/",""),H=`/${I}`),I.startsWith("_"))continue;a[H]={...a[H],name:I,route:H,path:j};continue}if(!O.endsWith(".json"))continue;let{match:z,range:ne}=l.match(O)||{};if(!z||!ne)continue;let E=`${O.slice(0,ne[0])}${z[1]||"/"}`;c.test(E)&&(E="/");let yt=z[2]||b(),ae=E.split("/").slice(-1).join("")||"index",se=z[3]?z[3].replace(".",""):null,Et=await wt(j);mt(Et,et,`${yt}.PageTranslations`),N(Et,a[E]?.translations?.[yt]||{});let er={...a[E]?.translations,[yt]:Et},rr=se?{...a[E]?.routes,[yt]:{[ae]:se}}:{...a[E]?.routes};a[E]={...a[E],name:ae,route:E,translations:er,routes:rr}}});let f=[];for(let d of Object.values(a))!d.path||!d.name||!d.route||f.push({translations:{},routes:{},...d});let S=`${t}/${e.srcDir}/${s.i18n}/${ht}`;if(!await T(S))return f.map(d=>new ce(d));for(let d of f){let y=`${S}${d.route}`.replace(/\/$/,"");if(!await T(y))continue;let g=await fe(y,d.name,l);for(let{translations:j,routes:O}of g)N(d.translations,j),N(d.routes,O);if(y=`${y}/${s.pages}`,!!await T(y)){g=await fe(y,d.name,l);for(let{translations:j,routes:O}of g)N(d.translations,j),N(d.routes,O)}}return f.map(d=>new ce(d))}async function fe(t,e,r){let{readdirSync:n}=await k.fs,a=[];for(let i of n(t,{encoding:"utf8"})){let{match:s}=r.match(`/${i}`)||{};if(!s)continue;let o=s[2]||jr(new Gr),l=s[3]?s[3].replace(".",""):null,c=await wt(`${t}/${i}`);mt(c,et,`${o}.PageTranslations`),a.push({translations:{[o]:c},routes:l?{[o]:{[e]:l}}:{}})}return a}var Br=class extends Error{constructor(t){super(t?`Unable to find project root. ${t}`:"Unable to find project root.")}},Kr=Br,Hr=p.fromString(`${F}\\.config\\.(${Dr.join("|")})`),Yr=p.fromString("astro\\.config\\.(js|cjs|mjs|ts)"),Zr=new p(/[/\\]?node_modules/),Qr=new p(/.+?node_modules/),Xr=new p(/(?:package|deno)\.json/),tn=new p(/package\.json/),en=new p(/deno\.jsonc?/),rn=new p(/deps\.ts/),Ct=".",J="common",nn=q.fromRegex(Hr).assertEnding().build(),Le=q.fromRegex(Yr).assertEnding().build();function an(t){let e={routes:[],extra:[],common:void 0};for(let r of Object.keys(t)){if(r.startsWith("/")){e.routes.push(r);continue}if(r===J){e.common=J;continue}e.extra.push(r)}return e}async function sn(t,e={}){let r=`${t}/${e.srcDir}/${e.translationDirectory?.i18n||Dt}`,n={};if(!await T(r))return n;let{readdirSync:a}=await k.fs,i=[e.primaryLocale||"en",...e.secondaryLocales||[]],s=p.fromString(`(${i.join("|")})\\.json`);for(let o of a(r)){if(o===ht)continue;let l=`${r}/${o}`;if(await T(l))for(let c of a(l)){let{match:h}=s.match(c)||{};if(!h?.[1])continue;let f=h[1],S=await wt(`${l}/${c}`);mt(S,et,`${f}.GroupTranslations`),ft(n,[o,f],S)}}return n}async function Wt(t){return X(Re(t),nn.regexp)}async function on(t){let e=await X(Re(t),Le.regexp);if(!e)return null;let{readdirSync:r}=await k.fs,n=await ct(e),a=r(n),i=a.find(s=>tn.test(s));if(i){let s=await wt(`${n}/${i}`);if(ue(s)&&ue(s.dependencies)&&s.dependencies[F])return n}return a.find(s=>en.test(s))||a.find(s=>rn.test(s))?n:null}async function ln(t){let{readdirSync:e}=await k.fs;return typeof e(t).find(r=>Le.test(r))=="string"}function Re(t){let{match:e}=Qr.match(t)||{};return e?e[0]?.replace(Zr.regexp,"")||"/":t}async function X(t,e,r=1,n=!0){let{readdirSync:a}=await k.fs;if(await Ot(t))return e.test(t)?t:n?X(await ct(t),e,1,!1):null;if(!await Nr(t)||Or(t))return null;let i=a(t),s=i.find(l=>e.test(l));if(s)return`${t}/${s}`;if(r>0&&typeof i.find(l=>Xr.test(l))!="string")return X(await ct(t),e,1,!1);let o=i.filter(l=>{switch(l){case"node_modules":return!1;case"src":return!1;case"public":return!1;case"dist":return!1;case"build":return!1;default:return!l.startsWith(".")}});for(let l of o){let c=`${t}/${l}`;if(await Ot(t))continue;let h=await X(c,e,-1,!1);if(typeof h=="string")return h}return r>0?X(await ct(t),e,1,!1):null}var un=class extends Error{constructor(){super(`Unable to find ${vr}.`)}},cn=un;function fn(t){if(!v(t))return!1;for(let e of Object.values(t)){if(!v(e))return!1;for(let r of Object.values(e))if(typeof r!="string")return!1}return!0}function hn(t){if(!v(t))return!1;for(let e of Object.values(t)){if(!v(e))return!1;for(let r of Object.values(e))if(!et(r))return!1}return!0}function dn(t){if(!gt(t))return!1;for(let e of t){if(!v(e))return!1;let r=Object.entries(e);if(r.length<2)return!1;for(let[n,a]of r)switch(n){case"groups":{if(!dt(a))return!1;break}case"routes":{if(!dt(a))return!1;break}default:return!1}}return!0}function pn(t){if(!v(t))return!1;for(let[e,r]of Object.entries(t))if(e!=="i18n"&&e!=="pages"||typeof r!="string")return!1;return!0}function mn(t){if(!v(t))return!1;for(let[e,r]of Object.entries(t))switch(e){case"primaryLocale":{if(typeof r!="string")return!1;break}case"secondaryLocales":{if(!dt(r))return!1;break}case"fallbackLocale":{if(typeof r!="string")return!1;break}case"showPrimaryLocale":{if(typeof r!="boolean")return!1;break}case"trailingSlash":{if(r!=="always"&&r!=="never")return!1;break}case"run":{if(r!=="server"&&r!=="client+server")return!1;break}case"translations":{if(!hn(r))return!1;break}case"translationLoadingRules":{if(!dn(r))return!1;break}case"translationDirectory":{if(!pn(r))return!1;break}case"routes":{if(!fn(r))return!1;break}case"srcDir":{if(typeof r!="string")return!1;break}default:return!1}return!0}function gn(t){if(!v(t))return!1;for(let[e,r]of Object.entries(t))switch(e){case"primaryLocale":{if(typeof r!="string")return!1;break}case"secondaryLocales":{if(!dt(r))return!1;break}case"showPrimaryLocale":{if(typeof r!="boolean")return!1;break}case"trailingSlash":{if(r!=="always"&&r!=="never")return!1;break}default:return!1}return!0}var wn=class extends Error{constructor(t){super(t?`Your primaryLocale ("${t}") cannot be contained in your secondaryLocales array.`:"Your primaryLocale cannot be contained in your secondaryLocales array.")}},yn=wn,Ee=class{primaryLocale;secondaryLocales;fallbackLocale;showPrimaryLocale;trailingSlash;run;translations;translationLoadingRules;translationDirectory;routes;path;srcDir;constructor({primaryLocale:t,secondaryLocales:e,fallbackLocale:r,showPrimaryLocale:n,trailingSlash:a,run:i,translations:s,translationLoadingRules:o,translationDirectory:l,routes:c,srcDir:h}={},f=""){if(this.primaryLocale=t||"en",this.secondaryLocales=e||[],this.fallbackLocale=r??(t||""),this.showPrimaryLocale=n||!1,this.trailingSlash=a||"never",this.run=i||"client+server",this.translations=s||{},this.translationLoadingRules=o||[],this.translationDirectory=l||{},this.routes=c||{},this.path=f||"",this.srcDir=h||"src",this.secondaryLocales.includes(this.primaryLocale))throw new yn(this.primaryLocale)}get pages(){return Object.keys(this.translations).filter(t=>t.startsWith("/"))}static async fromFilesystem(t=null){let{fileURLToPath:e}=await k.url;if(!t){let n="";typeof process<"u"&&(n=wr.PWD||""),t=await Wt(await vt(n))}if(!t){let n="";typeof process<"u"&&(n=process.cwd()),t=await Wt(await vt(n))}if(!t){let n="";typeof import.meta=="object"&&typeof import.meta.url=="string"?n=e(import.meta.url):typeof __filename=="string"&&(n=__filename),n&&(t=await Wt(await vt(n)))}if(!t)throw new cn;let r=t.endsWith(".json")?await wt(t):(await Ir(t)).default;return mt(r,mn,"AstroI18nConfig"),new Ee(r,t).loadFilesystemTranslations()}async loadFilesystemTranslations(){if(!this.path)return this;let t=await ct(this.path);if(!await ln(t)){let n=await on(this.path);if(!n)throw new Kr;t=n}let e=await Jr(t,this);for(let n of e)this.translations[n.route]||(this.translations[n.route]={}),N(this.translations[n.route]||b(),n.translations),this.routes||(this.routes={}),N(this.routes,n.routes);let r=await sn(t,this);return N(this.translations,r),this}toClientSideObject(){return{primaryLocale:this.primaryLocale,secondaryLocales:this.secondaryLocales,showPrimaryLocale:this.showPrimaryLocale,trailingSlash:this.trailingSlash}}toObject(){return{primaryLocale:this.primaryLocale,secondaryLocales:this.secondaryLocales,fallbackLocale:this.fallbackLocale,showPrimaryLocale:this.showPrimaryLocale,trailingSlash:this.trailingSlash,run:this.run,translations:this.translations,translationLoadingRules:this.translationLoadingRules,translationDirectory:this.translationDirectory,routes:this.routes}}toString(){return JSON.stringify(this.toObject(),null,"	")}},ot=Ee,_e=(t=>(t.NONE="none",t.NODE="node",t.BROWSER="browser",t))(_e||{}),Y=_e,bn=new p(/[$A-Z_a-z]/),ee=q.fromRegex(bn).appendPattern("[\\w$]*").build(),vn=new p(/-?\d+(?:\.\d+)?/),$n=new p(/^\s*$/),he=new p(/{{(.+)}}/),Pe=new p(/{#(.+?)#}/),Sn=p.fromString(`\\(\\s*(${ee.source})\\s*\\)`),jn=p.fromString(`>\\s*(${ee.source})\\s*(\\()?`),xn=new p(/(?:function)?\s*[\w$]*\s*\(([\S\s]*?)\)\s*(?:=>)?\s*{?([\S\s]*)/),kn=class extends Error{constructor(t=""){if(t){let e=t.slice(0,20);e.length===20&&(t=`${e.slice(0,17)}...`)}super(t?`Cannot parse unknown value (${t}).`:"Cannot parse unknown value")}},Ce=kn,On=class extends Error{constructor(t=""){super(t?`Cannot procces untrimmed value ("${t}").`:"Cannot procces untrimmed value")}},We=On,Ne=q.fromRegex(vn).assertStarting().build().toMatcher(),Ie=q.fromRegex(ee).assertStarting().build().toMatcher();function Ln(t){return $n.test(t)?{range:[0,0],match:[""]}:null}function Te(t){return t.startsWith("undefined")?{range:[0,9],match:["undefined"]}:null}function De(t){return t.startsWith("null")?{range:[0,4],match:["null"]}:null}function Me(t){return t.startsWith("true")?{range:[0,4],match:["true"]}:t.startsWith("false")?{range:[0,5],match:["false"]}:null}function Ae(t){let e=t[0];if(e!=='"'&&e!=="'"&&e!=="`")return null;let r=t.slice(1).indexOf(e);return r===-1?null:(r+=2,{range:[0,r],match:[t.slice(0,r)]})}function Rn(t){if(!t.startsWith("{"))return null;let e=0;for(let r=0;r<t.length;r+=1){let n=t[r];if(n==="{"?e+=1:n==="}"&&(e-=1),e===0){let a=r+1;return{range:[0,a],match:[t.slice(0,a)]}}}return null}function Fe(t){if(!t.startsWith("["))return null;let e=0;for(let r=0;r<t.length;r+=1){let n=t[r];if(n==="["?e+=1:n==="]"&&(e-=1),e===0){let a=r+1;return{range:[0,a],match:[t.slice(0,a)]}}}return null}function K(t,e){let r=0,n=!1,a=null;for(let i=0;i<t.length;i+=1){let s=t[i]||b(),o=s==='"'||s==="'"||s==="`",l=!1,c=!1;if(s==="{"||s==="["?(r+=1,l=!0):s==="}"||s==="]"?(r-=1,c=!0):!n&&o?(r+=1,n=!0,a=s,l=!0):n&&s===a&&(r-=1,n=!1,a=null,c=!0),e(s,i,r,l,c)===B)break}}var En=q.fromRegex(Sn).assertStarting().build().toMatcher(),_n=q.fromRegex(jn).assertStarting().build().toMatcher();function Ve(t){t=t.trim();let e=t,{value:r,type:n,end:a}=Pn(t);t=t.slice(a).trim();let i=null,s=En(t);if(s){let{match:l,range:c}=s;i=l[1]||b(),t=t.slice(c[1]).trim()}let o=[];for(;t.length>0;){t[0]===")"&&(t=t.slice(1));let{match:l,range:c}=_n(t)||{};if(!l?.[1]||!c)break;if(t=t.slice(c[1]).trim(),!l[2]){o.push({name:l[1],args:[]});continue}let{args:h,end:f}=Cn(t);t=t.slice(f).trim(),o.push({name:l[1],args:h})}return{raw:e,value:r,type:n,alias:i,formatters:o}}function Z(t){let e=[];t=t.trim();let{type:r,value:n,alias:a,formatters:i}=Ve(t);for(let s of i)for(let o of s.args)for(let l of Z(o))e.push(l);switch(r){case 4:{e.push(a||n);break}case 6:{let s="",o=!0;K(t,(l,c,h,f)=>{if(h===0){for(let S of Z(s))e.push(S);return B}if(o){if(f&&l==="{"||/\s/.test(l))return null;if(l===":")return o=!1,null}else if(l===","){for(let S of Z(s))e.push(S);return s="",o=!0,null}return o||(s+=l),null});break}case 7:{let s="";K(t,(o,l,c,h)=>{if(c===0){for(let f of Z(s))e.push(f);return B}if(h&&o==="[")return null;if(o===","){for(let f of Z(s))e.push(f);return s="",null}return s+=o,null});break}}return e}function Pn(t){if(/^\s+\S/.test(t))throw new We(t);let e=Ln(t);if(e)return{value:"undefined",type:0,end:e.range[1]};if(e=Te(t),e)return{value:e.match[0]||b(),type:0,end:e.range[1]};if(e=De(t),e)return{value:e.match[0]||b(),type:1,end:e.range[1]};if(e=Me(t),e)return{value:e.match[0]||b(),type:2,end:e.range[1]};if(e=Ne(t),e)return{value:e.match[0]||b(),type:3,end:e.range[1]};if(e=Ie(t),e)return{value:e.match[0]||b(),type:4,end:e.range[1]};if(e=Ae(t),e)return{value:e.match[0]||b(),type:5,end:e.range[1]};if(e=Rn(t),e)return{value:e.match[0]||b(),type:6,end:e.range[1]};if(e=Fe(t),e)return{value:e.match[0]||b(),type:7,end:e.range[1]};throw new Ce(t)}function Cn(t){let e={args:[],end:0},r="",n=!1;return K(t,(a,i,s)=>(a==="("&&(n=!0),s>0?(r+=a,null):a===","?(e.args.push(r.trim()),r="",null):a===")"?(n&&(r+=a),e.args.push(r.trim()),e.end=i+1,r="",B):(r+=a,null))),e}function Wn(t,e,r,n,a,i){let s;switch(r){case 0:{s=void 0;break}case 1:{s=null;break}case 2:{if(t==="true"){s=!0;break}if(t==="false"){s=!1;break}}case 3:{s=t.includes(".")?Number.parseFloat(t):Number.parseInt(t,10);break}case 4:{if(e){s=a[e];break}s=a[t];break}case 5:{s=t.slice(1,-1);break}case 6:{s=Nn(t,a,i);break}case 7:{s=In(t,a,i);break}default:throw new Ce(t)}for(let{name:o,args:l}of n){let c=i[o];if(!c)return;let h=l.map(f=>new rt(f,a,i).value);s=c(s,...h)}return s}function Nn(t,e,r){let n={},a="",i="",s=!0;return K(t,(o,l,c,h)=>{if(c===0)return n[a]=new rt(i,e,r).value,B;if(c===1){if(s){if(h||/\s/.test(o))return null;if(o===":")return s=!1,null;a+=o}else if(o===",")return n[a]=new rt(i,e,r).value,a="",i="",s=!0,null}return s||(i+=o),null}),n}function In(t,e,r){let n=[],a="";return K(t,(i,s,o,l)=>{if(o===0)return n.push(new rt(a,e,r).value),B;if(o===1){if(l)return null;if(i===",")return n.push(new rt(a,e,r).value),a="",null}return a+=i,null}),n}var Tn=class{raw;value;alias=null;constructor(t,e,r){let{raw:n,value:a,type:i,alias:s,formatters:o}=Ve(t);this.raw=n,this.alias=s,this.value=Wn(a,s,i,o,e,r)}},rt=Tn,Dn=class extends Error{constructor(t){super(t?`Variant priority must be of type number (found: (${t})).`:"Variant priority must be of type number.")}},Mn=Dn,An=class extends Error{constructor(t){super(t?`Invalid variant property key (${t}), it must be a valid variable name.`:"Invalid variant property value, it must be a valid variable name.")}},Fn=An,de="undefined, null, number, string, boolean and flat arrays of these types.",Vn=class extends Error{constructor(t){super(t?`Invalid variant property value (${t}), accepted types are: ${de}.`:`Invalid variant property value, accepted types are: ${de}.`)}},Rt=Vn;function Mt(t){if(/^\s/.test(t))throw new We(t);let e=Te(t);if(e)return{value:e.match[0]||b(),type:0,end:e.range[1]};if(e=De(t),e)return{value:e.match[0]||b(),type:1,end:e.range[1]};if(e=Me(t),e)return{value:e.match[0]||b(),type:2,end:e.range[1]};if(e=Ne(t),e)return{value:e.match[0]||b(),type:3,end:e.range[1]};if(e=Ae(t),e)return{value:e.match[0]||b(),type:5,end:e.range[1]};if(e=Fe(t),e)return{value:e.match[0]||b(),type:7,end:e.range[1]};throw new Rt(t)}function qe(t){return t===null||typeof t>"u"||typeof t=="boolean"||typeof t=="number"||typeof t=="string"}function qn(t){return Array.isArray(t)?t.every(e=>qe(e)):!1}function Lt(t,e){let r;switch(e){case 0:{r=void 0;break}case 1:{r=null;break}case 2:{if(t==="true"){r=!0;break}if(t==="false"){r=!1;break}}case 3:{r=t.includes(".")?Number.parseFloat(t):Number.parseInt(t,10);break}case 5:{r=t.slice(1,-1);break}case 7:{r=zn(t);break}default:throw new Rt(t)}return r}function zn(t){let e=[],r="";return K(t,(n,a,i,s)=>{if(i===0){let{value:o,type:l}=Mt(r.trim()),c=Lt(o,l);if(!qe(c))throw new Rt(r);return e.push(c),B}if(i===1){if(s)return null;if(n===","){let{value:o,type:l}=Mt(r.trim());return e.push(Lt(o,l)),r="",null}}return r+=n,null}),e}var Un="$priority",ze=class{raw;priority;properties;value;constructor({raw:t,priority:e,properties:r,value:n}={}){this.raw=t||"",this.priority=e||0,this.properties=r||[],this.value=n||""}static fromString(t,e){let r=new ze;r.value=e;let n=t.trim();r.raw=n;let a="",i="",s=!0;return K(n,(o,l,c)=>{let h=l===n.length-1;if(s)return/\s/.test(o)?null:o===":"?(s=!1,null):(a+=o,null);if(c>0)return i+=o,null;if(h&&(i+=o),o===","||h){let f=Ie(a.trim())?.match[0];if(!f)throw new Fn(a);let{value:S,type:d}=Mt(i.trim());if(f===Un){let j=Lt(S,d);if(typeof j!="number")throw new Mn(S);return r.priority=j*.001,null}let y=Lt(S,d),g=Array.isArray(y)?y:[y];if(!qn(g))throw new Rt(i);return r.properties.push({name:f,values:g}),a="",i="",s=!0,null}return i+=o,null}),r}calculateMatchingScore(t){let e=0;for(let{name:r,values:n}of this.properties){if(!Object.hasOwn(t,r))continue;let a=t[r],i=[];for(let s of n){if(typeof a=="number"&&typeof s=="number"){let o=a-s;if(o===0){i.push(1e3);continue}i.push(Math.abs(1e3/o)-1);continue}a===s&&i.push(1e3)}i.length!==0&&(e+=Math.max(...i))}return e>0?e+this.priority:e}},At=ze,Gn=class extends Error{constructor(){super("Cannot use a variant on a key which value is not a string.")}},Jn=Gn;function Ue(t,e="",r={}){for(let[n,a]of Object.entries(t)){if(typeof a=="string"){let{match:i,range:s}=he.match(n)||{};if(!i?.[1]||!s){let l=`${e}${Ct}${n}`.replace(/^\./,"");if(r[l]){r[l].default=a;continue}r[l]={default:a,variants:[]};continue}let o=`${e}${Ct}${n.slice(0,s[0])+n.slice(s[1])}`.replace(/^\./,"");if(r[o]){r[o].variants.push(At.fromString(i[1],a));continue}r[o]={variants:[At.fromString(i[1],a)]};continue}if(he.test(n))throw new Jn;Ue(a,`${e}${Ct}${n}`.replace(/^\./,""),r)}return r}function Bn(t,e,r){let n=[];Pe.exec(t,({match:i,range:s})=>{if(!i[1])return;let{value:o}=new rt(i[1],e,r);n.push({value:Kn(o),range:s})});let a=t;for(let i=n.length-1;i>=0;i-=1){let{value:s,range:o}=n[i]||b();a=a.slice(0,o[0])+s+a.slice(o[1])}return a}function Kn(t){switch(typeof t){case"undefined":return"";case"string":return t;case"bigint":return t.toString();case"number":return t.toString();case"boolean":return t.toString();case"symbol":return`Symbol(${t.description})`||"Symbol";case"function":return t.name;case"object":return t?Object.hasOwn(t,"toString")&&typeof t.toString=="function"?t.toString():JSON.stringify(t,null,"	"):"";default:return""}}function Hn(t){for(let e of Object.values(t))for(let r of Object.values(e))for(let n of Object.values(r))n.variants=n.variants.map(a=>new At(a));return t}var re=new p(/\[(\.{3})?([\w-]+)]/),Yn=new p(/(?:https?:\/{2})?[\w#%+.:=@~-]{1,256}\.[\d()A-Za-z]{1,6}\b[\w#%&()+./:=?@~-]*/),Ge=class{#e={};#t;constructor(t={},e={}){this.#t=t,this.#e=e}static fromConfig({translations:t,translationLoadingRules:e}){return new Ge().addTranslations(t).addTranslationLoadingRules(e)}get(t,e,r,n="",a={},i={},s=!1){let o=this.#r(t,e,r,s);!o&&n&&n!==r&&(o=this.#r(t,e,n,s));let l={score:0,value:o?.default||t};for(let c of o?.variants||[]){let h=c.calculateMatchingScore(a);h>l.score&&(l.score=h,l.value=c.value)}return Bn(l.value,a,i)}getRouteGroups(){return Object.keys(this.#t).filter(t=>t.startsWith("/"))}getParamRouteGroups(){return Object.keys(this.#t).filter(t=>t.startsWith("/")&&re.test(t))}getLocaleTranslationVariables(t){let e={};for(let r of Object.values(this.#t)){if(!r[t])continue;let n=Object.entries(r[t]||b());for(let[a,{default:i,variants:s}]of n){let o={interpolationVars:[],variantVars:[],isVariantRequired:!1},l=[];if(i===void 0?o.isVariantRequired=!0:l.push(i),s.length>0){let y={};for(let{value:g,properties:j}of s){l.push(g);for(let{name:O,values:z}of j)y[O]=[...y[O]||[],...z]}o.variantVars=Object.entries(y).map(([g,j])=>({name:g,values:j}))}for(let y of l)Pe.exec(y,({match:g})=>{g[1]&&(o.interpolationVars=[...new Set([...o.interpolationVars,...Z(g[1])])])});if(!e[a]){e[a]=o;continue}let{interpolationVars:c,variantVars:h,isVariantRequired:f}=e[a]||{},S=[...new Set([...c||[],...o.interpolationVars])],d=[];for(let y of o.variantVars){let g=h?.find(j=>j.name===y.name);d.push(g?{name:y.name,values:[...new Set([...g?.values||[],...y.values])]}:y)}e[a]={interpolationVars:S,variantVars:d,isVariantRequired:(f||!1)&&o.isVariantRequired}}}return e}addTranslations(t){for(let[e,r]of Object.entries(t)){let n=Object.entries(r);if(n.length===0&&!this.#t[e]){this.#t[e]={};continue}for(let[a,i]of n)ft(this.#t,[e,a],Ue(i))}return this}addTranslationLoadingRules(t){if(t.length===0)return this;let{routes:e}=an(this.#t);for(let r of t){let n=[];for(let a of r.groups){let i=p.fromString(a);n.push(...Object.keys(this.#t).filter(s=>i.test(s)))}for(let a of r.routes){let i=p.fromString(a),s=e.filter(o=>i.test(o));for(let o of s){if(!this.#e[o]){this.#e[o]=[...new Set(n)];continue}this.#e[o]=[...new Set([...this.#e[o]||b(),...n])]}}}return this}clear(){this.#e={},this.#t={}}toClientSideObject(t){let e={};if(this.#e[t])for(let r of this.#e[t]||b())e[r]=this.#t[r]||{};return this.#t[t]&&(e[t]=this.#t[t]||{}),this.#t[J]&&(e[J]=this.#t[J]||{}),e}toObject(){return{loadDirectives:this.#e,translations:this.#t}}toString(){return JSON.stringify(this.toObject(),null,"	")}#r(t,e,r,n=!1){let a=null;if(n){let i=this.getRouteGroups();for(let s of i)for(let o of this.#e[s]||[]){let l=this.#t[o]?.[r]?.[t];if(l){a=l;break}}if(!a)for(let s of i)this.#t[s]?.[r]?.[t]&&(a=this.#t[s]?.[r]?.[t]||b())}else{for(let i of this.#e[e]||[]){let s=this.#t[i]?.[r]?.[t];if(s){a=s;break}}!a&&this.#t[e]?.[r]?.[t]&&(a=this.#t[e]?.[r]?.[t]||b())}return!a&&this.#t[J]?.[r]?.[t]&&(a=this.#t[J]?.[r]?.[t]||b()),a}},Ft=Ge,Zn=class extends Error{constructor(t){super(t?`Invalid date (${t}).`:"Invalid date.")}},Qn=Zn,Xn=class extends TypeError{constructor(t,e){t?super(e?`Invalid formatter (${e}) parameter: ${t}`:`Invalid formatter parameter: ${t}`):super(e?`Invalid formatter (${e}) parameter.`:"Invalid formatter parameter.")}},pt=Xn,ta=class extends TypeError{constructor(t,e){t?super(e?`Invalid formatter (${e}) value: ${t}`:`Invalid formatter value: ${t}`):super(e?`Invalid formatter (${e}) value.`:"Invalid formatter value.")}},nt=ta;function pe(t){if(typeof t!="string")throw new nt(`Received value is not a string, found "${t}".`,"upper");return t.toUpperCase()}function me(t){if(typeof t!="string")throw new nt(`Received value is not a string, found "${t}".`,"lower");return t.toLowerCase()}function ea(t){if(typeof t!="string")throw new nt(`Received value is not a string, found "${t}".`,"capitalize");return`${t.slice(0,1).toUpperCase()}${t.slice(1).toLowerCase()}`}function ra(t,e){return t??e}function ge(t,e){return t||e}function na(t,e){return typeof t=="string"?t:e}function aa(t,e=!0){if(typeof t=="symbol")throw new nt(`Received value cannot be a symbol, found "${t.toString()}".`,"json");if(typeof e!="boolean")throw new pt(`format must be a boolean, found "${e}".`,"json");return e?JSON.stringify(t,null,"	"):JSON.stringify(t)}function sa(t,e={},r=V.locale){if(typeof t=="string"&&(t=Number.parseFloat(t)),!xr(t))throw new nt(`Received value is not a number, found "${t}".`,"intl_format_number");if(!v(e))throw new pt(`options must be an object, found "${e}".`,"intl_format_number");if(typeof r!="string")throw new pt(`locale must be a string, found "${r}".`,"intl_format_number");return new Intl.NumberFormat(r,e).format(t)}function ia(t,e={},r=V.locale){if(typeof t!="string"&&typeof t!="number"&&!(t instanceof Date))throw new nt(`Received value is not a string, number or Date, found "${t}".`,"intl_format_date");if(t=t instanceof Date?t:new Date(t),!kr(t))throw new Qn(t);if(!v(e))throw new pt(`options must be an object, found "${e}".`,"intl_format_date");if(typeof r!="string")throw new pt(`locale must be a string, found "${r}".`,"intl_format_date");return new Intl.DateTimeFormat(r,e)}var oa=q.fromRegex(xn).assertStarting().assertEnding().build().toMatcher();function la(t){let e=oa(t.toString());if(!e)return{args:[],body:""};let[,r,n]=e.match;return{args:ca(r||""),body:fa(n||"")}}function ua(t){let e={};for(let[r,n]of Object.entries(t))e[r]=new Function(...n.args,n.body);return e}function ca(t){return t.trim().split(",").map(e=>e.trim())}function fa(t){return t.trim().endsWith("}")?t.slice(0,-1):t}var ha=class{#e={upper:pe,uppercase:pe,lower:me,lowercase:me,capitalize:ea,json:aa,default_nullish:ra,default:ge,default_falsy:ge,default_non_string:na,intl_format_number:sa,intl_format_date:ia};#t;#r;constructor(t={}){this.#t=t,this.#r={...this.#e,...this.#t}}get default(){return this.#e}get custom(){return this.#t}addFormaters(t){for(let[e,r]of Object.entries(t))this.#r[e]||(this.#r[e]=r,this.#t[e]=r);return this}clear(){this.#t={},this.#r={}}toClientSideObject(){let t={};for(let[e,r]of Object.entries(this.#t))t[e]=la(r);return t}toObject(){return this.#r}toString(){return JSON.stringify(this.toObject(),null,"	")}},Vt=ha,da=class extends Error{constructor(t){super(t?`Invalid environment: ${t}`:"Invalid environment.")}},pa=da,Je=class{#e;#t;constructor(t={},e=""){this.#t=t,this.#e=e}static fromConfig({routes:t,primaryLocale:e}){return new Je({},e).addSegments(t)}get(t,e,r){return this.#t[e]?.[t]?.[r]||null}getSegmentLocales(t){let e=[];for(let[r,n]of Object.entries(this.#t))n[t]&&e.push(r);return e}addSegments(t){let e=Object.entries(t);for(let[r,n]of e){let a=e.filter(([i])=>i!==r&&i!==this.#e);for(let[i,s]of Object.entries(n)){ft(this.#t,[this.#e,i,r],s),ft(this.#t,[r,s,this.#e],i);for(let[o,l]of a)l[i]&&ft(this.#t,[r,s,o],l[i])}}return this}clear(){this.#e="",this.#t={}}toClientSideObject(){return{...this.#t}}toObject(){return{primaryLocale:this.#e,segments:this.#t}}toString(){return JSON.stringify(this.toObject(),null,"	")}},qt=Je,ma=class extends Error{constructor(){super("Cannot initialize astro-i18n, it already has been initialized.")}},ga=ma,wa=class extends Error{constructor(t){super(t?`Cannot use filesystem: ${t}`:"Cannot use filesystem.")}},ya=wa,ba=class extends Error{constructor(){super(`Could not find the serialized ${F} state in the DOM. Check your ${F} config.`)}},va=ba;function $a(t){if(!v(t))return!1;for(let e of Object.values(t)){if(!v(e))return!1;for(let r of Object.values(e)){if(!v(r))return!1;for(let n of Object.values(r))if(typeof n!="string")return!1}}return!0}function Sa(t){if(!v(t))return!1;for(let e of Object.values(t)){if(!v(e))return!1;let r=Object.entries(e);if(r.length<2)return!1;for(let[n,a]of r)switch(n){case"args":{if(!dt(a))return!1;break}case"body":{if(typeof a!="string")return!1;break}}}return!0}function ja(t){if(!v(t))return!1;for(let e of Object.values(t)){if(!v(e))return!1;for(let r of Object.values(e))if(!xa(r))return!1}return!0}function xa(t){if(!v(t))return!1;for(let e of Object.values(t)){if(!v(e))return!1;for(let[r,n]of Object.entries(e))switch(r){case"default":{if(typeof n!="string")return!1;break}case"variants":{if(!gt(n)||!n.every(a=>ka(a)))return!1;break}default:return!1}}return!0}function ka(t){if(!v(t))return!1;let e=Object.entries(t);if(e.length<4)return!1;for(let[r,n]of e)switch(r){case"raw":{if(typeof n!="string")return!1;break}case"priority":{if(typeof n!="number")return!1;break}case"properties":{if(!gt(n)||!n.every(a=>Oa(a)))return!1;break}case"value":{if(typeof n!="string")return!1;break}default:return!1}return!0}function Oa(t){if(!v(t))return!1;let e=Object.entries(t);if(e.length<2)return!1;for(let[r,n]of e)switch(r){case"name":{if(typeof n!="string")return!1;break}case"values":{if(!gt(n)||!n.every(a=>typeof a=="boolean"||typeof a=="string"||typeof a=="number"||a==null))return!1;break}default:return!1}return!0}function La(t){if(!v(t))return!1;let e=Object.entries(t);if(e.length<5)return!1;for(let[r,n]of e)switch(r){case"locale":{if(typeof n!="string")return!1;break}case"route":{if(typeof n!="string")return!1;break}case"config":{if(!gn(n))return!1;break}case"translations":{if(!ja(n))return!1;break}case"segments":{if(!$a(n))return!1;break}case"formatters":{if(!Sa(n))return!1;break}default:return!1}return!0}function we(t){return Yn.test(t)}function Ra(t){let e="",r=0;return re.exec(t,({match:n,range:[a,i]})=>{if(e+=t.slice(r,a),!n[2]){r=i;return}e+=n[1]?"[\\w/-]+":"[\\w-]+",r=i}),e+=t.slice(r),p.fromString(e.replaceAll("/","\\/"))}var Ea=class extends Error{constructor(){super("Cannot perform operation, astro-i18n is not initialized.")}},ye=Ea,_a=class extends Error{constructor(){super("Could not redirect, is this code running in the server ?")}},Pa=_a,bt,U,D,M,x,L,R,C,P,A,G,_,tt,zt,Be,Ut,Ke,Gt,He,Jt,Ye,Bt,Ze,lt,$t,St,Kt,jt,Ht,ut,xt,kt,Yt,Zt,Qe,Qt,Xe,Xt=class{constructor(){m(this,zt),m(this,Ut),m(this,Gt),m(this,Jt),m(this,Bt),m(this,lt),m(this,St),m(this,jt),m(this,ut),m(this,kt),m(this,Zt),m(this,Qt),m(this,U,void 0),m(this,D,""),m(this,M,""),m(this,x,new ot),m(this,L,new Ft),m(this,R,new qt),m(this,C,new Vt),m(this,P,!1),m(this,A,!1),m(this,G,{}),m(this,_,null),m(this,tt,""),typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node<"u"?w(this,U,Y.NODE):typeof window>"u"?w(this,U,Y.NONE):(w(this,U,Y.BROWSER),u(this,x).run==="client+server"&&$(this,zt,Be).call(this))}get environment(){return u(this,U).toString()}get route(){return u(this,A)?"":u(this,M)}set route(t){we(t)&&(t=new URL(t).pathname),t=decodeURI(t);let{locale:e,route:r}=$(this,ut,xt).call(this,t);w(this,M,r),w(this,D,e||$(this,jt,Ht).call(this,$(this,kt,Yt).call(this,r))||this.primaryLocale)}get pages(){return u(this,L).getRouteGroups()}get page(){return $(this,lt,$t).call(this,this.route)}get locale(){return u(this,D)}get locales(){return[u(this,x).primaryLocale,...u(this,x).secondaryLocales]}get primaryLocale(){return u(this,x).primaryLocale}get secondaryLocales(){return u(this,x).secondaryLocales}get fallbackLocale(){return u(this,x).fallbackLocale}get isInitialized(){return u(this,P)}get internals(){return{toHtml:$(this,Zt,Qe).bind(this),config:u(this,x),segments:u(this,R),translations:u(this,L),splitLocaleAndRoute:$(this,ut,xt).bind(this),toString:$(this,Qt,Xe).bind(this),waitInitialization:$(this,Ut,Ke).bind(this),setPrivateProperties:$(this,Bt,Ze).bind(this),reinitalize:$(this,Gt,He).bind(this),getAndClearRedirection:$(this,Jt,Ye).bind(this)}}t(t,e={},r={}){if(!u(this,P))throw new ye;let{route:n,locale:a,fallbackLocale:i}=r;if(u(this,A))return u(this,L).get(t,"",a||this.locale,i||this.fallbackLocale,e,u(this,C).toObject(),!0);let s=n?$(this,lt,$t).call(this,n):$(this,lt,$t).call(this,this.route);return u(this,L).get(t,s||"",a||this.locale,i||this.fallbackLocale,e,u(this,C).toObject())}l(t,e={},r={}){if(!u(this,P))throw new ye;let{targetLocale:n,routeLocale:a,showPrimaryLocale:i,query:s}=r,o=$(this,kt,Yt).call(this,decodeURI(t)),l=this.locales.includes(o[0]||"")&&o.shift()||"",c=a||l||$(this,jt,Ht).call(this,o)||this.primaryLocale,h=n||this.locale,f=o.map(g=>u(this,R).get(g,c,h)||g).join("/"),S=Object.entries(e);if(S.length>0)for(let[g,j]of S)f=f.replace(`[${g}]`,String(j).replace("/",""));if((i===void 0?u(this,x).showPrimaryLocale||h!==this.primaryLocale:i)&&(f=f?`${h}/${f}`:h),u(this,x).trailingSlash==="always"&&(f+="/"),f=f.startsWith("/")?f:`/${f}`,!s)return f;let d={};for(let[g,j]of Object.entries(s))d[g]=String(j);let y=new URLSearchParams(d).toString();return y?`${f}?${y}`:f}addTranslations(t){return u(this,L).addTranslations(t),$(this,St,Kt).call(this),this}addFormatters(t){return u(this,C).addFormaters(t),this}addTranslationLoadingRules(t){return u(this,L).addTranslationLoadingRules(t),this}addRoutes(t){return u(this,R).addSegments(t),$(this,St,Kt).call(this),this}extractRouteLocale(t){return $(this,ut,xt).call(this,t).locale}redirect(t,e=301){if(this.environment===Y.BROWSER)throw new Pa;if(typeof t=="string"){let r=we(t)?new URL(t):new URL(`${u(this,tt)}/${t.replace(/^\//,"")}`);w(this,_,Response.redirect(r,e));return}w(this,_,Response.redirect(t,e))}async initialize(t=void 0,e={}){if(u(this,P))throw new ga;switch(u(this,U)){case Y.NODE:{w(this,x,typeof t=="object"?await new ot(t).loadFilesystemTranslations():await ot.fromFilesystem(t));break}case Y.NONE:{if(typeof t=="string")throw new ya("Cannot load config from filesystem in a non-node environment.");w(this,x,new ot(t||{}));break}default:throw new pa("Cannot initialize in a browser environment.")}w(this,L,Ft.fromConfig(u(this,x))),w(this,R,qt.fromConfig(u(this,x))),w(this,C,new Vt(e)),w(this,P,!0)}},tr=Xt;bt=new WeakMap,U=new WeakMap,D=new WeakMap,M=new WeakMap,x=new WeakMap,L=new WeakMap,R=new WeakMap,C=new WeakMap,P=new WeakMap,A=new WeakMap,G=new WeakMap,_=new WeakMap,tt=new WeakMap,zt=new WeakSet,Be=function(){let t=document.querySelector(`#${u(Xt,bt)}`);if(!t||!t.textContent)throw new va;let e=JSON.parse(t.textContent);mt(e,La),w(this,D,e.locale),w(this,M,e.route),w(this,x,new ot(e.config)),w(this,L,new Ft(Hn(e.translations))),w(this,R,new qt(e.segments,e.config.primaryLocale)),w(this,C,new Vt(ua(e.formatters))),w(this,P,!0),t.remove()},Ut=new WeakSet,Ke=async function(){let t=e=>{u(this,P)?e():setTimeout(()=>t(e),25)};return new Promise(t)},Gt=new WeakSet,He=async function(t=void 0,e={}){w(this,P,!1),u(this,L).clear(),u(this,R).clear(),u(this,C).clear(),await this.initialize(t,e)},Jt=new WeakSet,Ye=function(){let t=u(this,_);return w(this,_,null),t},Bt=new WeakSet,Ze=function(t={}){let{route:e,locale:r,isGetStaticPaths:n,origin:a}={route:u(this,M),locale:u(this,D),isGetStaticPaths:u(this,A),origin:u(this,tt),...t};w(this,M,e),w(this,D,r),w(this,A,n),w(this,tt,a)},lt=new WeakSet,$t=function(t){if(u(this,A))return null;if(u(this,G)[t])return u(this,G)[t]||b();let e=this.l(t,void 0,{targetLocale:this.primaryLocale});if(this.pages.includes(e))return e;let r=null;for(let n of this.pages)if(re.test(n)&&Ra(n).test(t)){r=n;break}return!r||!this.pages.includes(r)?null:(u(this,G)[t]=r,r)},St=new WeakSet,Kt=function(){w(this,G,{})},jt=new WeakSet,Ht=function(t){let e={};for(let n of t)for(let a of u(this,R).getSegmentLocales(n))e[a]||(e[a]=0),e[a]+=1;let r={locale:"",score:0,isExAequo:!0};for(let[n,a]of Object.entries(e)){if(a>r.score){r.locale=n,r.score=a,r.isExAequo=!1;continue}a===r.score&&(r.isExAequo=!0)}return r.isExAequo?null:r.locale||null},ut=new WeakSet,xt=function(t){t.startsWith("/")||(t=`/${t}`);let e=p.fromString(`\\/(${this.locales.join("|")})(?:\\/.*)?$`),{match:r}=e.match(t)||{},n=r?.[1]||null;return{locale:n,route:n?t.replace(`/${n}`,"").replace(/\/$/,"")||"/":t.replace(/\/$/,"")||"/"}},kt=new WeakSet,Yt=function(t){return t.replace(/^\//,"").replace(/\/$/,"").split("/")},Zt=new WeakSet,Qe=function(){let t={locale:u(this,D),route:u(this,M),config:u(this,x).toClientSideObject(),translations:u(this,L).toClientSideObject(this.route),segments:u(this,R).toClientSideObject(),formatters:u(this,C).toClientSideObject()};return`<script id="${u(Xt,bt)}" type="application/json">${JSON.stringify(t)}<\/script>`},Qt=new WeakSet,Xe=function(){let t={};for(let[e,r]of Object.entries(u(this,C).toObject()))t[e]=r.name;return JSON.stringify({environment:this.environment,route:this.route,locale:this.locale,locales:this.locales,primaryLocale:this.primaryLocale,secondaryLocales:this.secondaryLocales,fallbackLocale:this.fallbackLocale,isInitialized:this.isInitialized,"#redirection":u(this,_)instanceof Response?{url:u(this,_).url,status:u(this,_).status}:u(this,_),"#origin":u(this,tt),"#isGetStaticPaths":u(this,A),"#routePageCache":u(this,G),"#config":u(this,x).toObject(),"#translations":u(this,L).toObject(),"#segments":u(this,R).toObject(),"#formatters":t},null,"	")},m(tr,bt,`__${F}__`);var Ca=tr,V=new Ca,Wa=V.t.bind(V),Da=V.l.bind(V);function Ma(t,e){return Wa(t,e)}function Aa(t){return t[V.locale]??t[V.fallbackLocale]??t.en}export{Ta as C,Aa as a,Da as c,Ma as t};
